import{r as u,j as r,b2 as b,B as T,F as R,T as E,ab as j,s as S}from"./index-C9HasOiM.js";import{u as g,t as w}from"./index-BTi6rd4V.js";import{o as z}from"./repair-C13Y1Qe-.js";import{u as A}from"./useRepair-Cho1bqHB.js";import"./repair-DgMqRd6F.js";const N=({open:e,onClose:o})=>{var i;const{register:c,handleSubmit:l,formState:{errors:n},setError:d,reset:t}=g({resolver:w(z)}),a=u.useRef(null);u.useEffect(()=>{if(!e){t();return}const s=setTimeout(()=>{e&&a.current&&a.current.focus()},100);return()=>clearTimeout(s)},[e]);const{createNewInterventionWorkDone:f}=A(),h=async s=>new Promise((p,m)=>{f.mutateAsync(s).then(()=>{o(),j("Trabalho realizado adicionado com sucesso!"),t(),p()}).catch(x=>{if(x.error.code==="REP-016"){d("name",{type:"manual",message:"Nome jรก existente"}),m();return}o(),S("Erro ao adicionar trabalho realizado!"),t(),m()})});return r.jsx(b,{mode:"form",title:"Adicionar Trabalho Realizado",open:e,onClose:o,submitButtonText:"Adicionar Trabalho Realizado",onSubmit:l(h),children:r.jsx(T,{sx:{padding:3},children:r.jsx(R,{fullWidth:!0,children:r.jsx(E,{...c("name"),label:"Nome",error:!!n.name,helperText:(i=n.name)==null?void 0:i.message,autoComplete:"off",inputRef:a})})})})};export{N as default};
