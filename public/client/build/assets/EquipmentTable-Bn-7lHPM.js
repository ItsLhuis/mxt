import{d as se,e as de,r as f,j as t,S as l,a7 as g,b7 as $,h as n,aV as C,aW as h,aE as y,aM as F,aN as S,aF as me,aP as N,ag as R,aQ as ce,aG as pe,aX as xe,aY as o,aO as fe,bb as I,b9 as V,bc as B,bd as k,be as U,B as j,b8 as P,aK as v,H as W,aB as ue,f as re,aZ as be,a_ as _e,a$ as he,bf as oe}from"./index-DJpfvod0.js";import{u as je}from"./useEquipment-c2-M7uo4.js";import{g as ve}from"./getValidChipColor-D8WVyITM.js";import{E as ge}from"./Edit-CSDBMvJz.js";import{C as K}from"./Check-D1jSKKzw.js";import{V as Ce}from"./Visibility-e42ycFBn.js";import{A as ye}from"./Attachment-DsyIoV6K.js";import{H as Fe}from"./History-r8vFQPvs.js";const Ie=()=>{const Y=se(),{role:A}=de(),{findAllEquipments:G,deleteEquipment:Q}=je(),{data:X,isLoading:Z}=G,[J,O]=f.useState(!1),[E,H]=f.useState({url:"",name:"",size:"",type:""}),w=(a,s,u,r)=>{H({url:a,name:s,size:u,type:r}),O(!0)},ee=()=>{O(!1),H({url:"",type:""})},[T,L]=f.useState({isOpen:!1,equipmentId:null}),te=a=>{L({isOpen:!0,equipmentId:a})},z=()=>{L({isOpen:!1,equipmentId:null})},ie=()=>new Promise((a,s)=>{T.equipmentId?Q.mutateAsync({equipmentId:T.equipmentId}).then(()=>{z(),a()}).catch(()=>{z(),s()}):(z(),s())}),ae=f.useMemo(()=>[{id:"client.name",label:"Cliente",align:"left",sortable:!0,renderComponent:({row:a})=>{var s,u,r,b;return t.jsxs(l,{sx:{flexDirection:"row",alignItems:"center",gap:1,whiteSpace:"pre"},children:[t.jsx(g,{to:`/client/${(s=a==null?void 0:a.client)==null?void 0:s.id}`,children:(u=a==null?void 0:a.client)==null?void 0:u.name}),((r=a==null?void 0:a.client)==null?void 0:r.description)&&t.jsx($,{fontSize:"small",title:(b=a==null?void 0:a.client)==null?void 0:b.description})]})}},{id:"type.name",label:"Tipo",align:"left",sortable:!0,renderComponent:({row:a})=>{var s;return t.jsx(g,{to:`/equipment/${a==null?void 0:a.id}`,children:(s=a==null?void 0:a.type)==null?void 0:s.name})}},{id:"brand.name",label:"Marca ",align:"left",sortable:!0,renderComponent:({row:a})=>{var s;return t.jsx(g,{to:`/equipment/${a==null?void 0:a.id}`,children:(s=a==null?void 0:a.brand)==null?void 0:s.name})}},{id:"model.name",label:"Modelo",align:"left",sortable:!0,renderComponent:({row:a})=>{var s;return t.jsx(g,{to:`/equipment/${a==null?void 0:a.id}`,children:(s=a==null?void 0:a.model)==null?void 0:s.name})}},{id:"sn",label:"Número de série",align:"left",sortable:!0,renderComponent:({row:a})=>t.jsx(g,{to:`/equipment/${a==null?void 0:a.id}`,children:a==null?void 0:a.sn})},{id:"created_by_user",visible:!1},{id:"created_at_datetime",label:"Criado por",align:"left",sortable:!0,renderComponent:({row:a})=>{var s,u,r,b,_;return t.jsx(t.Fragment,{children:t.jsxs(l,{sx:{flexDirection:"row",gap:2},children:[t.jsx(l,{sx:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:a!=null&&a.created_by_user?t.jsxs(t.Fragment,{children:[t.jsx(C,{alt:(s=a==null?void 0:a.created_by_user)==null?void 0:s.username,src:`${h}/users/${(u=a==null?void 0:a.created_by_user)==null?void 0:u.id}/avatar?size=80`,name:(r=a==null?void 0:a.created_by_user)==null?void 0:r.username}),t.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.jsx(n,{variant:"p",component:"p",fontWeight:500,children:(b=a==null?void 0:a.created_by_user)==null?void 0:b.username}),t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:(_=a==null?void 0:a.created_by_user)==null?void 0:_.role})]})]}):t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Utilizador removido"})}),t.jsx(y,{sx:{borderColor:"var(--elevation-level5)",borderWidth:1}}),t.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.jsx(n,{variant:"p",component:"p",fontWeight:500,children:F(a==null?void 0:a.created_at_datetime)}),t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:S(a==null?void 0:a.created_at_datetime)})]})]})})}},{id:"last_modified_by_user",visible:!1},{id:"last_modified_datetime",label:"Modificado pela última vez por",align:"left",sortable:!0,renderComponent:({row:a})=>{var s,u,r,b,_;return t.jsx(t.Fragment,{children:a!=null&&a.last_modified_datetime?t.jsxs(l,{sx:{flexDirection:"row",gap:2},children:[t.jsx(l,{sx:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:a!=null&&a.last_modified_by_user?t.jsxs(t.Fragment,{children:[t.jsx(C,{alt:(s=a==null?void 0:a.last_modified_by_user)==null?void 0:s.username,src:`${h}/users/${(u=a==null?void 0:a.last_modified_by_user)==null?void 0:u.id}/avatar?size=80`,name:(r=a==null?void 0:a.last_modified_by_user)==null?void 0:r.username}),t.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.jsx(n,{variant:"p",component:"p",fontWeight:500,children:(b=a==null?void 0:a.last_modified_by_user)==null?void 0:b.username}),t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:(_=a==null?void 0:a.last_modified_by_user)==null?void 0:_.role})]})]}):t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Utilizador removido"})}),t.jsx(y,{sx:{borderColor:"var(--elevation-level5)",borderWidth:1}}),t.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.jsx(n,{variant:"p",component:"p",fontWeight:500,children:F(a==null?void 0:a.last_modified_datetime)}),t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:S(a==null?void 0:a.last_modified_datetime)})]})]}):t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Ainda não foi modificado"})})}},{id:"more_options",align:"right",sortable:!1,renderComponent:({row:a})=>t.jsx(me,{mode:"custom",customButton:t.jsx(N,{title:"Mais opções",sx:{margin:-1},children:t.jsx(R,{children:t.jsx(ce,{})})}),children:t.jsx(pe,{buttons:[{label:"Editar",icon:t.jsx(ge,{fontSize:"small"}),onClick:()=>Y(`/equipment/${a==null?void 0:a.id}`)},...A!=="Funcionário"?[{label:"Eliminar",icon:t.jsx(xe,{fontSize:"small",color:"error"}),color:"error",divider:!0,onClick:()=>te(a==null?void 0:a.id)}]:[]]})})}],[]),ne=f.useMemo(()=>[{id:"client.name",label:"Cliente"},{id:"type.name",label:"Tipo"},{id:"brand.name",label:"Marca"},{id:"model.name",label:"Modelo"},{id:"sn",label:"Número de série"},{id:"created_by_user.username",label:"Criado por"},{id:"created_at_datetime",label:"Data de criação",formatter:a=>a?o(a):""},{id:"last_modified_by_user.username",label:"Modificado pela última vez por"},{id:"last_modified_datetime",label:"Última data de modificação",formatter:a=>a?o(a):""}],[]),le=f.useMemo(()=>({row:a})=>{const s=f.useMemo(()=>[{id:"status.name",label:"Estado",align:"left",sortable:!0,renderComponent:({row:e})=>{var m,d;return t.jsx(g,{to:`/repair/${e==null?void 0:e.id}`,children:t.jsx(fe,{label:(m=e==null?void 0:e.status)==null?void 0:m.name,color:ve((d=e==null?void 0:e.status)==null?void 0:d.color)})})}},{id:"entry_datetime",label:"Data de entrada",align:"left",sortable:!0,renderComponent:({row:e})=>t.jsx(t.Fragment,{children:e!=null&&e.entry_datetime?t.jsx(t.Fragment,{children:I(e==null?void 0:e.entry_datetime)}):t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Sem valor"})})},{id:"conclusion_datetime",label:"Data de conclusão",align:"left",sortable:!0,renderComponent:({row:e})=>t.jsx(t.Fragment,{children:e!=null&&e.conclusion_datetime?t.jsx(t.Fragment,{children:I(e==null?void 0:e.conclusion_datetime)}):t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Sem valor"})})},{id:"delivery_datetime",label:"Data de entrega",align:"left",sortable:!0,renderComponent:({row:e})=>t.jsx(t.Fragment,{children:e!=null&&e.delivery_datetime?t.jsx(t.Fragment,{children:I(e==null?void 0:e.delivery_datetime)}):t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Sem valor"})})},{id:"is_client_notified",label:"Cliente notificado",align:"left",sortable:!0,renderComponent:({row:e})=>t.jsx(l,{sx:{alignItems:"flex-start"},children:e!=null&&e.is_client_notified?t.jsx(K,{color:"success"}):t.jsx(V,{color:"error"})})},{id:"created_by_user",visible:!1},{id:"created_at_datetime",label:"Criado por",align:"left",sortable:!0,renderComponent:({row:e})=>{var m,d,c,p,x;return t.jsx(t.Fragment,{children:t.jsxs(l,{sx:{flexDirection:"row",gap:2},children:[t.jsx(l,{sx:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:e!=null&&e.created_by_user?t.jsxs(t.Fragment,{children:[t.jsx(C,{alt:(m=e==null?void 0:e.created_by_user)==null?void 0:m.username,src:`${h}/users/${(d=e==null?void 0:e.created_by_user)==null?void 0:d.id}/avatar?size=80`,name:(c=e==null?void 0:e.created_by_user)==null?void 0:c.username}),t.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.jsx(n,{variant:"p",component:"p",fontWeight:500,children:(p=e==null?void 0:e.created_by_user)==null?void 0:p.username}),t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:(x=e==null?void 0:e.created_by_user)==null?void 0:x.role})]})]}):t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Utilizador removido"})}),t.jsx(y,{sx:{borderColor:"var(--elevation-level5)",borderWidth:1}}),t.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.jsx(n,{variant:"p",component:"p",fontWeight:500,children:F(e==null?void 0:e.created_at_datetime)}),t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:S(e==null?void 0:e.created_at_datetime)})]})]})})}},{id:"last_modified_by_user",visible:!1},{id:"last_modified_datetime",label:"Modificado pela última vez por",align:"left",sortable:!0,renderComponent:({row:e})=>{var m,d,c,p,x;return t.jsx(t.Fragment,{children:e!=null&&e.last_modified_datetime?t.jsxs(l,{sx:{flexDirection:"row",gap:2},children:[t.jsx(l,{sx:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:e!=null&&e.last_modified_by_user?t.jsxs(t.Fragment,{children:[t.jsx(C,{alt:(m=e==null?void 0:e.last_modified_by_user)==null?void 0:m.username,src:`${h}/users/${(d=e==null?void 0:e.last_modified_by_user)==null?void 0:d.id}/avatar?size=80`,name:(c=e==null?void 0:e.last_modified_by_user)==null?void 0:c.username}),t.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.jsx(n,{variant:"p",component:"p",fontWeight:500,children:(p=e==null?void 0:e.last_modified_by_user)==null?void 0:p.username}),t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:(x=e==null?void 0:e.last_modified_by_user)==null?void 0:x.role})]})]}):t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Utilizador removido"})}),t.jsx(y,{sx:{borderColor:"var(--elevation-level5)",borderWidth:1}}),t.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.jsx(n,{variant:"p",component:"p",fontWeight:500,children:F(e==null?void 0:e.last_modified_datetime)}),t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:S(e==null?void 0:e.last_modified_datetime)})]})]}):t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Ainda não foi modificado"})})}}],[]),u=f.useMemo(()=>[{id:"client",label:"Cliente",formatter:()=>{var e;return(e=a==null?void 0:a.client)==null?void 0:e.name}},{id:"equipment",label:"Equipamento",formatter:()=>{var e,m,d;return`${(e=a==null?void 0:a.type)==null?void 0:e.name} - ${(m=a==null?void 0:a.brand)==null?void 0:m.name} ${(d=a==null?void 0:a.model)==null?void 0:d.name} (${a==null?void 0:a.sn})`}},{id:"status",label:"Estado",formatter:e=>e==null?void 0:e.name,color:e=>e==null?void 0:e.color},{id:"entry_datetime",label:"Data de entrada",formatter:e=>e?o(e):""},{id:"conclusion_datetime",label:"Data de conclusão",formatter:e=>e?o(e):""},{id:"delivery_datetime",label:"Data de entrega",formatter:e=>e?o(e):""},{id:"is_client_notified",label:"Cliente notificado",formatter:e=>e===!0?"Sim":"Não"},{id:"created_by_user.username",label:"Criado por"},{id:"created_at_datetime",label:"Data de criação",formatter:e=>e?o(e):""},{id:"last_modified_by_user.username",label:"Modificado pela última vez por"},{id:"last_modified_datetime",label:"Última data de modificação",formatter:e=>e?o(e):""}],[]),r=f.useMemo(()=>[{id:"file_mime_type",label:"Tipo",align:"left",sortable:!0,renderComponent:({row:e})=>t.jsx(l,{sx:{alignItems:"flex-start"},children:(e==null?void 0:e.file_mime_type)==="application/pdf"?t.jsx("img",{src:B}):e!=null&&e.file_mime_type.startsWith("image/")?t.jsx("img",{src:k}):t.jsx("img",{src:U})})},{id:"original_filename",label:"Ficheiro",align:"left",sortable:!0,renderComponent:({row:e})=>t.jsxs(l,{children:[t.jsx(n,{variant:"p",component:"p",children:e==null?void 0:e.original_filename}),t.jsx(n,{variant:"p",component:"p",sx:{color:"var(--outline)"},children:`${(e==null?void 0:e.file_size)<1024*1024?((e==null?void 0:e.file_size)/1024).toFixed(2)+" Kb":((e==null?void 0:e.file_size)/(1024*1024)).toFixed(2)+" Mb"}`})]})},{id:"uploaded_by_user",visible:!1},{id:"uploaded_at_datetime",label:"Carregado por",align:"left",sortable:!0,renderComponent:({row:e})=>{var m,d,c,p,x;return t.jsx(t.Fragment,{children:t.jsxs(l,{sx:{flexDirection:"row",gap:2},children:[t.jsx(l,{sx:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:e!=null&&e.uploaded_by_user?t.jsxs(t.Fragment,{children:[t.jsx(C,{alt:(m=e==null?void 0:e.uploaded_by_user)==null?void 0:m.username,src:`${h}/users/${(d=e==null?void 0:e.uploaded_by_user)==null?void 0:d.id}/avatar?size=80`,name:(c=e==null?void 0:e.uploaded_by_user)==null?void 0:c.username}),t.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.jsx(n,{variant:"p",component:"p",fontWeight:500,children:(p=e==null?void 0:e.uploaded_by_user)==null?void 0:p.username}),t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:(x=e==null?void 0:e.uploaded_by_user)==null?void 0:x.role})]})]}):t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Utilizador removido"})}),t.jsx(y,{sx:{borderColor:"var(--elevation-level5)",borderWidth:1}}),t.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.jsx(n,{variant:"p",component:"p",fontWeight:500,children:F(e==null?void 0:e.uploaded_at_datetime)}),t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:S(e==null?void 0:e.uploaded_at_datetime)})]})]})})}},{id:"view_file",align:"right",sortable:!1,renderComponent:({row:e})=>t.jsx(N,{title:"Ver anexo",sx:{margin:-1},children:t.jsx(R,{onClick:()=>w(`${h}/equipments/${e==null?void 0:e.equipment_id}/attachments/${e==null?void 0:e.id}/${e==null?void 0:e.original_filename}`,e==null?void 0:e.original_filename,e==null?void 0:e.file_size,e==null?void 0:e.file_mime_type),children:t.jsx(Ce,{})})})}],[]),b=f.useMemo(()=>[{id:"type",label:"Atividade",align:"left",sortable:!0},{id:"responsible_user",label:"Responsável",align:"left",sortable:!1,renderComponent:({row:e})=>{var m,d,c,p,x;return t.jsx(t.Fragment,{children:e!=null&&e.responsible_user?t.jsxs(l,{sx:{flexDirection:"row",gap:2},children:[t.jsxs(l,{sx:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:[t.jsx(C,{alt:(m=e==null?void 0:e.responsible_user)==null?void 0:m.username,src:`${h}/users/${(d=e==null?void 0:e.responsible_user)==null?void 0:d.id}/avatar?size=80`,name:(c=e==null?void 0:e.responsible_user)==null?void 0:c.username}),t.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.jsx(n,{variant:"p",component:"p",fontWeight:500,children:(p=e==null?void 0:e.responsible_user)==null?void 0:p.username}),t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:(x=e==null?void 0:e.responsible_user)==null?void 0:x.role})]})]}),t.jsx(y,{sx:{borderColor:"var(--elevation-level5)",borderWidth:1}}),t.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[t.jsx(n,{variant:"p",component:"p",fontWeight:500,children:F(e==null?void 0:e.created_at_datetime)}),t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:S(e==null?void 0:e.created_at_datetime)})]})]}):t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Utilizador removido"})})}}],[]),_=f.useMemo(()=>({row:e})=>{var c,p,x;const m=f.useMemo(()=>[{id:"field",label:"Campo",align:"left",sortable:!0},{id:"before",label:"Antes",align:"left",sortable:!0,renderComponent:({row:i})=>{var D,q,M;return(i==null?void 0:i.field)==="Descrição"&&i!=null&&i.before?t.jsx(j,{sx:{maxHeight:300,overflow:"hidden",overflowY:"auto",borderRadius:"8px",border:"1px solid var(--elevation-level5)",padding:2},children:t.jsx("span",{className:"table-cell-tiptap-editor",dangerouslySetInnerHTML:P(i==null?void 0:i.before)})}):(i==null?void 0:i.field)==="Cliente"&&i!=null&&i.before?t.jsxs(l,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[i==null?void 0:i.before.name,(i==null?void 0:i.before.description)&&t.jsx($,{fontSize:"small",title:i==null?void 0:i.before.description})]}):(i==null?void 0:i.field)==="Tipo"&&i!=null&&i.before?t.jsx(t.Fragment,{children:(D=i==null?void 0:i.before)==null?void 0:D.name}):(i==null?void 0:i.field)==="Marca"&&i!=null&&i.before?t.jsx(t.Fragment,{children:(q=i==null?void 0:i.before)==null?void 0:q.name}):(i==null?void 0:i.field)==="Modelo"&&i!=null&&i.before?t.jsx(t.Fragment,{children:(M=i==null?void 0:i.before)==null?void 0:M.name}):i!=null&&i.before?i==null?void 0:i.before:t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Sem valor"})}},{id:"after",label:"Depois",align:"left",sortable:!0,renderComponent:({row:i})=>{var D,q,M;return(i==null?void 0:i.field)==="Descrição"&&i!=null&&i.after?t.jsx(j,{sx:{maxHeight:300,overflow:"hidden",overflowY:"auto",borderRadius:"8px",border:"1px solid var(--elevation-level5)",padding:2},children:t.jsx("span",{className:"table-cell-tiptap-editor",dangerouslySetInnerHTML:P(i==null?void 0:i.after)})}):(i==null?void 0:i.field)==="Cliente"&&i!=null&&i.after?t.jsxs(l,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[i==null?void 0:i.after.name,(i==null?void 0:i.after.description)&&t.jsx($,{fontSize:"small",title:i==null?void 0:i.after.description})]}):(i==null?void 0:i.field)==="Tipo"&&i!=null&&i.after?t.jsx(t.Fragment,{children:(D=i==null?void 0:i.after)==null?void 0:D.name}):(i==null?void 0:i.field)==="Marca"&&i!=null&&i.after?t.jsx(t.Fragment,{children:(q=i==null?void 0:i.after)==null?void 0:q.name}):(i==null?void 0:i.field)==="Modelo"&&i!=null&&i.after?t.jsx(t.Fragment,{children:(M=i==null?void 0:i.after)==null?void 0:M.name}):i!=null&&i.after?i==null?void 0:i.after:t.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Sem valor"})}},{id:"changed",label:"Alterado",align:"left",sortable:!0,renderComponent:({row:i})=>t.jsx(t.Fragment,{children:i!=null&&i.changed?t.jsx(K,{color:"success"}):t.jsx(V,{color:"error"})})}],[]),d=f.useMemo(()=>[{id:"file_mime_type",label:"Tipo",align:"left",sortable:!0,renderComponent:({row:i})=>t.jsx(l,{sx:{alignItems:"flex-start"},children:(i==null?void 0:i.file_mime_type)==="application/pdf"?t.jsx("img",{src:B}):i!=null&&i.file_mime_type.startsWith("image/")?t.jsx("img",{src:k}):t.jsx("img",{src:U})})},{id:"original_filename",label:"Ficheiro",align:"left",sortable:!0,renderComponent:({row:i})=>t.jsxs(l,{children:[t.jsx(n,{variant:"p",component:"p",children:i==null?void 0:i.original_filename}),t.jsx(n,{variant:"p",component:"p",sx:{color:"var(--outline)"},children:`${(i==null?void 0:i.file_size)<1024*1024?((i==null?void 0:i.file_size)/1024).toFixed(2)+" Kb":((i==null?void 0:i.file_size)/(1024*1024)).toFixed(2)+" Mb"}`})]})}],[]);return t.jsx(j,{sx:{border:"1px solid var(--elevation-level5)",borderRadius:2,overflow:"hidden",margin:3},children:((c=e==null?void 0:e.details[0])==null?void 0:c.field)==="Anexos"?t.jsx(t.Fragment,{children:e!=null&&e.details[0].after?t.jsx(v,{data:((p=e==null?void 0:e.details[0])==null?void 0:p.after)??[],columns:d}):t.jsx(v,{showSearch:!1,data:[(x=e==null?void 0:e.details[0])==null?void 0:x.before],columns:d})}):t.jsx(v,{data:(e==null?void 0:e.details)??[],columns:m})})},[]);return t.jsxs(l,{sx:{margin:3,gap:3},children:[t.jsxs(j,{sx:{border:"1px solid var(--elevation-level5)",borderRadius:2,overflow:"hidden"},children:[t.jsx(W,{title:"Reparações",description:"Reparações do equipamento",icon:t.jsx(ue,{})}),t.jsx(v,{mode:"datatable",data:(a==null?void 0:a.repairs)??[],columns:s,exportFileName:"reparacoes_equipamento",exportColumns:u})]}),t.jsxs(j,{sx:{border:"1px solid var(--elevation-level5)",borderRadius:2,overflow:"hidden"},children:[t.jsx(W,{title:"Anexos",description:"Anexos do equipamento",icon:t.jsx(ye,{})}),t.jsx(v,{mode:"datatable",data:(a==null?void 0:a.attachments)??[],columns:r})]}),A!=="Funcionário"&&t.jsxs(j,{sx:{border:"1px solid var(--elevation-level5)",borderRadius:2,overflow:"hidden"},children:[t.jsx(W,{title:"Histórico de Atividades",description:"Histórico de atividades sobre o equipamento",icon:t.jsx(Fe,{})}),t.jsx(v,{mode:"datatable",data:(a==null?void 0:a.interactions_history)??[],columns:b,ExpandableContentComponent:_})]})]})},[]);return t.jsx(re,{elevation:1,children:t.jsxs(j,{sx:{marginTop:3},children:[t.jsx(be,{isLoading:Z,LoadingComponent:t.jsx(_e,{mode:"datatable"}),LoadedComponent:t.jsx(v,{mode:"datatable",data:X??[],columns:ae,exportFileName:"equipamentos",exportColumns:ne,ExpandableContentComponent:le})}),t.jsx(he,{mode:"delete",title:"Eliminar Equipamento",open:T.isOpen,onClose:z,onSubmit:ie,description:"Tem a certeza que deseja eliminar este equipamento?",subDescription:"Ao eliminar este equipamento, todos os dados relacionados, incluindo anexos e reparações associadas, serão removidos de forma permanente."}),t.jsx(oe,{open:J,onClose:ee,file:E.url,fileName:E.name,fileSize:Number(E.size),fileType:E.type})]})})};export{Ie as default};
