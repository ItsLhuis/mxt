import{r as n,j as r,b2 as B,B as M,F as R,T as q,ab as w,s as y}from"./index-C9HasOiM.js";import{u as I,b as z,t as N}from"./index-BTi6rd4V.js";import{b as P}from"./equipment-D4V42Xnu.js";import{u as U}from"./useEquipment-ClzBGdbo.js";import"./equipment-DQ8Bx2dX.js";const L=({brand:e,open:t,onClose:s})=>{var u,c;const a=n.useRef(null);n.useEffect(()=>{if(!t)return;const o=setTimeout(()=>{t&&a.current&&a.current.focus()},100);return()=>clearTimeout(o)},[t]);const{control:f,register:d,handleSubmit:p,getValues:h,formState:{errors:i},setError:x,reset:E}=I({resolver:N(P)}),T={name:(e==null?void 0:e.name)||""},{isDirty:b}=z({control:f}),m=()=>!b;n.useEffect(()=>{e&&E(T)},[e]);const{updateEquipmentBrand:g}=U(),S=async o=>{if(!m())return new Promise((j,l)=>{g.mutateAsync({brandId:e.id,...o}).then(()=>{s(),w("Marca atualizada com sucesso!"),j()}).catch(F=>{if(F.error.code==="EQU-007"){x("name",{brand:"manual",message:"Nome jÃ¡ existente"}),l();return}s(),y("Erro ao atualizar marca!"),l()})})};return r.jsx(B,{mode:"form",title:"Editar Marca",open:t,onClose:s,submitButtonText:"Editar Marca",onSubmit:p(S),disabled:m(),children:r.jsx(M,{sx:{padding:3},children:r.jsx(R,{fullWidth:!0,children:r.jsx(q,{...d("name"),label:"Nome",error:!!i.name,helperText:(u=i.name)==null?void 0:u.message,autoComplete:"off",inputRef:a,InputLabelProps:{shrink:((c=h("name"))==null?void 0:c.length)>0}})})})})};export{L as default};
