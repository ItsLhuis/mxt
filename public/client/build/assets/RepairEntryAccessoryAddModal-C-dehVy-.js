import{r as m,j as r,aT as E,B as A,F as T,T as j,aj as y,s as R}from"./index-mWc9gLhA.js";import{u as S,t as b}from"./index-COzNbWAj.js";import{o as g}from"./repair-D-n4dckQ.js";import{u as w}from"./useRepair-BcwC0uik.js";const P=({open:e,onClose:t})=>{var i;const{register:u,handleSubmit:d,formState:{errors:n},setError:f,reset:s}=S({resolver:b(g)}),a=m.useRef(null);m.useEffect(()=>{if(!e){s();return}const o=setTimeout(()=>{e&&a.current&&a.current.focus()},100);return()=>clearTimeout(o)},[e]);const{createNewEntryAccessory:l}=w(),x=async o=>new Promise((p,c)=>{l.mutateAsync(o).then(()=>{t(),y("Acessório da entrada adicionado com sucesso!"),s(),p()}).catch(h=>{if(h.error.code==="REP-010"){f("name",{type:"manual",message:"Nome já existente"}),c();return}t(),R("Erro ao adicionar acessório da entrada!"),s(),c()})});return r.jsx(E,{mode:"form",title:"Adicionar Acessório da Entrada",open:e,onClose:t,submitButtonText:"Adicionar Acessório da Entrada",onSubmit:d(x),children:r.jsx(A,{sx:{padding:3},children:r.jsx(T,{fullWidth:!0,children:r.jsx(j,{...u("name"),label:"Nome",error:!!n.name,helperText:(i=n.name)==null?void 0:i.message,autoComplete:"off",inputRef:a})})})})};export{P as default};
