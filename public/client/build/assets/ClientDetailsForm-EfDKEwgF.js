import{X as L,r as S,j as e,a as v,aA as T,T as E,Z as F,ax as w,ap as z,a0 as D,a1 as P,a8 as k,B as y,a3 as A,a4 as B,aa as R,a5 as H}from"./index-BzXGUPkY.js";import{c as I}from"./client--QYkcLAJ.js";import{u as N}from"./useClient-CPTGHj4z.js";import{R as M,s as p}from"./sanitizeHTML-C6wbY_ne.js";const Z=({client:a,isLoading:h,isError:x})=>{var m,c,l,u;const o=!h&&!x,{control:g,register:j,handleSubmit:f,formState:{errors:r},reset:C,watch:t}=L({resolver:B(I)}),n={name:((m=a==null?void 0:a[0])==null?void 0:m.name)||"",description:((c=a==null?void 0:a[0])==null?void 0:c.description)||""},i=()=>{const s=t();return s.name===n.name&&(p(s.description)===""?"":s.description)===n.description};S.useEffect(()=>{o&&a&&a[0]&&C(n)},[o,a]);const{updateClient:d}=N(),b=async s=>{!o||i()||await d.mutateAsync({clientId:a[0].id,...s,description:p(s.description)===""?null:s.description}).then(()=>R("Cliente atualizado com sucesso!")).catch(()=>H("Erro ao atualizar cliente!"))};return e.jsxs(v,{elevation:1,children:[e.jsx(T,{title:"Detalhes",description:"Nome e descrição do cliente",icon:e.jsx(E,{})}),e.jsx("form",{onSubmit:f(b),children:e.jsxs(F,{sx:{padding:3,gap:2},children:[e.jsx(w,{isLoading:!o,LoadingComponent:e.jsx(z,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(D,{fullWidth:!0,children:e.jsx(P,{...j("name"),label:"Nome",error:!!r.name,helperText:(l=r.name)==null?void 0:l.message,InputLabelProps:{shrink:((u=t("name"))==null?void 0:u.length)>0}})})}),e.jsx(k,{name:"description",control:g,render:({field:s})=>e.jsx(M,{label:"Descrição",value:s.value,onChange:s.onChange,isLoading:!o})}),e.jsx(y,{sx:{marginLeft:"auto",marginTop:1},children:e.jsx(A,{loading:d.isPending,type:"submit",variant:"contained",disabled:!o||i(),children:"Atualizar Detalhes"})})]})})]})};export{Z as default};
