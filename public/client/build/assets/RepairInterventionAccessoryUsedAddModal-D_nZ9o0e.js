import{r as m,j as r,b2 as A,B as T,F as b,T as v,ab as E,s as R}from"./index-C9HasOiM.js";import{u as j,t as S}from"./index-BTi6rd4V.js";import{o as y}from"./repair-C13Y1Qe-.js";import{u as I}from"./useRepair-Cho1bqHB.js";import"./repair-DgMqRd6F.js";const M=({open:e,onClose:t})=>{var i;const{register:u,handleSubmit:d,formState:{errors:n},setError:f,reset:s}=j({resolver:S(y)}),o=m.useRef(null);m.useEffect(()=>{if(!e){s();return}const a=setTimeout(()=>{e&&o.current&&o.current.focus()},100);return()=>clearTimeout(a)},[e]);const{createNewInterventionAccessoryUsed:l}=I(),p=async a=>new Promise((x,c)=>{l.mutateAsync(a).then(()=>{t(),E("Acessório da intervenção adicionado com sucesso!"),s(),x()}).catch(h=>{if(h.error.code==="REP-019"){f("name",{type:"manual",message:"Nome já existente"}),c();return}t(),R("Erro ao adicionar acessório da intervenção!"),s(),c()})});return r.jsx(A,{mode:"form",title:"Adicionar Acessório da Intervenção",open:e,onClose:t,submitButtonText:"Adicionar Acessório da Intervenção",onSubmit:d(p),children:r.jsx(T,{sx:{padding:3},children:r.jsx(b,{fullWidth:!0,children:r.jsx(v,{...u("name"),label:"Nome",error:!!n.name,helperText:(i=n.name)==null?void 0:i.message,autoComplete:"off",inputRef:o})})})})};export{M as default};
