import{r as m,j as e,b2 as P,B as R,F as w,T as B,ab as z,s as M}from"./index-C9HasOiM.js";import{u as N,b as V,t as k}from"./index-BTi6rd4V.js";import{o as v}from"./repair-C13Y1Qe-.js";import{u as A}from"./useRepair-Cho1bqHB.js";import"./repair-DgMqRd6F.js";const y=({entryReportedIssue:r,open:t,onClose:a})=>{var l,c;const o=m.useRef(null);m.useEffect(()=>{if(!t)return;const i=setTimeout(()=>{t&&o.current&&o.current.focus()},100);return()=>clearTimeout(i)},[t]);const{control:f,register:p,handleSubmit:b,getValues:h,formState:{errors:n},setError:x,reset:s}=N({resolver:k(v)}),E={name:(r==null?void 0:r.name)||""},{isDirty:T}=V({control:f}),u=()=>!T;m.useEffect(()=>{r&&s(E)},[r]);const{updateEntryReportedIssue:g}=A(),S=async i=>{if(!u())return new Promise((j,d)=>{g.mutateAsync({entryReportedIssueId:r.id,...i}).then(()=>{a(),z("Problema reportado atualizado com sucesso!"),s(),j()}).catch(F=>{if(F.error.code==="REP-013"){x("name",{type:"manual",message:"Nome jÃ¡ existente"}),d();return}a(),M("Erro ao atualizar problema reportado!"),s(),d()})})};return e.jsx(P,{mode:"form",title:"Editar Problema Reportado",open:t,onClose:a,submitButtonText:"Editar Problema Reportado",onSubmit:b(S),disabled:u(),children:e.jsx(R,{sx:{padding:3},children:e.jsx(w,{fullWidth:!0,children:e.jsx(B,{...p("name"),label:"Nome",error:!!n.name,helperText:(l=n.name)==null?void 0:l.message,autoComplete:"off",inputRef:o,InputLabelProps:{shrink:((c=h("name"))==null?void 0:c.length)>0}})})})})};export{y as default};
