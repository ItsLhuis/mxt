import{r as m,j as r,a$ as E,S as j,bH as R,F as T,T as b,aj as g,s as C}from"./index-D5KQThVv.js";import{u as w,C as A,t as F}from"./index-DCkCG_3f.js";import{a as y}from"./repair-CEN5k9Q0.js";import{u as N}from"./useRepair-BQF6lWd4.js";import"./repair-DMHLqADZ.js";const H=({open:t,onClose:a})=>{var i;const{control:c,register:l,handleSubmit:d,formState:{errors:n},setError:f,reset:o}=w({resolver:F(y)}),s=m.useRef(null);m.useEffect(()=>{if(!t){o();return}const e=setTimeout(()=>{t&&s.current&&s.current.focus()},100);return()=>clearTimeout(e)},[t]);const{createNewRepairStatus:p}=N(),x=async e=>new Promise((h,u)=>{p.mutateAsync(e).then(()=>{a(),g("Estado adicionado com sucesso!"),o(),h()}).catch(S=>{if(S.error.code==="REP-007"){f("name",{type:"manual",message:"Nome jÃ¡ existente"}),u();return}a(),C("Erro ao adicionar estado!"),o(),u()})});return r.jsx(E,{mode:"form",title:"Adicionar Estado",open:t,onClose:a,submitButtonText:"Adicionar Estado",onSubmit:d(x),children:r.jsxs(j,{sx:{padding:3,gap:2},children:[r.jsx(A,{name:"color",control:c,defaultValue:"default",render:({field:e})=>r.jsx(R,{label:"Cor",selected:e.value,onChange:e.onChange})}),r.jsx(T,{fullWidth:!0,children:r.jsx(b,{...l("name"),label:"Nome",error:!!n.name,helperText:(i=n.name)==null?void 0:i.message,autoComplete:"off",inputRef:s})})]})})};export{H as default};
