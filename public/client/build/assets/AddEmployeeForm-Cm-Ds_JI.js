import{d as T,e as C,p as b,j as e,S as l,f as y,H as E,aA as F,F as t,T as m,ag as P,aM as I,ah as W,aV as k,aW as B,h as w,B as N,L as R,ak as U,s as L}from"./index-_NktdslD.js";import{u as V,C as z,t as M}from"./index-8QsUXVhp.js";import{e as D}from"./user-g_Xt_bPI.js";import{S as G}from"./Switch-7Nyh-1Sw.js";import"./isPossiblePhoneNumber-DES16dOz.js";const H=(d=16)=>{const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+~";let i="";for(let s=0,c=n.length;s<d;++s)i+=n.charAt(Math.floor(Math.random()*c));return i},X=()=>{var x,f,j,g;const d=T(),{role:n}=C(),{control:i,register:s,handleSubmit:c,setValue:v,formState:{errors:a},setError:u,watch:h}=V({resolver:M(D),defaultValues:{isActive:!0}}),A=()=>{const r=H();v("password",r)},{createNewUser:p}=b(),S=async r=>{await p.mutateAsync(r).then(()=>{d("/employee/list"),U("Funcionário adicionado com sucesso!")}).catch(o=>{o.error.code==="USR-001"?u("username",{type:"manual",message:"Nome de utilizador já existente"}):o.error.code==="USR-002"?u("email",{type:"manual",message:"E-mail já existente"}):L("Erro ao adicionar funcionário!")})};return e.jsx("form",{onSubmit:c(S),children:e.jsx(l,{sx:{marginTop:3,gap:3},children:e.jsxs(y,{elevation:1,children:[e.jsx(E,{title:"Detalhes",description:"Nome de utilizador, email, senha,... do funcionário",icon:e.jsx(F,{})}),e.jsxs(l,{sx:{padding:3,gap:2},children:[e.jsx(t,{fullWidth:!0,children:e.jsx(m,{...s("username"),label:"Nome de utilizador",error:!!a.username,helperText:(x=a.username)==null?void 0:x.message,autoComplete:"off"})}),e.jsx(t,{fullWidth:!0,children:e.jsx(m,{...s("email"),label:"E-mail",error:!!a.email,helperText:(f=a.email)==null?void 0:f.message,autoComplete:"off"})}),e.jsx(t,{fullWidth:!0,children:e.jsx(m,{...s("password"),label:"Senha",error:!!a.password,helperText:(j=a.password)==null?void 0:j.message,autoComplete:"off",InputLabelProps:{shrink:((g=h("password"))==null?void 0:g.length)>0},InputProps:{endAdornment:e.jsx(P,{position:"end",children:e.jsx(I,{title:"Gerar senha",children:e.jsx(W,{edge:"end",onClick:A,children:e.jsx(k,{})})})})}})}),e.jsx(t,{fullWidth:!0,children:e.jsx(z,{name:"role",control:i,defaultValue:"",render:({field:r})=>{var o;return e.jsx(B,{ref:r.ref,label:"Cargo",data:["",...n!=="Administrador"?["Administrador"]:[],"Funcionário"],value:r.value,onChange:r.onChange,error:!!a.role,helperText:(o=a.role)==null?void 0:o.message})}})}),e.jsx(t,{fullWidth:!0,children:e.jsxs(l,{sx:{flexDirection:"row",alignItems:"center"},children:[e.jsx(G,{...s("isActive"),defaultChecked:!0}),e.jsxs(l,{children:[e.jsx(w,{variant:"p",component:"p",children:"Estado da conta"}),e.jsx(w,{variant:"p",component:"p",sx:{color:"var(--outline)"},children:h("isActive")?"Ativa":"Inativa"})]})]})}),e.jsx(N,{sx:{marginLeft:"auto",marginTop:1},children:e.jsx(R,{loading:p.isPending,type:"submit",variant:"contained",children:"Adicionar Funcionário"})})]})]})})})};export{X as default};
