import{aL as o,j as e,G as Y,f as te,B as K,S as f,h as b,aM as oe,aG as se,aN as ie,aO as ne,aP as re,aQ as _,aR as ae,aS as h,aT as x,X as de,aU as ce,aV as le,aW as ge,aX as pe}from"./index-C9HasOiM.js";import{u as he}from"./Dashboard-C-DaCtnw.js";import"./client-CVPJ2IqU.js";import"./equipment-DQ8Bx2dX.js";import"./repair-DgMqRd6F.js";import"./email-C8Z12rKf.js";import"./Container-B2tOqq2a.js";const xe=()=>e.jsxs(f,{sx:{gap:1.3},children:[e.jsx(b,{variant:"h3",component:"h3",children:e.jsx(_,{width:60})}),e.jsxs(f,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(_,{variant:"rounded",width:70,height:32,sx:{borderRadius:2}}),e.jsx(_,{variant:"circular",width:17,height:17})]})]}),Z=({icon:g,title:c,metricQuery:l,chartQuery:p,colorLine:R,mdSize:E,lgSize:s})=>e.jsx(Y,{item:!0,xs:12,md:E,lg:s,children:e.jsx(te,{elevation:1,children:e.jsxs(K,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[e.jsxs(f,{sx:{flexDirection:"column",alignItems:"flex-start",gap:1,padding:3},children:[e.jsx(f,{sx:{justifyContent:"center",alignItems:"center",padding:1.5,borderRadius:2,backgroundColor:"var(--elevation-level3)"},children:g}),e.jsx(b,{variant:"p",component:"p",sx:{fontWeight:600,marginTop:1},children:c}),e.jsx(oe,{isLoading:l.isLoading,LoadingComponent:e.jsx(xe,{}),LoadedComponent:e.jsxs(f,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:1.5},children:[e.jsx(b,{variant:"h3",component:"h3",children:l.data.total}),e.jsxs(f,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(se,{label:l.data.percentage.change,color:l.data.percentage.color,sx:{marginTop:"auto"}}),e.jsx(ie,{title:"Comparado aos últimos dois meses completos"})]})]})})]}),e.jsx(K,{sx:{width:"100%",marginRight:3,display:p.isLoading&&"flex",justifyContent:"center"},children:p.isLoading?e.jsx(ne,{}):e.jsx(re,{colorLine:R,xData:p.data.xData,yData:[{name:c,data:p.data.yData}]})})]})})});Z.propTypes={icon:o.node.isRequired,title:o.string.isRequired,metricQuery:o.shape({isLoading:o.bool.isRequired,data:o.shape({total:o.oneOfType([o.number,o.string]).isRequired,percentage:o.shape({change:o.string.isRequired,color:o.string.isRequired}).isRequired}).isRequired}).isRequired,chartQuery:o.shape({isLoading:o.bool.isRequired,data:o.shape({xData:o.arrayOf(o.string.isRequired).isRequired,yData:o.arrayOf(o.number.isRequired).isRequired}).isRequired}).isRequired,colorLine:o.string.isRequired,mdSize:o.number,lgSize:o.number};const L=g=>{if(g===0)return"0,00 %";const c=parseFloat(g);return(c%1!==0?c.toFixed(2).replace(".",","):c.toFixed(0))+" %"},ue=()=>{var B,M,O,F,G,N,U,W,X,A,H,J;const{findEmployeeSummary:g,findClientSummary:c,findEquipmentSummary:l,findRepairSummary:p,findEmailSummary:R,findSmsSummary:E}=he(),{data:s,isLoading:u,isError:C}=g,{data:i,isLoading:q,isError:Q}=c,{data:n,isLoading:v,isError:T}=l,{data:r,isLoading:w,isError:I}=p,{data:a,isLoading:P,isError:z}=R,{data:d,isLoading:V,isError:k}=E,j=[{type:"employees",icon:e.jsx(ae,{}),title:"Utilizadores",colorLine:"rgb(248, 112, 96)",metricQuery:{isLoading:u||C,data:{total:h((s==null?void 0:s.total)||0),percentage:{change:L(s==null?void 0:s.percentage),color:(s==null?void 0:s.percentage)>0?"success":(s==null?void 0:s.percentage)===0?"default":"error"}}},chartQuery:{isLoading:u||C,data:{xData:((B=s==null?void 0:s.last_months_total)==null?void 0:B.map(t=>x(t.month)))||[],yData:((M=s==null?void 0:s.last_months_total)==null?void 0:M.map(t=>t.total))||[]}}},{type:"clients",icon:e.jsx(de,{}),title:"Clientes",colorLine:"rgb(92, 107, 192)",metricQuery:{isLoading:q||Q,data:{total:h((i==null?void 0:i.total)||0),percentage:{change:L(i==null?void 0:i.percentage),color:(i==null?void 0:i.percentage)>0?"success":(i==null?void 0:i.percentage)===0?"default":"error"}}},chartQuery:{isLoading:q||Q,data:{xData:((O=i==null?void 0:i.last_months_total)==null?void 0:O.map(t=>x(t.month)))||[],yData:((F=i==null?void 0:i.last_months_total)==null?void 0:F.map(t=>t.total))||[]}}},{type:"equipments",icon:e.jsx(ce,{}),title:"Equipamentos",colorLine:"rgb(139, 195, 74)",metricQuery:{isLoading:v||T,data:{total:h((n==null?void 0:n.total)||0),percentage:{change:L(n==null?void 0:n.percentage),color:(n==null?void 0:n.percentage)>0?"success":(n==null?void 0:n.percentage)===0?"default":"error"}}},chartQuery:{isLoading:v||T,data:{xData:((G=n==null?void 0:n.last_months_total)==null?void 0:G.map(t=>x(t.month)))||[],yData:((N=n==null?void 0:n.last_months_total)==null?void 0:N.map(t=>t.total))||[]}}},{type:"repairs",icon:e.jsx(le,{}),title:"Reparações",colorLine:"rgb(255, 152, 0)",metricQuery:{isLoading:w||I,data:{total:h((r==null?void 0:r.total)||0),percentage:{change:L(r==null?void 0:r.percentage),color:(r==null?void 0:r.percentage)>0?"success":(r==null?void 0:r.percentage)===0?"default":"error"}}},chartQuery:{isLoading:w||I,data:{xData:((U=r==null?void 0:r.last_months_total)==null?void 0:U.map(t=>x(t.month)))||[],yData:((W=r==null?void 0:r.last_months_total)==null?void 0:W.map(t=>t.total))||[]}}},{type:"emails",icon:e.jsx(ge,{}),title:"E-mails",colorLine:"rgb(33, 150, 243)",metricQuery:{isLoading:P||z,data:{total:h((a==null?void 0:a.total)||0),percentage:{change:L(a==null?void 0:a.percentage),color:(a==null?void 0:a.percentage)>0?"success":(a==null?void 0:a.percentage)===0?"default":"error"}}},chartQuery:{isLoading:P||z,data:{xData:((X=a==null?void 0:a.last_months_total)==null?void 0:X.map(t=>x(t.month)))||[],yData:((A=a==null?void 0:a.last_months_total)==null?void 0:A.map(t=>t.total))||[]}}},{type:"smses",icon:e.jsx(pe,{}),title:"SMS",colorLine:"rgb(255, 87, 34)",metricQuery:{isLoading:V||k,data:{total:h((d==null?void 0:d.total)||0),percentage:{change:L(d==null?void 0:d.percentage),color:(d==null?void 0:d.percentage)>0?"success":(d==null?void 0:d.percentage)===0?"default":"error"}}},chartQuery:{isLoading:V||k,data:{xData:((H=d==null?void 0:d.last_months_total)==null?void 0:H.map(t=>x(t.month)))||[],yData:((J=d==null?void 0:d.last_months_total)==null?void 0:J.map(t=>t.total))||[]}}}];return e.jsx(Y,{container:!0,spacing:3,children:j.map(({type:t,icon:$,title:y,colorLine:S,metricQuery:m,chartQuery:D},ee)=>e.jsx(Z,{icon:$,title:y,metricQuery:m,chartQuery:D,colorLine:S,mdSize:ee===j.length-1?j.length%2===0?6:12:6,lgSize:j.length>=3?4:j.length===1?12:6},t))})};export{ue as default};
