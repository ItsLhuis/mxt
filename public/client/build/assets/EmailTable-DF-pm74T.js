import{d as j,r as b,j as a,S as l,a8 as m,aN as h,h as d,aZ as f,a_ as v,a$ as g,aE as _,aF as C,aH as y,aj as E,f as L,B as T,aM as S,b1 as $,aC as D}from"./index-C9HasOiM.js";import{u as k}from"./useEmail-DBVYW-rH.js";import{V as A}from"./Visibility-B00d3i-B.js";import"./email-C8Z12rKf.js";const V=()=>{const r=j(),{findAllEmails:o}=k(),{data:p,isLoading:x}=o,u=b.useMemo(()=>[{id:"client.name",label:"Cliente",align:"left",sortable:!0,renderComponent:({row:e})=>{var t,i,n,s;return a.jsxs(l,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[a.jsx(m,{to:`/client/${(t=e==null?void 0:e.client)==null?void 0:t.id}`,children:(i=e==null?void 0:e.client)==null?void 0:i.name}),((n=e==null?void 0:e.client)==null?void 0:n.description)&&a.jsx(h,{fontSize:"small",title:(s=e==null?void 0:e.client)==null?void 0:s.description})]})}},{id:"to",label:"Para",align:"left",sortable:!0},{id:"subject",label:"Assunto",align:"left",sortable:!0,renderComponent:({row:e})=>a.jsx(m,{to:`/email/${e.id}`,children:e==null?void 0:e.subject})},{id:"sent_by_user",visible:!1},{id:"created_at_datetime",label:"Enviado por",align:"left",sortable:!0,renderComponent:({row:e})=>{var t,i,n,s,c;return a.jsx(a.Fragment,{children:a.jsxs(l,{sx:{flexDirection:"row",gap:2},children:[a.jsx(l,{sx:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:e!=null&&e.sent_by_user?a.jsxs(a.Fragment,{children:[a.jsx(f,{alt:(t=e==null?void 0:e.sent_by_user)==null?void 0:t.username,src:`${v}/users/${(i=e==null?void 0:e.sent_by_user)==null?void 0:i.id}/avatar?size=80`,name:(n=e==null?void 0:e.sent_by_user)==null?void 0:n.username}),a.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.jsx(d,{variant:"p",component:"p",fontWeight:500,children:(s=e==null?void 0:e.sent_by_user)==null?void 0:s.username}),a.jsx(d,{variant:"p",component:"p",color:"var(--outline)",children:(c=e==null?void 0:e.sent_by_user)==null?void 0:c.role})]})]}):a.jsx(d,{variant:"p",component:"p",color:"var(--outline)",children:"Utilizador removido"})}),a.jsx(g,{sx:{borderColor:"var(--elevation-level5)",borderWidth:1}}),a.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.jsx(d,{variant:"p",component:"p",fontWeight:500,children:_(e==null?void 0:e.created_at_datetime)}),a.jsx(d,{variant:"p",component:"p",color:"var(--outline)",children:C(e==null?void 0:e.created_at_datetime)})]})]})})}},{id:"view_file",align:"right",sortable:!1,renderComponent:({row:e})=>a.jsx(y,{title:"Ver e-email",sx:{margin:-1},children:a.jsx(E,{onClick:()=>r(`/email/${e.id}`),children:a.jsx(A,{})})})}],[]);return a.jsx(L,{elevation:1,children:a.jsx(T,{sx:{marginTop:3},children:a.jsx(S,{isLoading:x,LoadingComponent:a.jsx($,{mode:"datatable"}),LoadedComponent:a.jsx(D,{mode:"datatable",data:p??[],columns:u})})})})};export{V as default};
