import{S as f,X as j,r as C,b as S,j as a,Z as l,az as b,B as c,aw as v,ao as w,$ as A,a7 as E,aD as y,a2 as z,a3 as B,a9 as L,a4 as R}from"./index-DjYwzy8o.js";import{f as k}from"./user-B-uUes6W.js";const D=({user:o,isUserFinished:n})=>{const{role:d}=f(),{control:m,handleSubmit:u,formState:{errors:r},watch:x,reset:g}=j({resolver:B(k)}),h={role:(o==null?void 0:o.user.role)||""},s=()=>x().role===(o==null?void 0:o.user.role);C.useEffect(()=>{n&&o&&g(h)},[n,o]);const{updateUserRole:i}=S(),p=async e=>{var t;s()||i.mutateAsync({userId:(t=o==null?void 0:o.user)==null?void 0:t.id,...e}).then(()=>L("Cargo atualizado com sucesso!")).catch(()=>R("Erro ao atualizar cargo!"))};return a.jsxs(l,{sx:{paddingBottom:2},children:[a.jsx(b,{title:"Cargo",description:"Atualizar cargo do funcionário"}),a.jsx("form",{onSubmit:u(p),children:a.jsxs(l,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingBlock:1},children:[a.jsx(c,{sx:{minWidth:90,marginInline:3},children:a.jsx(v,{isLoading:!n,LoadingComponent:a.jsx(w,{variant:"rounded",width:"100%",height:52}),LoadedComponent:a.jsx(A,{fullWidth:!0,children:a.jsx(E,{name:"role",control:m,defaultValue:"",render:({field:e})=>{var t;return a.jsx(y,{ref:e.ref,label:"Cargo",data:["",...d!=="Administrador"?["Administrador"]:[],"Funcionário"],value:e.value,onChange:e.onChange,error:!!r.role,helperText:(t=r.role)==null?void 0:t.message})}})})})}),a.jsx(c,{sx:{paddingRight:3},children:a.jsx(z,{loading:i.isPending,type:"submit",variant:"contained",disabled:!n||s(),children:"Atualizar Cargo"})})]})})]})};export{D as default};
