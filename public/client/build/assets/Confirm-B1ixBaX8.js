import{a9 as g,d as S,r as v,j as s,B as m,h as r,S as a,m as P,a7 as y,F as l,T as h,a8 as C,L as b,ab as E,s as R}from"./index-C9HasOiM.js";import{u as T,t as B}from"./index-BTi6rd4V.js";import{d as A}from"./user-C-rtefft.js";import{u as F}from"./useAuth-DWH3zGKf.js";import"./isPossiblePhoneNumber-C2Df4Gz7.js";const W=()=>{var i,c;const{token:u}=g(),p=S(),{register:o,handleSubmit:x,formState:{errors:e}}=T({resolver:B(A)}),[t,f]=v.useState(""),{confirmResetPassword:n}=F(),w=async j=>{await n.mutateAsync({token:u,...j}).then(()=>{E("Senha alterada com sucesso!"),p("/auth/login")}).catch(d=>{if(d.error.code==="USR-013"||d.error.code==="USR-014"){f("O código foi usado ou expirado!");return}R("Erro ao alterar senha!")})};return s.jsxs(m,{children:[s.jsx(r,{variant:"h3",component:"h3",sx:{marginBottom:4,fontSize:"2.5rem !important"},children:"Mixtech"}),s.jsx(a,{sx:{gap:2,marginBottom:4},children:s.jsxs(a,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[s.jsx(r,{variant:"h4",component:"h4",children:"Esqueceu a sua senha?"}),s.jsx(r,{variant:"p",component:"p",children:"Crie uma nova senha de sua preferência!"})]})}),t&&s.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:s.jsx(m,{sx:{marginBottom:6},children:s.jsx(y,{severity:"error",elevation:1,children:t})})}),s.jsx("form",{onSubmit:x(w),children:s.jsxs(a,{sx:{gap:2},children:[s.jsx(l,{fullWidth:!0,children:s.jsx(h,{...o("newPassword"),type:"password",label:"Senha",error:!!e.newPassword,helperText:(i=e.newPassword)==null?void 0:i.message,autoComplete:"new-password"})}),s.jsx(l,{fullWidth:!0,children:s.jsx(h,{...o("confirmPassword"),type:"password",label:"Confirmar senha",error:!!e.confirmPassword,helperText:(c=e.confirmPassword)==null?void 0:c.message,autoComplete:"confirm-new-password"})}),s.jsx(C,{to:"/auth/login",style:{alignSelf:"flex-end",fontSize:"13px"},children:"Iniciar sessão"}),s.jsx(b,{loading:n.isPending,type:"submit",variant:"contained",children:"Atualizar Senha"})]})})]})};export{W as default};
