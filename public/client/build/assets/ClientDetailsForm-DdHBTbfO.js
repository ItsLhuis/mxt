import{r as S,j as e,f as L,H as F,X as v,S as E,aM as T,aQ as D,F as w,T as y,bc as P,B as k,L as z,ab as B,s as A}from"./index-C9HasOiM.js";import{u as H,b as I,C as N,t as R}from"./index-BTi6rd4V.js";import{c as V}from"./client-Dy9TJCig.js";import{u as M}from"./useClient-C9FOb7yq.js";import"./isPossiblePhoneNumber-C2Df4Gz7.js";import"./client-CVPJ2IqU.js";const J=({client:s,isLoading:u,isError:p})=>{var d,m,l,c;const o=!u&&!p,{control:t,register:h,handleSubmit:x,getValues:g,formState:{errors:r},reset:f}=H({resolver:R(V)}),j={name:((d=s==null?void 0:s[0])==null?void 0:d.name)||"",description:((m=s==null?void 0:s[0])==null?void 0:m.description)||""},{isDirty:C}=I({control:t}),n=()=>!C;S.useEffect(()=>{o&&s&&s[0]&&f(j)},[o,s]);const{updateClient:i}=M(),b=async a=>{!o||n()||await i.mutateAsync({clientId:s[0].id,...a,description:a.description===""?null:a.description}).then(()=>B("Cliente atualizado com sucesso!")).catch(()=>A("Erro ao atualizar cliente!"))};return e.jsxs(L,{elevation:1,children:[e.jsx(F,{title:"Detalhes",description:"Nome e descrição do cliente",icon:e.jsx(v,{})}),e.jsx("form",{onSubmit:x(b),children:e.jsxs(E,{sx:{padding:3,gap:2},children:[e.jsx(T,{isLoading:!o,LoadingComponent:e.jsx(D,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(w,{fullWidth:!0,children:e.jsx(y,{...h("name"),label:"Nome",error:!!r.name,helperText:(l=r.name)==null?void 0:l.message,autoComplete:"off",InputLabelProps:{shrink:((c=g("name"))==null?void 0:c.length)>0}})})}),e.jsx(N,{name:"description",control:t,render:({field:a})=>e.jsx(P,{label:"Descrição",value:a.value,onChange:a.onChange,isLoading:!o})}),e.jsx(k,{sx:{marginLeft:"auto",marginTop:1},children:e.jsx(z,{loading:i.isPending,type:"submit",variant:"contained",disabled:!o||n(),children:"Atualizar Detalhes"})})]})})]})};export{J as default};
