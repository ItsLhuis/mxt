import{r as _,j as a,a7 as D,aO as S,bb as m,h as n,S as s,b9 as E,aV as f,aW as b,aE as h,aM as j,aN as v,aY as c,f as F,H as T,aB as $,aZ as R,a_ as W,B as z,aK as L}from"./index-D5KQThVv.js";import{g as M}from"./getValidChipColor-D8WVyITM.js";import{C as O}from"./Check-DbIOJz_f.js";const I=({equipment:t,isLoading:u,isError:g})=>{const p=!u&&!g,y=_.useMemo(()=>[{id:"status.name",label:"Estado",align:"left",sortable:!0,renderComponent:({row:e})=>{var i,l;return a.jsx(D,{to:`/repair/${e==null?void 0:e.id}`,children:a.jsx(S,{label:(i=e==null?void 0:e.status)==null?void 0:i.name,color:M((l=e==null?void 0:e.status)==null?void 0:l.color)})})}},{id:"entry_datetime",label:"Data de entrada",align:"left",sortable:!0,renderComponent:({row:e})=>a.jsx(a.Fragment,{children:e!=null&&e.entry_datetime?a.jsx(a.Fragment,{children:m(e==null?void 0:e.entry_datetime)}):a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Sem valor"})})},{id:"conclusion_datetime",label:"Data de conclusão",align:"left",sortable:!0,renderComponent:({row:e})=>a.jsx(a.Fragment,{children:e!=null&&e.conclusion_datetime?a.jsx(a.Fragment,{children:m(e==null?void 0:e.conclusion_datetime)}):a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Sem valor"})})},{id:"delivery_datetime",label:"Data de entrega",align:"left",sortable:!0,renderComponent:({row:e})=>a.jsx(a.Fragment,{children:e!=null&&e.delivery_datetime?a.jsx(a.Fragment,{children:m(e==null?void 0:e.delivery_datetime)}):a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Sem valor"})})},{id:"is_client_notified",label:"Cliente notificado",align:"left",sortable:!0,renderComponent:({row:e})=>a.jsx(s,{sx:{alignItems:"flex-start"},children:e!=null&&e.is_client_notified?a.jsx(O,{color:"success"}):a.jsx(E,{color:"error"})})},{id:"created_by_user",visible:!1},{id:"created_at_datetime",label:"Criado por",align:"left",sortable:!0,renderComponent:({row:e})=>{var i,l,d,r,o;return a.jsx(a.Fragment,{children:a.jsxs(s,{sx:{flexDirection:"row",gap:2},children:[a.jsx(s,{sx:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:e!=null&&e.created_by_user?a.jsxs(a.Fragment,{children:[a.jsx(f,{alt:(i=e==null?void 0:e.created_by_user)==null?void 0:i.username,src:`${b}/users/${(l=e==null?void 0:e.created_by_user)==null?void 0:l.id}/avatar?size=80`,name:(d=e==null?void 0:e.created_by_user)==null?void 0:d.username}),a.jsxs(s,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.jsx(n,{variant:"p",component:"p",fontWeight:500,children:(r=e==null?void 0:e.created_by_user)==null?void 0:r.username}),a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:(o=e==null?void 0:e.created_by_user)==null?void 0:o.role})]})]}):a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Utilizador removido"})}),a.jsx(h,{sx:{borderColor:"var(--elevation-level5)",borderWidth:1}}),a.jsxs(s,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.jsx(n,{variant:"p",component:"p",fontWeight:500,children:j(e==null?void 0:e.created_at_datetime)}),a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:v(e==null?void 0:e.created_at_datetime)})]})]})})}},{id:"last_modified_by_user",visible:!1},{id:"last_modified_datetime",label:"Modificado pela última vez por",align:"left",sortable:!0,renderComponent:({row:e})=>{var i,l,d,r,o;return a.jsx(a.Fragment,{children:e!=null&&e.last_modified_datetime?a.jsxs(s,{sx:{flexDirection:"row",gap:2},children:[a.jsx(s,{sx:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:e!=null&&e.last_modified_by_user?a.jsxs(a.Fragment,{children:[a.jsx(f,{alt:(i=e==null?void 0:e.last_modified_by_user)==null?void 0:i.username,src:`${b}/users/${(l=e==null?void 0:e.last_modified_by_user)==null?void 0:l.id}/avatar?size=80`,name:(d=e==null?void 0:e.last_modified_by_user)==null?void 0:d.username}),a.jsxs(s,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.jsx(n,{variant:"p",component:"p",fontWeight:500,children:(r=e==null?void 0:e.last_modified_by_user)==null?void 0:r.username}),a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:(o=e==null?void 0:e.last_modified_by_user)==null?void 0:o.role})]})]}):a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Utilizador removido"})}),a.jsx(h,{sx:{borderColor:"var(--elevation-level5)",borderWidth:1}}),a.jsxs(s,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.jsx(n,{variant:"p",component:"p",fontWeight:500,children:j(e==null?void 0:e.last_modified_datetime)}),a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:v(e==null?void 0:e.last_modified_datetime)})]})]}):a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Ainda não foi modificado"})})}}],[]),C=_.useMemo(()=>[{id:"client",label:"Cliente",formatter:()=>{var e,i;return(i=(e=t==null?void 0:t[0])==null?void 0:e.client)==null?void 0:i.name}},{id:"equipment",label:"Equipamento",formatter:()=>{var e,i,l,d,r,o,x;return`${(i=(e=t==null?void 0:t[0])==null?void 0:e.type)==null?void 0:i.name} - ${(d=(l=t==null?void 0:t[0])==null?void 0:l.brand)==null?void 0:d.name} ${(o=(r=t==null?void 0:t[0])==null?void 0:r.model)==null?void 0:o.name} (${(x=t==null?void 0:t[0])==null?void 0:x.sn})`}},{id:"status",label:"Estado",formatter:e=>e==null?void 0:e.name,color:e=>e==null?void 0:e.color},{id:"entry_datetime",label:"Data de entrada",formatter:e=>e?c(e):""},{id:"conclusion_datetime",label:"Data de conclusão",formatter:e=>e?c(e):""},{id:"delivery_datetime",label:"Data de entrega",formatter:e=>e?c(e):""},{id:"is_client_notified",label:"Cliente notificado",formatter:e=>e===!0?"Sim":"Não"},{id:"created_by_user.username",label:"Criado por"},{id:"created_at_datetime",label:"Data de criação",formatter:e=>e?c(e):""},{id:"last_modified_by_user.username",label:"Modificado pela última vez por"},{id:"last_modified_datetime",label:"Última data de modificação",formatter:e=>e?c(e):""}],[t]);return a.jsxs(F,{elevation:1,children:[a.jsx(T,{title:"Reparações",description:"Reparações do equipamento",icon:a.jsx($,{})}),a.jsx(R,{isLoading:!p,LoadingComponent:a.jsx(W,{mode:"datatable"}),LoadedComponent:a.jsx(z,{sx:{margin:3,border:"1px solid var(--elevation-level5)",borderRadius:2,overflow:"hidden"},children:a.jsx(L,{mode:"datatable",data:p?t[0].repairs:[],columns:y,exportFileName:"reparacoes_equipamento",exportColumns:C})})})]})};export{I as default};
