import{X as g,r as v,j as e,B as d,Y as s,Z as t,m as S,$ as w,a0 as m,a1 as u,a2 as y,a3 as B,a4 as b}from"./index-BzXGUPkY.js";import{a as E}from"./user-BY9cR1Va.js";import{u as z}from"./useAuth-j6m3uyl_.js";const A=()=>{var l,c;const{register:a,handleSubmit:h,setFocus:p,formState:{errors:r}}=g({resolver:b(E)}),[o,n]=v.useState(""),{login:i}=z(),x=async j=>{await i.mutateAsync(j).catch(f=>{if(f.error.code==="USR-004"){n("Esta conta foi desativada. Por favor, entre em contacto com o suporte!");return}p("username"),n("Nome de utilizador ou senha inválidos!")})};return e.jsxs(d,{children:[e.jsx(s,{variant:"h3",component:"h3",sx:{marginBottom:4,fontSize:"2.5rem !important"},children:"Mixtech"}),e.jsx(t,{sx:{gap:2,marginBottom:4},children:e.jsxs(t,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(s,{variant:"h4",component:"h4",children:"Iniciar Sessão"}),e.jsx(s,{variant:"p",component:"p",children:"Bem vindo de volta!"})]})}),o&&e.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:e.jsx(d,{sx:{marginBottom:6},children:e.jsx(w,{severity:"error",elevation:1,children:o})})}),e.jsx("form",{onSubmit:h(x),children:e.jsxs(t,{sx:{gap:2},children:[e.jsx(m,{fullWidth:!0,children:e.jsx(u,{...a("username"),label:"Nome de utilizador",error:!!r.username,helperText:(l=r.username)==null?void 0:l.message,autoComplete:"username"})}),e.jsx(m,{fullWidth:!0,children:e.jsx(u,{...a("password"),type:"password",label:"Senha",error:!!r.password,helperText:(c=r.password)==null?void 0:c.message,autoComplete:"current-password"})}),e.jsx(y,{to:"/auth/resetPassword/request",style:{alignSelf:"flex-end",fontSize:"13px"},children:"Esqueceu a sua senha?"}),e.jsx(B,{loading:i.isPending,type:"submit",variant:"contained",children:"Iniciar Sessão"})]})})]})};export{A as default};
