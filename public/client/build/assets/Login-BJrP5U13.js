import{r as g,j as e,B as c,h as t,S as o,m as S,a6 as v,F as d,T as u,a7 as w,L as y}from"./index-QasZhORg.js";import{u as B,t as b}from"./index-CO9l3Whn.js";import{a as E}from"./user-COS_93bu.js";import{u as F}from"./useAuth-DC4W0cRY.js";import"./isPossiblePhoneNumber-DES16dOz.js";const P=()=>{var l,m;const{register:s,handleSubmit:h,setFocus:p,formState:{errors:r}}=B({resolver:b(E)}),[a,n]=g.useState(""),{login:i}=F(),x=async j=>{await i.mutateAsync(j).catch(f=>{if(f.error.code==="USR-004"){n("Esta conta foi desativada. Por favor, entre em contacto com o suporte!");return}p("username"),n("Nome de utilizador ou senha inválidos!")})};return e.jsxs(c,{children:[e.jsx(t,{variant:"h3",component:"h3",sx:{marginBottom:4,fontSize:"2.5rem !important"},children:"Mixtech"}),e.jsx(o,{sx:{gap:2,marginBottom:4},children:e.jsxs(o,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(t,{variant:"h4",component:"h4",children:"Iniciar Sessão"}),e.jsx(t,{variant:"p",component:"p",children:"Bem vindo de volta!"})]})}),a&&e.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:e.jsx(c,{sx:{marginBottom:6},children:e.jsx(v,{severity:"error",elevation:1,children:a})})}),e.jsx("form",{onSubmit:h(x),children:e.jsxs(o,{sx:{gap:2},children:[e.jsx(d,{fullWidth:!0,children:e.jsx(u,{...s("username"),label:"Nome de utilizador",error:!!r.username,helperText:(l=r.username)==null?void 0:l.message,autoComplete:"username"})}),e.jsx(d,{fullWidth:!0,children:e.jsx(u,{...s("password"),type:"password",label:"Senha",error:!!r.password,helperText:(m=r.password)==null?void 0:m.message,autoComplete:"current-password"})}),e.jsx(w,{to:"/auth/resetPassword/request",style:{alignSelf:"flex-end",fontSize:"13px"},children:"Esqueceu a sua senha?"}),e.jsx(y,{loading:i.isPending,type:"submit",variant:"contained",children:"Iniciar Sessão"})]})})]})};export{P as default};
