import{r as u,j as r,b2 as h,B as R,F as E,T,ab as j,s as S}from"./index-C9HasOiM.js";import{u as y,t as P}from"./index-BTi6rd4V.js";import{o as g}from"./repair-C13Y1Qe-.js";import{u as w}from"./useRepair-Cho1bqHB.js";import"./repair-DgMqRd6F.js";const M=({open:e,onClose:t})=>{var n;const{register:c,handleSubmit:d,formState:{errors:m},setError:l,reset:o}=y({resolver:P(g)}),s=u.useRef(null);u.useEffect(()=>{if(!e){o();return}const a=setTimeout(()=>{e&&s.current&&s.current.focus()},100);return()=>clearTimeout(a)},[e]);const{createNewEntryReportedIssue:p}=w(),f=async a=>new Promise((x,i)=>{p.mutateAsync(a).then(()=>{t(),j("Problema reportado adicionado com sucesso!"),o(),x()}).catch(b=>{if(b.error.code==="REP-013"){l("name",{type:"manual",message:"Nome jรก existente"}),i();return}t(),S("Erro ao adicionar problema reportado!"),o(),i()})});return r.jsx(h,{mode:"form",title:"Adicionar Problema Reportado",open:e,onClose:t,submitButtonText:"Adicionar Problema Reportado",onSubmit:d(f),children:r.jsx(R,{sx:{padding:3},children:r.jsx(E,{fullWidth:!0,children:r.jsx(T,{...c("name"),label:"Nome",error:!!m.name,helperText:(n=m.name)==null?void 0:n.message,autoComplete:"off",inputRef:s})})})})};export{M as default};
