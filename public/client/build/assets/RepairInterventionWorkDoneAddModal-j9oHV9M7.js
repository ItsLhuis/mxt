import{r as u,j as r,aT as T,B as b,F as R,T as j,aj as E,s as S}from"./index-mWc9gLhA.js";import{u as g,t as w}from"./index-COzNbWAj.js";import{o as z}from"./repair-D-n4dckQ.js";import{u as A}from"./useRepair-BcwC0uik.js";const I=({open:e,onClose:o})=>{var i;const{register:c,handleSubmit:l,formState:{errors:n},setError:d,reset:t}=g({resolver:w(z)}),a=u.useRef(null);u.useEffect(()=>{if(!e){t();return}const s=setTimeout(()=>{e&&a.current&&a.current.focus()},100);return()=>clearTimeout(s)},[e]);const{createNewInterventionWorkDone:f}=A(),h=async s=>new Promise((x,m)=>{f.mutateAsync(s).then(()=>{o(),E("Trabalho realizado adicionado com sucesso!"),t(),x()}).catch(p=>{if(p.error.code==="REP-016"){d("name",{type:"manual",message:"Nome jรก existente"}),m();return}o(),S("Erro ao adicionar trabalho realizado!"),t(),m()})});return r.jsx(T,{mode:"form",title:"Adicionar Trabalho Realizado",open:e,onClose:o,submitButtonText:"Adicionar Trabalho Realizado",onSubmit:l(h),children:r.jsx(b,{sx:{padding:3},children:r.jsx(R,{fullWidth:!0,children:r.jsx(j,{...c("name"),label:"Nome",error:!!n.name,helperText:(i=n.name)==null?void 0:i.message,autoComplete:"off",inputRef:a})})})})};export{I as default};
