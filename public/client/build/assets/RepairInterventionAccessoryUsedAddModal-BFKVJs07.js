import{r as m,j as r,aU as A,B as T,F as v,T as E,ak as R,s as j}from"./index-_NktdslD.js";import{u as S,t as b}from"./index-8QsUXVhp.js";import{o as y}from"./repair-j_MUsWAD.js";import{u as I}from"./useRepair-MRRzMLfz.js";const N=({open:e,onClose:t})=>{var i;const{register:u,handleSubmit:d,formState:{errors:n},setError:f,reset:s}=S({resolver:b(y)}),o=m.useRef(null);m.useEffect(()=>{if(!e){s();return}const a=setTimeout(()=>{e&&o.current&&o.current.focus()},100);return()=>clearTimeout(a)},[e]);const{createNewInterventionAccessoryUsed:l}=I(),x=async a=>new Promise((p,c)=>{l.mutateAsync(a).then(()=>{t(),R("Acessório da intervenção adicionado com sucesso!"),s(),p()}).catch(h=>{if(h.error.code==="REP-019"){f("name",{type:"manual",message:"Nome já existente"}),c();return}t(),j("Erro ao adicionar acessório da intervenção!"),s(),c()})});return r.jsx(A,{mode:"form",title:"Adicionar Acessório da Intervenção",open:e,onClose:t,submitButtonText:"Adicionar Acessório da Intervenção",onSubmit:d(x),children:r.jsx(T,{sx:{padding:3},children:r.jsx(v,{fullWidth:!0,children:r.jsx(E,{...u("name"),label:"Nome",error:!!n.name,helperText:(i=n.name)==null?void 0:i.message,autoComplete:"off",inputRef:o})})})})};export{N as default};
