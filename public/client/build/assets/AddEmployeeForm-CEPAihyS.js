import{d as b,e as T,q as C,j as e,S as l,f as y,H as E,aR as F,F as t,T as m,ai as P,aH as I,aj as R,b3 as B,b4 as N,h as w,B as U,L as W,ab as k,s as L}from"./index-C9HasOiM.js";import{u as z,C as H,t as V}from"./index-BTi6rd4V.js";import{e as D}from"./user-C-rtefft.js";import{S as G}from"./Switch-Bq2ajAyO.js";import"./isPossiblePhoneNumber-C2Df4Gz7.js";const M=(d=16)=>{const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+~";let i="";for(let a=0,c=n.length;a<d;++a)i+=n.charAt(Math.floor(Math.random()*c));return i},X=()=>{var x,j,f,g;const d=b(),{role:n}=T(),{control:i,register:a,handleSubmit:c,setValue:v,formState:{errors:s},setError:u,watch:h}=z({resolver:V(D),defaultValues:{isActive:!0}}),S=()=>{const r=M();v("password",r)},{createNewUser:p}=C(),A=async r=>{await p.mutateAsync(r).then(()=>{d("/employee/list"),k("Funcionário adicionado com sucesso!")}).catch(o=>{o.error.code==="USR-001"?u("username",{type:"manual",message:"Nome de utilizador já existente"}):o.error.code==="USR-002"?u("email",{type:"manual",message:"E-mail já existente"}):L("Erro ao adicionar funcionário!")})};return e.jsx("form",{onSubmit:c(A),children:e.jsx(l,{sx:{marginTop:3,gap:3},children:e.jsxs(y,{elevation:1,children:[e.jsx(E,{title:"Detalhes",description:"Nome de utilizador, email, senha,... do funcionário",icon:e.jsx(F,{})}),e.jsxs(l,{sx:{padding:3,gap:2},children:[e.jsx(t,{fullWidth:!0,children:e.jsx(m,{...a("username"),label:"Nome de utilizador",error:!!s.username,helperText:(x=s.username)==null?void 0:x.message,autoComplete:"off"})}),e.jsx(t,{fullWidth:!0,children:e.jsx(m,{...a("email"),label:"E-mail",error:!!s.email,helperText:(j=s.email)==null?void 0:j.message,autoComplete:"off"})}),e.jsx(t,{fullWidth:!0,children:e.jsx(m,{...a("password"),label:"Senha",error:!!s.password,helperText:(f=s.password)==null?void 0:f.message,autoComplete:"off",InputLabelProps:{shrink:((g=h("password"))==null?void 0:g.length)>0},InputProps:{endAdornment:e.jsx(P,{position:"end",children:e.jsx(I,{title:"Gerar senha",children:e.jsx(R,{edge:"end",onClick:S,children:e.jsx(B,{})})})})}})}),e.jsx(t,{fullWidth:!0,children:e.jsx(H,{name:"role",control:i,defaultValue:"",render:({field:r})=>{var o;return e.jsx(N,{ref:r.ref,label:"Cargo",data:["",...n!=="Administrador"?["Administrador"]:[],"Funcionário"],value:r.value,onChange:r.onChange,error:!!s.role,helperText:(o=s.role)==null?void 0:o.message})}})}),e.jsx(t,{fullWidth:!0,children:e.jsxs(l,{sx:{flexDirection:"row",alignItems:"center"},children:[e.jsx(G,{...a("isActive"),defaultChecked:!0}),e.jsxs(l,{children:[e.jsx(w,{variant:"p",component:"p",children:"Estado da conta"}),e.jsx(w,{variant:"p",component:"p",sx:{color:"var(--outline)"},children:h("isActive")?"Ativa":"Inativa"})]})]})}),e.jsx(U,{sx:{marginLeft:"auto",marginTop:1},children:e.jsx(W,{loading:p.isPending,type:"submit",variant:"contained",children:"Adicionar Funcionário"})})]})]})})})};export{X as default};
