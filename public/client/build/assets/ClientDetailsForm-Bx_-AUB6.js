import{d as S,r as b,j as e,a as v,ay as E,a5 as F,S as w,az as z,an as T,f as y,g as B,C as D,B as P,L as k,t as R,s as A,aB as H}from"./index-CeqpX1Nb.js";import{c as I}from"./client-CvQStxuO.js";import{u as N}from"./useClient-BnfOapIz.js";import{R as M,s as h}from"./sanitizeHTML-DKq6pAo9.js";const G=({client:s,isLoading:p,isError:x})=>{var c,l,m,u;const o=!p&&!x,{control:g,register:j,handleSubmit:f,formState:{errors:t},reset:C,watch:r}=S({resolver:R(I)}),n={name:((c=s==null?void 0:s[0])==null?void 0:c.name)||"",description:((l=s==null?void 0:s[0])==null?void 0:l.description)||""},i=()=>{const a=r();return a.name===n.name&&(h(a.description)===""?"":a.description)===n.description};b.useEffect(()=>{o&&s&&s[0]&&C(n)},[o,s]);const{updateClient:d}=N(),L=async a=>{!o||i()||await d.mutateAsync({clientId:s[0].id,...a,description:h(a.description)===""?null:a.description}).then(()=>A("Cliente atualizado com sucesso!")).catch(()=>H("Erro ao atualizar cliente!"))};return e.jsxs(v,{elevation:1,children:[e.jsx(E,{title:"Detalhes",description:"Nome e descrição do cliente",icon:e.jsx(F,{})}),e.jsx("form",{onSubmit:f(L),children:e.jsxs(w,{sx:{padding:3,gap:3},children:[e.jsx(z,{isLoading:!o,LoadingComponent:e.jsx(T,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(y,{fullWidth:!0,children:e.jsx(B,{...j("name"),label:"Nome",error:!!t.name,helperText:(m=t.name)==null?void 0:m.message,InputLabelProps:{shrink:((u=r("name"))==null?void 0:u.length)>0}})})}),e.jsx(D,{name:"description",control:g,render:({field:a})=>e.jsx(M,{label:"Descrição",value:a.value,onChange:a.onChange,isLoading:!o})}),e.jsx(P,{sx:{marginLeft:"auto"},children:e.jsx(k,{loading:d.isPending,type:"submit",variant:"contained",disabled:!o||i(),children:"Atualizar Detalhes"})})]})})]})};export{G as default};
