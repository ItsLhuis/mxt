import{q as T,j as e,r as x,f as F,H as k,S as f,aR as B,a$ as w,F as A,T as H,ag as O,aM as D,ah as P,b9 as U,B as z,L as R,aU as V,ba as W,h as $,b0 as q}from"./index-_NktdslD.js";import{u as G,b as J,t as K}from"./index-8QsUXVhp.js";import{c as N}from"./equipment-DMqeKo_-.js";import{u as Q}from"./useClient-B8aLe1Fc.js";import{u as X}from"./useEquipment-Dy7ZmQ0L.js";const Y=T(e.jsx("path",{d:"M3 13c0-2.45 1.76-4.47 4.08-4.91l-1.49 1.5L7 11l4-4.01L7 3 5.59 4.41l1.58 1.58v.06C3.7 6.46 1 9.42 1 13c0 3.87 3.13 7 7 7h3v-2H8c-2.76 0-5-2.24-5-5m10 0v7h9v-7zm7 5h-5v-3h5zM13 4h9v7h-9z"}),"MoveUp"),oe=({equipment:n,isLoading:g,isError:j})=>{var u,m,h;const a=!g&&!j,{control:v,handleSubmit:C,setValue:b,getValues:Z,formState:{errors:s},reset:S}=G({resolver:K(N)}),[i,o]=x.useState({isOpen:!1,client:{id:null,name:""}}),l=()=>{o(t=>({...t,isOpen:!0}))},y=()=>{o(t=>({...t,isOpen:!1}))},I=(t,r)=>{o({client:{id:t,name:r}}),b("clientId",t,{shouldDirty:!0})},L={clientId:((m=(u=n==null?void 0:n[0])==null?void 0:u.client)==null?void 0:m.id)||""},{isDirty:M}=J({control:v}),c=()=>!M;x.useEffect(()=>{a&&n&&n[0]&&(o({client:{id:n[0].client.id,name:n[0].client.name}}),S(L))},[a,n]);const{findAllClients:d}=Q(),{transferEquipment:p}=X(),E=async t=>{!a||c()||await p.mutateAsync({equipmentId:n[0].id,...t})};return e.jsxs(F,{elevation:1,children:[e.jsx(k,{title:"Transferir",description:"Mudar cliente do equipamento",icon:e.jsx(Y,{})}),e.jsx("form",{onSubmit:C(E),children:e.jsxs(f,{sx:{padding:3,gap:2},children:[e.jsx(B,{isLoading:!a,LoadingComponent:e.jsx(w,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(A,{fullWidth:!0,children:e.jsx(H,{label:"Cliente",placeholder:"Selecione um cliente",value:i.client.name,onClick:l,InputProps:{readOnly:!0,startAdornment:e.jsx(O,{position:"start",children:e.jsx(D,{children:e.jsx(P,{onClick:l,children:e.jsx(U,{})})})})},error:!!s.clientId,helperText:(h=s.clientId)==null?void 0:h.message})})}),e.jsx(z,{sx:{marginLeft:"auto",marginTop:1},children:e.jsx(R,{loading:p.isPending,type:"submit",variant:"contained",color:"error",disabled:!a||c(),children:"Transferir Equipamento"})})]})}),e.jsx(V,{open:i.isOpen??!1,onClose:y,mode:"data",data:d.data??[],isLoading:d.isLoading,title:"Clientes",placeholder:"Pesquise por um cliente",buttonStructure:(t,r)=>e.jsx(W,{variant:"contained",color:"secondary",sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",padding:"16px !important",width:"100%",minHeight:"unset !important",border:2,borderColor:t.id===i.client.id?"var(--primary)":"var(--elevation-level3)",borderRadius:2,color:"var(--onSurface)",lineHeight:1.5,fontWeight:400,"&:hover":{borderColor:"var(--primary)"}},onClick:()=>{I(t.id,t.name),r()},children:e.jsxs(f,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx($,{variant:"p",component:"p",sx:{wordBreak:"break-all",textAlign:"start"},children:t.name}),t.description&&e.jsx(q,{title:t.description})]})})})]})};export{oe as default};
