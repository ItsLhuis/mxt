import{d as g,r,j as a,S as l,a7 as c,b0 as j,h as d,aF as v,aG as _,aI as C,aJ as S,aK as y,aM as T,ah as E,aQ as L,f as D,B as M,aR as $,aS as k,aT as B}from"./index-_NktdslD.js";import{u as F}from"./useSms-BtFrSTcP.js";import{f as o}from"./phone-B8ybmA3k.js";import{V as I}from"./Visibility-DFwPaxnL.js";import"./sms-C6P6uXfu.js";import"./isPossiblePhoneNumber-DES16dOz.js";const z=()=>{const p=g(),{findAllSmses:x}=F(),{data:b,isLoading:u}=x,f=r.useMemo(()=>[{id:"client.name",label:"Cliente",align:"left",sortable:!0,renderComponent:({row:e})=>{var t,s,n,i;return a.jsxs(l,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[a.jsx(c,{to:`/client/${(t=e==null?void 0:e.client)==null?void 0:t.id}`,children:(s=e==null?void 0:e.client)==null?void 0:s.name}),((n=e==null?void 0:e.client)==null?void 0:n.description)&&a.jsx(j,{title:(i=e==null?void 0:e.client)==null?void 0:i.description})]})}},{id:"to",label:"Para",align:"left",sortable:!0,formatter:o},{id:"message",label:"Mensagem",align:"left",sortable:!0,renderComponent:({row:e})=>a.jsx(c,{to:`/sms/${e==null?void 0:e.id}`,children:e==null?void 0:e.message})},{id:"sent_by_user",visible:!1},{id:"created_at_datetime",label:"Enviado por",align:"left",sortable:!0,renderComponent:({row:e})=>{var t,s,n,i,m;return a.jsx(a.Fragment,{children:a.jsxs(l,{sx:{flexDirection:"row",gap:2},children:[a.jsx(l,{sx:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:e!=null&&e.sent_by_user?a.jsxs(a.Fragment,{children:[a.jsx(v,{alt:(t=e==null?void 0:e.sent_by_user)==null?void 0:t.username,src:`${_}/users/${(s=e==null?void 0:e.sent_by_user)==null?void 0:s.id}/avatar?size=80`,name:(n=e==null?void 0:e.sent_by_user)==null?void 0:n.username}),a.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.jsx(d,{variant:"p",component:"p",fontWeight:500,children:(i=e==null?void 0:e.sent_by_user)==null?void 0:i.username}),a.jsx(d,{variant:"p",component:"p",color:"var(--outline)",children:(m=e==null?void 0:e.sent_by_user)==null?void 0:m.role})]})]}):a.jsx(d,{variant:"p",component:"p",color:"var(--outline)",children:"Utilizador removido"})}),a.jsx(C,{sx:{borderColor:"var(--elevation-level5)",borderWidth:1}}),a.jsxs(l,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.jsx(d,{variant:"p",component:"p",fontWeight:500,children:S(e==null?void 0:e.created_at_datetime)}),a.jsx(d,{variant:"p",component:"p",color:"var(--outline)",children:y(e==null?void 0:e.created_at_datetime)})]})]})})}},{id:"view_file",align:"right",sortable:!1,renderComponent:({row:e})=>a.jsx(T,{title:"Ver SMS",sx:{margin:-1},children:a.jsx(E,{onClick:()=>p(`/sms/${e==null?void 0:e.id}`),children:a.jsx(I,{})})})}],[]),h=r.useMemo(()=>[{id:"client.name",label:"Cliente"},{id:"to",label:"Para",formatter:o},{id:"message",label:"Mensagem"},{id:"sent_by_user.username",label:"Enviado por"},{id:"created_at_datetime",label:"Data de envio",formatter:e=>e?L(e):""}],[]);return a.jsx(D,{elevation:1,children:a.jsx(M,{sx:{marginTop:3},children:a.jsx($,{isLoading:u,LoadingComponent:a.jsx(k,{mode:"datatable"}),LoadedComponent:a.jsx(B,{mode:"datatable",data:b??[],columns:f,exportFileName:"sms",exportColumns:h})})})})};export{z as default};
