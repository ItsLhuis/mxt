import{t as f,j as a,e as S,r as C,q as b,f as L,S as d,H as A,B as m,aM as v,aQ as y,F as E,b4 as M,L as z,ab as F,s as R}from"./index-C9HasOiM.js";import{u as T,b as w,C as B,t as V}from"./index-BTi6rd4V.js";import{f as k}from"./user-C-rtefft.js";import"./isPossiblePhoneNumber-C2Df4Gz7.js";const H=f([a.jsx("circle",{cx:"10",cy:"8",r:"4"},"0"),a.jsx("path",{d:"M10.67 13.02c-.22-.01-.44-.02-.67-.02-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26c-.79-1.13-1.26-2.51-1.26-4 0-1.07.25-2.07.67-2.98M20.75 16c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63M17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"ManageAccounts"),D=({user:o,isUserFinished:r})=>{var l;const{role:u}=S(),{control:s,handleSubmit:x,formState:{errors:n},reset:h}=T({resolver:V(k)}),g={role:((l=o==null?void 0:o.user)==null?void 0:l.role)||""},{isDirty:p}=w({control:s}),c=()=>!p;C.useEffect(()=>{r&&o&&h(g)},[r,o]);const{updateUserRole:i}=b(),j=async e=>{var t;c()||i.mutateAsync({userId:(t=o==null?void 0:o.user)==null?void 0:t.id,...e}).then(()=>F("Cargo atualizado com sucesso!")).catch(()=>R("Erro ao atualizar cargo!"))};return a.jsx(L,{elevation:1,children:a.jsxs(d,{children:[a.jsx(A,{title:"Cargo",description:"Atualizar cargo do funcionário",icon:a.jsx(H,{})}),a.jsx("form",{onSubmit:x(j),children:a.jsxs(d,{sx:{padding:3},children:[a.jsx(m,{sx:{minWidth:90},children:a.jsx(v,{isLoading:!r,LoadingComponent:a.jsx(y,{variant:"rounded",width:"100%",height:52}),LoadedComponent:a.jsx(E,{fullWidth:!0,children:a.jsx(B,{name:"role",control:s,defaultValue:"",render:({field:e})=>{var t;return a.jsx(M,{ref:e.ref,label:"Cargo",data:["",...u!=="Administrador"?["Administrador"]:[],"Funcionário"],value:e.value,onChange:e.onChange,error:!!n.role,helperText:(t=n.role)==null?void 0:t.message})}})})})}),a.jsx(m,{sx:{marginLeft:"auto",marginTop:3},children:a.jsx(z,{loading:i.isPending,type:"submit",variant:"contained",disabled:!r||c(),children:"Atualizar Cargo"})})]})})]})})};export{D as default};
