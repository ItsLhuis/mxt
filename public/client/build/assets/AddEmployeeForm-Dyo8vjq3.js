import{d as T,e as C,o as b,j as e,S as l,f as y,H as E,az as F,F as t,T as m,af as P,aL as I,ag as U,aU as B,aV as L,h as w,B as N,L as R,aj as W,s as k}from"./index-mWc9gLhA.js";import{u as z,C as V,t as D}from"./index-COzNbWAj.js";import{e as G}from"./user-O1P_YrQ_.js";import{S as H}from"./Switch-CifR94Xw.js";import"./isPossiblePhoneNumber-DES16dOz.js";const M=(d=16)=>{const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+~";let i="";for(let s=0,c=n.length;s<d;++s)i+=n.charAt(Math.floor(Math.random()*c));return i},X=()=>{var x,f,j,g;const d=T(),{role:n}=C(),{control:i,register:s,handleSubmit:c,setValue:v,formState:{errors:a},setError:u,watch:h}=z({resolver:D(G),defaultValues:{isActive:!0}}),S=()=>{const r=M();v("password",r)},{createNewUser:p}=b(),A=async r=>{await p.mutateAsync(r).then(()=>{d("/employee/list"),W("Funcionário adicionado com sucesso!")}).catch(o=>{o.error.code==="USR-001"?u("username",{type:"manual",message:"Nome de utilizador já existente"}):o.error.code==="USR-002"?u("email",{type:"manual",message:"E-mail já existente"}):k("Erro ao adicionar funcionário!")})};return e.jsx("form",{onSubmit:c(A),children:e.jsx(l,{sx:{marginTop:3,gap:3},children:e.jsxs(y,{elevation:1,children:[e.jsx(E,{title:"Detalhes",description:"Nome de utilizador, email, senha,... do funcionário",icon:e.jsx(F,{})}),e.jsxs(l,{sx:{padding:3,gap:2},children:[e.jsx(t,{fullWidth:!0,children:e.jsx(m,{...s("username"),label:"Nome de utilizador",error:!!a.username,helperText:(x=a.username)==null?void 0:x.message,autoComplete:"off"})}),e.jsx(t,{fullWidth:!0,children:e.jsx(m,{...s("email"),label:"E-mail",error:!!a.email,helperText:(f=a.email)==null?void 0:f.message,autoComplete:"off"})}),e.jsx(t,{fullWidth:!0,children:e.jsx(m,{...s("password"),label:"Senha",error:!!a.password,helperText:(j=a.password)==null?void 0:j.message,autoComplete:"off",InputLabelProps:{shrink:((g=h("password"))==null?void 0:g.length)>0},InputProps:{endAdornment:e.jsx(P,{position:"end",children:e.jsx(I,{title:"Gerar senha",children:e.jsx(U,{edge:"end",onClick:S,children:e.jsx(B,{})})})})}})}),e.jsx(t,{fullWidth:!0,children:e.jsx(V,{name:"role",control:i,defaultValue:"",render:({field:r})=>{var o;return e.jsx(L,{ref:r.ref,label:"Cargo",data:["",...n!=="Administrador"?["Administrador"]:[],"Funcionário"],value:r.value,onChange:r.onChange,error:!!a.role,helperText:(o=a.role)==null?void 0:o.message})}})}),e.jsx(t,{fullWidth:!0,children:e.jsxs(l,{sx:{flexDirection:"row",alignItems:"center"},children:[e.jsx(H,{...s("isActive"),defaultChecked:!0}),e.jsxs(l,{children:[e.jsx(w,{variant:"p",component:"p",children:"Estado da conta"}),e.jsx(w,{variant:"p",component:"p",sx:{color:"var(--outline)"},children:h("isActive")?"Ativa":"Inativa"})]})]})}),e.jsx(N,{sx:{marginLeft:"auto",marginTop:1},children:e.jsx(R,{loading:p.isPending,type:"submit",variant:"contained",children:"Adicionar Funcionário"})})]})]})})})};export{X as default};
