import{t as T,j as e,r as x,f as F,H as k,S as f,aM as B,aQ as H,F as w,T as A,ai as D,aH as O,aj as z,bi as P,B as U,L as V,b2 as R,aD as W,h as N,aN as Q}from"./index-C9HasOiM.js";import{u as G,b as J,t as K}from"./index-BTi6rd4V.js";import{c as X}from"./equipment-D4V42Xnu.js";import{u as Y}from"./useClient-C9FOb7yq.js";import{u as Z}from"./useEquipment-ClzBGdbo.js";import"./client-CVPJ2IqU.js";import"./equipment-DQ8Bx2dX.js";const _=T(e.jsx("path",{d:"M3 13c0-2.45 1.76-4.47 4.08-4.91l-1.49 1.5L7 11l4-4.01L7 3 5.59 4.41l1.58 1.58v.06C3.7 6.46 1 9.42 1 13c0 3.87 3.13 7 7 7h3v-2H8c-2.76 0-5-2.24-5-5m10 0v7h9v-7zm7 5h-5v-3h5zM13 4h9v7h-9z"}),"MoveUp"),re=({equipment:n,isLoading:g,isError:j})=>{var u,m,h;const a=!g&&!j,{control:v,handleSubmit:C,setValue:S,getValues:$,formState:{errors:s},reset:b}=G({resolver:K(X)}),[o,i]=x.useState({isOpen:!1,client:{id:null,name:""}}),l=()=>{i(t=>({...t,isOpen:!0}))},y=()=>{i(t=>({...t,isOpen:!1}))},I=(t,r)=>{i({client:{id:t,name:r}}),S("clientId",t,{shouldDirty:!0})},L={clientId:((m=(u=n==null?void 0:n[0])==null?void 0:u.client)==null?void 0:m.id)||""},{isDirty:M}=J({control:v}),c=()=>!M;x.useEffect(()=>{a&&n&&n[0]&&(i({client:{id:n[0].client.id,name:n[0].client.name}}),b(L))},[a,n]);const{findAllClients:d}=Y(),{transferEquipment:p}=Z(),E=async t=>{!a||c()||await p.mutateAsync({equipmentId:n[0].id,...t})};return e.jsxs(F,{elevation:1,children:[e.jsx(k,{title:"Transferir",description:"Mudar cliente do equipamento",icon:e.jsx(_,{})}),e.jsx("form",{onSubmit:C(E),children:e.jsxs(f,{sx:{padding:3,gap:2},children:[e.jsx(B,{isLoading:!a,LoadingComponent:e.jsx(H,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(w,{fullWidth:!0,children:e.jsx(A,{label:"Cliente",placeholder:"Selecione um cliente",value:o.client.name,onClick:l,InputProps:{readOnly:!0,startAdornment:e.jsx(D,{position:"start",children:e.jsx(O,{children:e.jsx(z,{onClick:l,children:e.jsx(P,{})})})})},error:!!s.clientId,helperText:(h=s.clientId)==null?void 0:h.message})})}),e.jsx(U,{sx:{marginLeft:"auto",marginTop:1},children:e.jsx(V,{loading:p.isPending,type:"submit",variant:"contained",color:"error",disabled:!a||c(),children:"Transferir Equipamento"})})]})}),e.jsx(R,{open:o.isOpen??!1,onClose:y,mode:"data",data:d.data??[],isLoading:d.isLoading,title:"Clientes",placeholder:"Pesquise por um cliente",buttonStructure:(t,r)=>e.jsx(W,{variant:"contained",color:"secondary",sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",padding:"16px !important",width:"100%",minHeight:"unset !important",border:2,borderColor:t.id===o.client.id?"var(--primary)":"var(--elevation-level3)",borderRadius:2,color:"var(--onSurface)",lineHeight:1.5,fontWeight:400,"&:hover":{borderColor:"var(--primary)"}},onClick:()=>{I(t.id,t.name),r()},children:e.jsxs(f,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(N,{variant:"p",component:"p",sx:{wordBreak:"break-all",textAlign:"start"},children:t.name}),t.description&&e.jsx(Q,{fontSize:"small",title:t.description})]})})})]})};export{re as default};
