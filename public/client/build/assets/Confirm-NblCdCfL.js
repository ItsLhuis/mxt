import{a7 as g,u as S,X as v,r as P,j as s,B as l,Y as a,Z as r,m as y,$ as C,a0 as m,a1 as h,a2 as E,a3 as R,a4 as b,aa as B,a5 as T}from"./index-BCLPk4lW.js";import{d as A}from"./user-Bho16HCH.js";import{u as k}from"./useAuth-BtJQpWTC.js";const U=()=>{var i,c;const{token:u}=g(),p=S(),{register:o,handleSubmit:x,formState:{errors:e},setError:z}=v({resolver:b(A)}),[t,f]=P.useState(""),{confirmResetPassword:n}=k(),w=async j=>{await n.mutateAsync({token:u,...j}).then(()=>{B("Senha alterada com sucesso!"),p("/auth/login")}).catch(d=>{if(d.error.code==="USR-013"||d.error.code==="USR-014"){f("O código foi usado ou expirado!");return}T("Erro ao alterar senha!")})};return s.jsxs(l,{children:[s.jsx(a,{variant:"h3",component:"h3",sx:{marginBottom:4,fontSize:"2.5rem !important"},children:"Mixtech"}),s.jsx(r,{sx:{gap:2,marginBottom:4},children:s.jsxs(r,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[s.jsx(a,{variant:"h4",component:"h4",children:"Esqueceu a sua senha?"}),s.jsx(a,{variant:"p",component:"p",children:"Crie uma nova senha de sua preferência!"})]})}),t&&s.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:s.jsx(l,{sx:{marginBottom:6},children:s.jsx(C,{severity:"error",elevation:1,children:t})})}),s.jsx("form",{onSubmit:x(w),children:s.jsxs(r,{sx:{gap:2},children:[s.jsx(m,{fullWidth:!0,children:s.jsx(h,{...o("newPassword"),type:"password",label:"Senha",error:!!e.newPassword,helperText:(i=e.newPassword)==null?void 0:i.message,autoComplete:"new-password"})}),s.jsx(m,{fullWidth:!0,children:s.jsx(h,{...o("confirmPassword"),type:"password",label:"Confirmar senha",error:!!e.confirmPassword,helperText:(c=e.confirmPassword)==null?void 0:c.message,autoComplete:"confirm-new-password"})}),s.jsx(E,{to:"/auth/login",style:{alignSelf:"flex-end",fontSize:"13px"},children:"Iniciar sessão"}),s.jsx(R,{loading:n.isPending,type:"submit",variant:"contained",children:"Atualizar Senha"})]})})]})};export{U as default};
