import{r as m,d as j,t as A,au as r,bd as z,j as a,ay as S,B as o,C as b,br as C,L as y,s as E,aB as U}from"./index-DI1axIxw.js";import{u as $}from"./user-CZVbcN9v.js";const L=({user:e,isLoading:g,isError:f})=>{const t=!g&&!f,[n,i]=m.useState(!1),{control:x,handleSubmit:h,formState:{errors:d},reset:v}=j({resolver:A($),defaultValues:{avatar:t?`${r}/users/${e.id}/avatar?size=200`:""}});m.useEffect(()=>{t&&e&&v({avatar:`${r}/users/${e.id}/avatar?size=200`})},[t]);const{updateUserProfileAvatar:l}=z(),p=async s=>{!t||!n||l.mutateAsync(s).then(()=>{i(!1),E("Avatar atualizado com sucesso!")}).catch(()=>U("Erro ao atualizar avatar!"))};return a.jsxs(a.Fragment,{children:[a.jsx(S,{title:"Avatar",description:"Atualizar avatar do utilizador"}),a.jsx(o,{sx:{padding:3,paddingLeft:0},children:a.jsx("form",{onSubmit:h(p),children:a.jsxs(o,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:2},children:[a.jsx(b,{name:"avatar",control:x,defaultValue:"",render:({field:s})=>{var c;return a.jsx(C,{size:100,image:s.value,onChange:u=>{s.onChange(u),u!==`${r}/users/${e==null?void 0:e.id}/avatar?size=200`&&i(!0)},alt:t?e.username:"",name:t?e.username:"",loading:!t,error:!!d.logo,errorMessage:(c=d.logo)==null?void 0:c.message})}}),a.jsx(o,{sx:{marginLeft:"auto"},children:a.jsx(y,{loading:l.isPending,type:"submit",variant:"contained",disabled:!t||!n,children:"Atualizar Avatar"})})]})})})]})};export{L as default};
