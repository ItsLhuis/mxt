import{b as n,r as F,j as e,B as C,aA as W,F as O,e as H,g as z,d as $,S as m,h as U,i as s,C as u,o as X,t as q,ak as j,T as J,I as Q,p as _,am as K}from"./index-B7LzYPV0.js";import{D as E,a as V}from"./DatePicker-Bh1kUgzt.js";import{f as S,a as k}from"./date-CccjqyUM.js";import{G as b}from"./Grid-BJie37Py.js";import{g as B,a as Y}from"./getStringColor-DpL2ucBp.js";import{f as N}from"./currency-DMbMY7YD.js";import{f as Z}from"./phone-DsGwG79k.js";import{T as ee,a as ae}from"./Tabs-DNY3orO9.js";import{M as te}from"./MoreVert-DasQYvjz.js";const D=(t,i,r)=>!i||Array.isArray(i)&&i.length===0?null:e.jsxs(C,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1,border:"1px solid var(--elevation-level5)",borderRadius:2,padding:1},children:[e.jsxs(s,{variant:"p",component:"p",fontWeight:600,children:[t,":"]}),Array.isArray(i)?e.jsx(m,{sx:{display:"flex",flexFlow:"wrap",gap:1},children:i.map((h,x)=>e.jsx(u,{label:h,onDelete:()=>r(t),sx:{"& .MuiChip-label":{whiteSpace:"normal",wordBreak:"break-all",padding:"8px 14px"},height:"auto"}},x))}):e.jsx(u,{label:i,onDelete:()=>r(t),sx:{"& .MuiChip-label":{whiteSpace:"normal",padding:"8px 14px"},height:"auto"}})]}),G=({filters:t,tabsInfo:i,handleResetSelectedTab:r,handleRemoveService:h,handleSelectedServiceItemsChange:x,handleRemoveDate:w,handleStartDateChange:R,handleEndDateChange:T,handleRemoveSearchInpuValue:P,handleSearchInputChange:I,handleClearFilters:y})=>{const[d,g]=F.useState(""),v=p=>{const f=p.target.value;g(f)};F.useEffect(()=>{const p=setTimeout(()=>{I(d)},500);return()=>clearTimeout(p)},[d]);const M=["Reparação","Configuração de Redes","Backup e Recuperação de Dados","Consultoria","Manutenção Preventiva","Venda de Produtos","Formação","Suporte Técnico Remoto","Acessórios e Complementos"],c=()=>{const{selectedTab:p,selectedServiceItems:f,startDate:a,endDate:l}=t;return p!==0||f.length>0||a&&l&&l>=a||d.trim()!==""};return e.jsxs(C,{sx:{padding:3,paddingTop:1},children:[e.jsxs(b,{container:!0,spacing:2,children:[e.jsx(b,{item:!0,xs:12,md:12,lg:2,children:e.jsx(W,{label:"Serviço",data:M,selectedItems:t.selectedServiceItems,onChange:x})}),e.jsx(b,{item:!0,xs:12,md:12,lg:2,children:e.jsx(O,{fullWidth:!0,children:e.jsx(E,{label:"Data inicial",value:t.startDate,onChange:R})})}),e.jsx(b,{item:!0,xs:12,md:12,lg:2,children:e.jsx(O,{fullWidth:!0,children:e.jsx(E,{label:"Data final",value:t.endDate,minDate:t.startDate,onChange:T})})}),e.jsx(b,{item:!0,xs:12,md:12,lg:6,children:e.jsx(O,{fullWidth:!0,children:e.jsx(H,{name:"search",label:"Pesquisar",value:d,onChange:v,autoComplete:"off",placeholder:"Pesquise o nome do cliente ou número da fatura...",InputProps:{startAdornment:e.jsx(z,{position:"start",children:e.jsx($,{})})}})})})]}),c()&&e.jsx(m,{sx:{marginTop:2,display:"flex",flexDirection:"column",gap:2},children:e.jsxs(m,{sx:{display:"flex",flexFlow:"wrap",alignItems:"center",gap:1,overflow:"hidden",overflowX:"auto"},children:[t.selectedTab!==0&&D("Estado",i[t.selectedTab].name,r),D("Serviço",t.selectedServiceItems,h),t.startDate&&t.endDate&&D("Data",S(t.startDate)+" - "+S(t.endDate),w),d.trim()!==""&&D("Pesquisar",d,()=>{g(""),P()}),e.jsx(U,{startIcon:e.jsx(V,{sx:{color:"rgb(211, 47, 47)"}}),color:"error",onClick:()=>{g(""),y()},children:"Limpar"})]})})]})};G.propTypes={filters:n.shape({selectedTab:n.number.isRequired,selectedServiceItems:n.array.isRequired,startDate:n.instanceOf(Date),endDate:n.instanceOf(Date)}),tabsInfo:n.array.isRequired,handleResetSelectedTab:n.func.isRequired,handleRemoveService:n.func.isRequired,handleSelectedServiceItemsChange:n.func.isRequired,handleRemoveDate:n.func.isRequired,handleStartDateChange:n.func.isRequired,handleEndDateChange:n.func.isRequired,handleRemoveSearchInpuValue:n.func.isRequired,handleSearchInputChange:n.func.isRequired,handleClearFilters:n.func.isRequired};const ue=()=>{const[t,i]=F.useState({selectedTab:0,selectedServiceItems:[],startDate:null,endDate:null,searchValue:""}),r=a=>{i(_(t,l=>{Object.assign(l,a)}))},h=()=>{r({selectedTab:0})},x=(a,l)=>{r({selectedTab:l})},w=a=>{const l=[...t.selectedServiceItems];l.splice(a,1),r({selectedServiceItems:l})},R=a=>{r({selectedServiceItems:a})},T=()=>{r({startDate:null,endDate:null})},P=a=>{r({startDate:a})},I=a=>{r({endDate:a})},y=()=>{r({searchValue:""})},d=a=>{r({searchValue:a})},g=()=>{r({selectedTab:0,selectedServiceItems:[],startDate:null,endDate:null,searchValue:""})},v=[{id:0,name:"Total",total:100,color:"primary"},{id:1,name:"Pago",total:65,color:"success"},{id:2,name:"Pendente",total:20,color:"warning"},{id:3,name:"Atrasado",total:10,color:"error"},{id:4,name:"Rascunho",total:5,color:"default"}],M=a=>({id:`invoice-list-tab-${a}`,"aria-controls":`invoice-list-tabpanel-${a}`}),c=(a,l)=>{let A=[];a==="Despesa"?A=[{id:"action",label:"Ação",align:"left",sortable:!0,renderComponent:({data:o})=>e.jsx(u,{label:o})}]:a==="Rendimento"&&(A=[{id:"customer",label:"Cliente",align:"left",sortable:!1,renderComponent:({data:o})=>e.jsx(m,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:e.jsxs(j,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(s,{variant:"p",component:"p",fontWeight:500,children:o.customerName}),e.jsx(s,{variant:"p",component:"p",color:"var(--outline)",children:Z(o.customerPhoneNumber)})]})})},{id:"type",label:"Tipo",align:"left",sortable:!0,renderComponent:({data:o})=>e.jsx(u,{label:o})},{id:"status",label:"Estado",align:"left",sortable:!0,renderComponent:({data:o})=>e.jsx(u,{label:o,color:o==="Pago"?"success":o==="Por pagar"?"error":"warning"})}]);const L=[{id:"user",label:"Utilizador",align:"left",sortable:!1,renderComponent:({data:o})=>e.jsxs(m,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:[e.jsx(K,{alt:o.name,src:o.profilePic,sx:{backgroundColor:`${B(o.name)} !important`,color:Y(B(o.name))},children:o.name.charAt(0)}),e.jsxs(j,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(s,{variant:"p",component:"p",fontWeight:500,children:o.name}),e.jsx(s,{variant:"p",component:"p",color:"var(--outline)",children:o.role})]})]})},{id:"date",label:"Data",align:"left",sortable:!0,renderComponent:({data:o})=>e.jsxs(j,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(s,{variant:"p",component:"p",fontWeight:500,children:S(o)}),e.jsx(s,{variant:"p",component:"p",color:"var(--outline)",children:k(o)})]})},...A];return e.jsxs(m,{sx:{color:"var(--onSurface)",margin:3},children:[e.jsx(s,{variant:"h6",component:"h6",marginBottom:3,children:"Histórico"}),e.jsx(C,{sx:{border:"1px solid var(--elevation-level5)",borderRadius:2,overflow:"hidden"},children:e.jsx(q,{columns:L,data:l})})]})},p=[{id:"description",label:"Descrição",align:"left",sortable:!0},{id:"date",label:"Data",align:"left",sortable:!0,renderComponent:({data:a})=>e.jsxs(j,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(s,{variant:"p",component:"p",fontWeight:500,children:S(a)}),e.jsx(s,{variant:"p",component:"p",color:"var(--outline)",children:k(a)})]})},{id:"amount",label:"Quantidade",align:"left",sortable:!0},{id:"value",label:"Valor",align:"left",sortable:!0,formatter:N},{id:"total",label:"Total",align:"left",sortable:!0,formatter:N},{id:"type",label:"Tipo",align:"left",sortable:!0,renderComponent:({data:a})=>e.jsx(u,{label:a,color:a==="Rendimento"?"success":a==="Despesa"?"error":"warning"})},{id:"moreOptions",align:"right",sortable:!1,renderComponent:({data:a})=>e.jsx(J,{title:"Mais Opções",placement:"bottom",sx:{margin:-1},children:e.jsx(Q,{onClick:()=>console.log(a),children:e.jsx(te,{fontSize:"inherit"})})})}],f=[{id:1,description:"Smartphone Samsung Galaxy S22 Ultra",date:new Date("Tue Mar 05 2024 09:24:24 GMT+0000 (Hora padrão da Europa Ocidental)"),amount:1,value:1199,total:1199,type:"Rendimento (Pendente)",moreOptions:"ola",expandableContent:()=>c("Rendimento",[{id:2,user:{name:"Luis Rodrigues",role:"Chefe",profilePic:null},date:new Date,customer:{customerName:"João Silva",customerPhoneNumber:"912832943"},type:"Reparação",status:"Por pagar"}])},{id:2,description:"Laptop Apple MacBook Pro 14 M1 Pro",date:new Date,amount:1,value:1999,total:1999,type:"Despesa",moreOptions:"ola",expandableContent:()=>c("Despesa",[{id:2,user:{name:"Gonçalo Pinto",role:"Funcionário",profilePic:null},date:new Date("Tue Mar 05 2024 9:24:24 GMT+0000 (Hora padrão da Europa Ocidental)"),action:"Atualização"},{id:1,user:{name:"Luis Rodrigues",role:"Administrador",profilePic:null},date:new Date("Tue Mar 03 2024 10:10:24 GMT+0000 (Hora padrão da Europa Ocidental)"),action:"Criação"}])},{id:3,description:"Smartwatch Apple Watch Series 7",date:new Date,amount:1,value:399,total:399,type:"Despesa",moreOptions:"ola",expandableContent:()=>c("Despesa",[{id:4,user:{name:"Luis Rodrigues",role:"Administrador",profilePic:null},date:new Date,action:"Criação"}])},{id:4,description:"Formatação Apple MacBook Pro 14 M1 Pro",date:new Date,amount:1,value:49,total:49,type:"Rendimento",moreOptions:"ola",expandableContent:()=>c("Rendimento",[{id:3,user:{name:"Luis Rodrigues",role:"Administrador",profilePic:null},date:new Date,customer:{customerName:"Maria Santos",customerPhoneNumber:"912832943"},type:"Reparação",status:"Pago"},{id:4,user:{name:"Ana Silva",role:"Funcionário",profilePic:null},date:new Date("Tue Mar 03 2024 10:10:24 GMT+0000 (Hora padrão da Europa Ocidental)"),customer:{customerName:"Maria Santos",customerPhoneNumber:"912832943"},type:"Reparação",status:"Por pagar"}])},{id:5,description:"Câmera digital Sony Alpha 7 IV",date:new Date,amount:1,value:2499,total:2499,type:"Rendimento",moreOptions:"ola",expandableContent:()=>c("Rendimento",[{id:3,user:{name:"Luis Rodrigues",role:"Administrador",profilePic:null},date:new Date,customer:{customerName:"Maria Santos",customerPhoneNumber:"912832943"},type:"Reparação",status:"Pago"},{id:4,user:{name:"Xavier Silva",role:"Funcionário",profilePic:null},date:new Date("Tue Mar 03 2024 10:10:24 GMT+0000 (Hora padrão da Europa Ocidental)"),customer:{customerName:"Maria Santos",customerPhoneNumber:"912832943"},type:"Reparação",status:"Por pagar"}])}];return e.jsx(X,{elevation:1,children:e.jsxs(C,{sx:{marginTop:3,paddingBottom:2},children:[e.jsx(ee,{value:t.selectedTab,onChange:x,"aria-label":"settings-tabs",variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,sx:{borderBottom:"1px solid var(--elevation-level5)",padding:"0 24px"},children:v.map(a=>e.jsx(ae,{label:e.jsxs(m,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:[e.jsx(s,{variant:"p",children:a.name}),e.jsx(u,{label:a.total,color:a.color})]}),...M(a.name),disableRipple:!0},a.id))}),e.jsx(G,{filters:t,tabsInfo:v,handleResetSelectedTab:h,handleRemoveService:w,handleSelectedServiceItemsChange:R,handleRemoveDate:T,handleStartDateChange:P,handleEndDateChange:I,handleRemoveSearchInpuValue:y,handleSearchInputChange:d,handleClearFilters:g}),e.jsx(q,{columns:p,data:f,mode:"datatable",actions:[{icon:e.jsx(V,{}),title:"Eliminar",onClick:()=>console.log()}]})]})})};export{ue as default};
