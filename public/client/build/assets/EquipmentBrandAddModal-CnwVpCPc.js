import{r as u,j as r,aU as E,B as T,F as b,T as j,ak as S,s as B}from"./index-_NktdslD.js";import{u as M,t as g}from"./index-8QsUXVhp.js";import{b as w}from"./equipment-DMqeKo_-.js";import{u as A}from"./useEquipment-Dy7ZmQ0L.js";const N=({open:e,onClose:t})=>{var m;const{register:c,handleSubmit:d,formState:{errors:n},setError:f,reset:a}=M({resolver:g(w)}),s=u.useRef(null);u.useEffect(()=>{if(!e){a();return}const o=setTimeout(()=>{e&&s.current&&s.current.focus()},100);return()=>clearTimeout(o)},[e]);const{createNewEquipmentBrand:l}=A(),x=async o=>new Promise((p,i)=>{l.mutateAsync(o).then(()=>{t(),S("Marca adicionada com sucesso!"),a(),p()}).catch(h=>{if(h.error.code==="EQU-007"){f("name",{type:"manual",message:"Nome jรก existente"}),i();return}t(),B("Erro ao adicionar marca!"),a(),i()})});return r.jsx(E,{mode:"form",title:"Adicionar Marca",open:e,onClose:t,submitButtonText:"Adicionar Marca",onSubmit:d(x),children:r.jsx(T,{sx:{padding:3},children:r.jsx(b,{fullWidth:!0,children:r.jsx(j,{...c("name"),label:"Nome",error:!!n.name,helperText:(m=n.name)==null?void 0:m.message,autoComplete:"off",inputRef:s})})})})};export{N as default};
