import{r as u,j as t,a$ as h,B as E,F as j,T as y,aj as S,s as b}from"./index-DJpfvod0.js";import{u as g,t as w}from"./index-o_NukjCy.js";import{t as A}from"./equipment-6gFyHN-s.js";import{u as F}from"./useEquipment-c2-M7uo4.js";const M=({open:e,onClose:r})=>{var m;const{register:c,handleSubmit:d,formState:{errors:i},setError:p,reset:o}=g({resolver:w(A)}),s=u.useRef(null);u.useEffect(()=>{if(!e){o();return}const a=setTimeout(()=>{e&&s.current&&s.current.focus()},100);return()=>clearTimeout(a)},[e]);const{createNewEquipmentType:f}=F(),l=async a=>new Promise((x,n)=>{f.mutateAsync(a).then(()=>{r(),S("Tipo adicionado com sucesso!"),o(),x()}).catch(T=>{if(T.error.code==="EQU-007"){p("name",{type:"manual",message:"Nome jรก existente"}),n();return}r(),b("Erro ao adicionar tipo!"),o(),n()})});return t.jsx(h,{mode:"form",title:"Adicionar Tipo",open:e,onClose:r,submitButtonText:"Adicionar Tipo",onSubmit:d(l),children:t.jsx(E,{sx:{padding:3},children:t.jsx(j,{fullWidth:!0,children:t.jsx(y,{...c("name"),label:"Nome",error:!!i.name,helperText:(m=i.name)==null?void 0:m.message,autoComplete:"off",inputRef:s})})})})};export{M as default};
