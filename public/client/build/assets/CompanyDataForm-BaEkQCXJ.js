import{b as B,a as P,r as G,j as e,H,S as h,G as l,aZ as i,b6 as o,F as a,T as n,B as m,L as I,aj as M,s as V}from"./index-DJpfvod0.js";import{u as _,b as Q,C as R,t as U}from"./index-o_NukjCy.js";import{a as Z}from"./company-CFsZcQUp.js";import{u as q}from"./useCompany-ciZbXPXn.js";import{C as J}from"./mui-tel-input.es-SFpFBxLu.js";import"./isPossiblePhoneNumber-DES16dOz.js";const ee=({company:t,isLoading:T,isError:W})=>{var f,c,L,p,b,w,v;const r=!T&&!W,F=B(),x=P(F.breakpoints.down("sm")),{control:j,register:d,handleSubmit:E,formState:{errors:s},reset:D}=_({resolver:U(Z)}),N={name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",phoneNumber:(t==null?void 0:t.phone_number)||"+351",website:(t==null?void 0:t.website)||"",city:(t==null?void 0:t.city)||"",country:(t==null?void 0:t.country)||"",locality:(t==null?void 0:t.locality)||"",address:(t==null?void 0:t.address)||"",postalCode:(t==null?void 0:t.postal_code)||""},{isDirty:z}=Q({control:j}),g=()=>!z;G.useEffect(()=>{r&&t&&D(N)},[r,t]);const{updateCompany:C}=q(),k=async u=>{!r||g()||await C.mutateAsync(u).then(()=>M("Empresa atualizada com sucesso!")).catch(()=>V("Erro ao atualizar empresa!"))};return e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"Dados",description:"Atualizar dados da empresa"}),e.jsx("form",{onSubmit:E(k),children:e.jsxs(h,{sx:{paddingTop:1},children:[e.jsxs(l,{container:!0,spacing:2,sx:{paddingInline:3},children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(h,{sx:{alignItems:"center",flexDirection:x?"column":"row",gap:2},children:e.jsxs(h,{sx:{flexDirection:"column",gap:2,width:"100%"},children:[e.jsx(i,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(a,{fullWidth:!0,children:e.jsx(n,{...d("name"),label:"Nome",error:!!s.name,helperText:(f=s.name)==null?void 0:f.message,autoComplete:"off"})})}),e.jsx(i,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(a,{fullWidth:!0,children:e.jsx(n,{...d("email"),label:"E-mail",error:!!s.email,helperText:(c=s.email)==null?void 0:c.message,autoComplete:"off"})})}),e.jsx(i,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(a,{fullWidth:!0,children:e.jsx(R,{name:"phoneNumber",control:j,defaultValue:"+351",render:({field:u})=>{var S;return e.jsx(J,{...u,value:u.value||"+351",onChange:A=>{u.onChange(A.replace(/\s+/g,""))},defaultCountry:"pt",label:"Contacto",variant:"outlined",fullWidth:!0,error:!!s.phoneNumber,helperText:(S=s.phoneNumber)==null?void 0:S.message,autoComplete:"off",disableDropdown:!0})}})})})]})})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(i,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(a,{fullWidth:!0,children:e.jsx(n,{...d("website"),label:"Site",autoComplete:"off"})})})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(i,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(a,{fullWidth:!0,children:e.jsx(n,{...d("country"),label:"País",error:!!s.country,helperText:(L=s.country)==null?void 0:L.message,autoComplete:"off"})})})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(i,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(a,{fullWidth:!0,children:e.jsx(n,{...d("city"),label:"Cidade",error:!!s.city,helperText:(p=s.city)==null?void 0:p.message,autoComplete:"off"})})})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(i,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(a,{fullWidth:!0,children:e.jsx(n,{...d("locality"),label:"Localidade",error:!!s.locality,helperText:(b=s.locality)==null?void 0:b.message,autoComplete:"off"})})})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(h,{sx:{flexDirection:x?"column":"row",gap:2},children:[e.jsx(m,{sx:{width:"100%"},children:e.jsx(i,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(a,{fullWidth:!0,children:e.jsx(n,{...d("address"),label:"Morada",error:!!s.address,helperText:(w=s.address)==null?void 0:w.message,autoComplete:"off"})})})}),e.jsx(m,{sx:{width:x?"100%":"60%"},children:e.jsx(i,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(a,{fullWidth:!0,children:e.jsx(n,{...d("postalCode"),label:"Código Postal",error:!!s.postalCode,helperText:(v=s.postalCode)==null?void 0:v.message,autoComplete:"off"})})})})]})})]}),e.jsx(m,{sx:{marginLeft:"auto",padding:3},children:e.jsx(I,{loading:C.isPending,type:"submit",variant:"contained",sx:{marginLeft:"auto"},disabled:!r||g(),children:"Atualizar Empresa"})})]})})]})};export{ee as default};
