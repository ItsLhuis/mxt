import{X as L,r as S,j as e,a as v,az as T,T as w,Z as E,aw as F,ao as z,$ as D,a0 as P,a7 as k,B as y,a2 as B,a3 as R,a9 as A,a4 as H}from"./index-DjYwzy8o.js";import{c as I}from"./client-Ce6SMqAF.js";import{u as N}from"./useClient-u94t69cI.js";import{R as M,s as p}from"./sanitizeHTML-BJ4gd8Xw.js";const Z=({client:s,isLoading:h,isError:x})=>{var m,c,l,u;const o=!h&&!x,{control:g,register:j,handleSubmit:f,formState:{errors:r},reset:C,watch:t}=L({resolver:R(I)}),n={name:((m=s==null?void 0:s[0])==null?void 0:m.name)||"",description:((c=s==null?void 0:s[0])==null?void 0:c.description)||""},i=()=>{const a=t();return a.name===n.name&&(p(a.description)===""?"":a.description)===n.description};S.useEffect(()=>{o&&s&&s[0]&&C(n)},[o,s]);const{updateClient:d}=N(),b=async a=>{!o||i()||await d.mutateAsync({clientId:s[0].id,...a,description:p(a.description)===""?null:a.description}).then(()=>A("Cliente atualizado com sucesso!")).catch(()=>H("Erro ao atualizar cliente!"))};return e.jsxs(v,{elevation:1,children:[e.jsx(T,{title:"Detalhes",description:"Nome e descrição do cliente",icon:e.jsx(w,{})}),e.jsx("form",{onSubmit:f(b),children:e.jsxs(E,{sx:{padding:3,gap:2},children:[e.jsx(F,{isLoading:!o,LoadingComponent:e.jsx(z,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(D,{fullWidth:!0,children:e.jsx(P,{...j("name"),label:"Nome",error:!!r.name,helperText:(l=r.name)==null?void 0:l.message,InputLabelProps:{shrink:((u=t("name"))==null?void 0:u.length)>0}})})}),e.jsx(k,{name:"description",control:g,render:({field:a})=>e.jsx(M,{label:"Descrição",value:a.value,onChange:a.onChange,isLoading:!o})}),e.jsx(y,{sx:{marginLeft:"auto",marginTop:1},children:e.jsx(B,{loading:d.isPending,type:"submit",variant:"contained",disabled:!o||i(),children:"Atualizar Detalhes"})})]})})]})};export{Z as default};
