import{ag as M,ad as P,ah as C,ai as $,ae as U,l as p,N as B,a6 as h,r as b,af as W,a9 as _,a1 as I,a0 as q,j as r,aa as H,ac as O,d as G,B as S,S as g,m as J,f as k,g as F,L as K,t as Q}from"./index-CeqpX1Nb.js";import{a as X}from"./user-CwWV65hS.js";import{u as Y}from"./useAuth-BPtBRX8Y.js";import{A as Z}from"./Alert-B787Gs3v.js";function ee(o){return P("MuiLink",o)}const oe=M("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),L={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},re=o=>L[o]||o,ne=({theme:o,ownerState:e})=>{const s=re(e.color),n=C(o,`palette.${s}`,!1)||e.color,t=C(o,`palette.${s}Channel`);return"vars"in o&&t?`rgba(${t} / 0.4)`:$(n,.4)},se=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],te=o=>{const{classes:e,component:s,focusVisible:n,underline:t}=o,a={root:["root",`underline${B(t)}`,s==="button"&&"button",n&&"focusVisible"]};return O(a,ee,e)},ae=U(p,{name:"MuiLink",slot:"Root",overridesResolver:(o,e)=>{const{ownerState:s}=o;return[e.root,e[`underline${B(s.underline)}`],s.component==="button"&&e.button]}})(({theme:o,ownerState:e})=>h({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&h({textDecoration:"underline"},e.color!=="inherit"&&{textDecorationColor:ne({theme:o,ownerState:e})},{"&:hover":{textDecorationColor:"inherit"}}),e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${oe.focusVisible}`]:{outline:"auto"}})),ie=b.forwardRef(function(e,s){const n=W({props:e,name:"MuiLink"}),{className:t,color:a="primary",component:i="a",onBlur:u,onFocus:l,TypographyClasses:d,underline:x="always",variant:m="inherit",sx:f}=n,R=_(n,se),{isFocusVisibleRef:y,onBlur:V,onFocus:w,ref:A}=I(),[T,v]=b.useState(!1),D=q(s,A),z=c=>{V(c),y.current===!1&&v(!1),u&&u(c)},N=c=>{w(c),y.current===!0&&v(!0),l&&l(c)},j=h({},n,{color:a,component:i,focusVisible:T,underline:x,variant:m}),E=te(j);return r.jsx(ae,h({color:a,className:H(E.root,t),classes:d,component:i,onBlur:z,onFocus:N,ref:D,ownerState:j,variant:m,sx:[...Object.keys(L).includes(a)?[]:[{color:a}],...Array.isArray(f)?f:[f]]},R))}),me=()=>{var l,d;const{register:o,handleSubmit:e,setFocus:s,formState:{errors:n}}=G({resolver:Q(X)}),[t,a]=b.useState(""),{login:i}=Y(),u=async x=>{await i.mutateAsync(x).catch(m=>{if(m.error.code==="USR-004"){a("Esta conta foi desativada. Por favor, entre em contacto com o suporte para resolver esta questão!");return}s("username"),a("Nome de utilizador ou senha inválidos!")})};return r.jsxs(S,{children:[r.jsx(p,{variant:"h3",component:"h3",sx:{marginBottom:4,fontSize:"2.5rem !important"},children:"Mixtech"}),r.jsx(g,{sx:{gap:2,marginBottom:4},children:r.jsxs(g,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[r.jsx(p,{variant:"h4",component:"h4",children:"Iniciar Sessão"}),r.jsx(p,{variant:"p",component:"p",children:"Bem vindo de volta!"})]})}),t&&r.jsx(J.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:r.jsx(S,{sx:{marginBottom:6},children:r.jsx(Z,{severity:"error",elevation:1,children:t})})}),r.jsx("form",{onSubmit:e(u),children:r.jsxs(g,{sx:{gap:2},children:[r.jsx(k,{fullWidth:!0,children:r.jsx(F,{...o("username"),label:"Nome de utilizador",error:!!n.username,helperText:(l=n.username)==null?void 0:l.message,autoComplete:"username"})}),r.jsx(k,{fullWidth:!0,children:r.jsx(F,{...o("password"),type:"password",label:"Senha",error:!!n.password,helperText:(d=n.password)==null?void 0:d.message,autoComplete:"current-password"})}),r.jsx(ie,{sx:{alignSelf:"flex-end",fontSize:"13px",margin:"8px 0",color:"inherit",textDecorationColor:"inherit"},children:"Esqueceu a sua senha?"}),r.jsx(K,{loading:i.isPending,type:"submit",variant:"contained",children:"Iniciar Sessão"})]})})]})};export{me as default};
