import{r as f,j as a,a7 as S,aH as F,b4 as m,h as n,S as s,b2 as E,aF as b,aG as h,aI as j,aJ as v,aK as u,aQ as c,f as T,H as R,az as $,aR as z,aS as L,B as W,aT as k}from"./index-_NktdslD.js";import{g as I}from"./getValidChipColor-D8WVyITM.js";import{C as M}from"./Check-DhRqV4Lx.js";const H=({equipment:t,isLoading:g,isError:y})=>{var x;const p=!g&&!y,C=f.useMemo(()=>[{id:"status.name",label:"Estado",align:"left",sortable:!0,renderComponent:({row:e})=>{var i,l;return a.jsx(S,{to:`/repair/${e==null?void 0:e.id}`,children:a.jsx(F,{label:(i=e==null?void 0:e.status)==null?void 0:i.name,color:I((l=e==null?void 0:e.status)==null?void 0:l.color)})})}},{id:"entry_datetime",label:"Data de entrada",align:"left",sortable:!0,renderComponent:({row:e})=>a.jsx(a.Fragment,{children:e!=null&&e.entry_datetime?a.jsx(a.Fragment,{children:m(e==null?void 0:e.entry_datetime)}):a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Sem valor"})})},{id:"conclusion_datetime",label:"Data de conclusão",align:"left",sortable:!0,renderComponent:({row:e})=>a.jsx(a.Fragment,{children:e!=null&&e.conclusion_datetime?a.jsx(a.Fragment,{children:m(e==null?void 0:e.conclusion_datetime)}):a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Sem valor"})})},{id:"delivery_datetime",label:"Data de entrega",align:"left",sortable:!0,renderComponent:({row:e})=>a.jsx(a.Fragment,{children:e!=null&&e.delivery_datetime?a.jsx(a.Fragment,{children:m(e==null?void 0:e.delivery_datetime)}):a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Sem valor"})})},{id:"is_client_notified",label:"Cliente notificado",align:"left",sortable:!0,renderComponent:({row:e})=>a.jsx(s,{sx:{alignItems:"flex-start"},children:e!=null&&e.is_client_notified?a.jsx(M,{color:"success"}):a.jsx(E,{color:"error"})})},{id:"created_by_user",visible:!1},{id:"created_at_datetime",label:"Criado por",align:"left",sortable:!0,renderComponent:({row:e})=>{var i,l,d,r,o;return a.jsx(a.Fragment,{children:a.jsxs(s,{sx:{flexDirection:"row",gap:2},children:[a.jsx(s,{sx:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:e!=null&&e.created_by_user?a.jsxs(a.Fragment,{children:[a.jsx(b,{alt:(i=e==null?void 0:e.created_by_user)==null?void 0:i.username,src:`${h}/users/${(l=e==null?void 0:e.created_by_user)==null?void 0:l.id}/avatar?size=80`,name:(d=e==null?void 0:e.created_by_user)==null?void 0:d.username}),a.jsxs(s,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.jsx(n,{variant:"p",component:"p",fontWeight:500,children:(r=e==null?void 0:e.created_by_user)==null?void 0:r.username}),a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:(o=e==null?void 0:e.created_by_user)==null?void 0:o.role})]})]}):a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Utilizador removido"})}),a.jsx(j,{sx:{borderColor:"var(--elevation-level5)",borderWidth:1}}),a.jsxs(s,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.jsx(n,{variant:"p",component:"p",fontWeight:500,children:v(e==null?void 0:e.created_at_datetime)}),a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:u(e==null?void 0:e.created_at_datetime)})]})]})})}},{id:"last_modified_by_user",visible:!1},{id:"last_modified_datetime",label:"Modificado pela última vez por",align:"left",sortable:!0,renderComponent:({row:e})=>{var i,l,d,r,o;return a.jsx(a.Fragment,{children:e!=null&&e.last_modified_datetime?a.jsxs(s,{sx:{flexDirection:"row",gap:2},children:[a.jsx(s,{sx:{flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:e!=null&&e.last_modified_by_user?a.jsxs(a.Fragment,{children:[a.jsx(b,{alt:(i=e==null?void 0:e.last_modified_by_user)==null?void 0:i.username,src:`${h}/users/${(l=e==null?void 0:e.last_modified_by_user)==null?void 0:l.id}/avatar?size=80`,name:(d=e==null?void 0:e.last_modified_by_user)==null?void 0:d.username}),a.jsxs(s,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.jsx(n,{variant:"p",component:"p",fontWeight:500,children:(r=e==null?void 0:e.last_modified_by_user)==null?void 0:r.username}),a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:(o=e==null?void 0:e.last_modified_by_user)==null?void 0:o.role})]})]}):a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Utilizador removido"})}),a.jsx(j,{sx:{borderColor:"var(--elevation-level5)",borderWidth:1}}),a.jsxs(s,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[a.jsx(n,{variant:"p",component:"p",fontWeight:500,children:v(e==null?void 0:e.last_modified_datetime)}),a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:u(e==null?void 0:e.last_modified_datetime)})]})]}):a.jsx(n,{variant:"p",component:"p",color:"var(--outline)",children:"Ainda não foi modificado"})})}}],[]),D=f.useMemo(()=>[{id:"client",label:"Cliente",formatter:()=>{var e,i;return(i=(e=t==null?void 0:t[0])==null?void 0:e.client)==null?void 0:i.name}},{id:"equipment",label:"Equipamento",formatter:()=>{var e,i,l,d,r,o,_;return`${(i=(e=t==null?void 0:t[0])==null?void 0:e.type)==null?void 0:i.name} - ${(d=(l=t==null?void 0:t[0])==null?void 0:l.brand)==null?void 0:d.name} ${(o=(r=t==null?void 0:t[0])==null?void 0:r.model)==null?void 0:o.name} (${(_=t==null?void 0:t[0])==null?void 0:_.sn})`}},{id:"status",label:"Estado",formatter:e=>e==null?void 0:e.name,color:e=>e==null?void 0:e.color},{id:"entry_datetime",label:"Data de entrada",formatter:e=>e?c(e):""},{id:"conclusion_datetime",label:"Data de conclusão",formatter:e=>e?c(e):""},{id:"delivery_datetime",label:"Data de entrega",formatter:e=>e?c(e):""},{id:"is_client_notified",label:"Cliente notificado",formatter:e=>e===!0?"Sim":"Não"},{id:"created_by_user.username",label:"Criado por"},{id:"created_at_datetime",label:"Data de criação",formatter:e=>e?c(e):""},{id:"last_modified_by_user.username",label:"Modificado pela última vez por"},{id:"last_modified_datetime",label:"Última data de modificação",formatter:e=>e?c(e):""}],[t]);return a.jsxs(T,{elevation:1,children:[a.jsx(R,{title:"Reparações",description:"Reparações do equipamento",icon:a.jsx($,{})}),a.jsx(z,{isLoading:!p,LoadingComponent:a.jsx(L,{mode:"datatable"}),LoadedComponent:a.jsx(W,{sx:{margin:3,border:"1px solid var(--elevation-level5)",borderRadius:2,overflow:"hidden"},children:a.jsx(k,{mode:"datatable",data:p?(x=t[0])==null?void 0:x.repairs:[],columns:C,exportFileName:"reparacoes_equipamento",exportColumns:D})})})]})};export{H as default};
