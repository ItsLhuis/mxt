import{r as u,j as t,b2 as h,B as E,F as b,T as j,ab as y,s as S}from"./index-C9HasOiM.js";import{u as g,t as w}from"./index-BTi6rd4V.js";import{t as A}from"./equipment-D4V42Xnu.js";import{u as F}from"./useEquipment-ClzBGdbo.js";import"./equipment-DQ8Bx2dX.js";const v=({open:e,onClose:r})=>{var m;const{register:c,handleSubmit:p,formState:{errors:i},setError:d,reset:o}=g({resolver:w(A)}),s=u.useRef(null);u.useEffect(()=>{if(!e){o();return}const a=setTimeout(()=>{e&&s.current&&s.current.focus()},100);return()=>clearTimeout(a)},[e]);const{createNewEquipmentType:f}=F(),l=async a=>new Promise((x,n)=>{f.mutateAsync(a).then(()=>{r(),y("Tipo adicionado com sucesso!"),o(),x()}).catch(T=>{if(T.error.code==="EQU-007"){d("name",{type:"manual",message:"Nome jรก existente"}),n();return}r(),S("Erro ao adicionar tipo!"),o(),n()})});return t.jsx(h,{mode:"form",title:"Adicionar Tipo",open:e,onClose:r,submitButtonText:"Adicionar Tipo",onSubmit:p(l),children:t.jsx(E,{sx:{padding:3},children:t.jsx(b,{fullWidth:!0,children:t.jsx(j,{...c("name"),label:"Nome",error:!!i.name,helperText:(m=i.name)==null?void 0:m.message,autoComplete:"off",inputRef:s})})})})};export{v as default};
