import{r as m,j as r,a$ as A,B as T,F as j,T as v,aj as E,s as R}from"./index-D5KQThVv.js";import{u as S,t as b}from"./index-DCkCG_3f.js";import{o as y}from"./repair-CEN5k9Q0.js";import{u as I}from"./useRepair-BQF6lWd4.js";import"./repair-DMHLqADZ.js";const M=({open:e,onClose:t})=>{var i;const{register:u,handleSubmit:d,formState:{errors:n},setError:f,reset:s}=S({resolver:b(y)}),o=m.useRef(null);m.useEffect(()=>{if(!e){s();return}const a=setTimeout(()=>{e&&o.current&&o.current.focus()},100);return()=>clearTimeout(a)},[e]);const{createNewInterventionAccessoryUsed:l}=I(),p=async a=>new Promise((x,c)=>{l.mutateAsync(a).then(()=>{t(),E("Acessório da intervenção adicionado com sucesso!"),s(),x()}).catch(h=>{if(h.error.code==="REP-019"){f("name",{type:"manual",message:"Nome já existente"}),c();return}t(),R("Erro ao adicionar acessório da intervenção!"),s(),c()})});return r.jsx(A,{mode:"form",title:"Adicionar Acessório da Intervenção",open:e,onClose:t,submitButtonText:"Adicionar Acessório da Intervenção",onSubmit:d(p),children:r.jsx(T,{sx:{padding:3},children:r.jsx(j,{fullWidth:!0,children:r.jsx(v,{...u("name"),label:"Nome",error:!!n.name,helperText:(i=n.name)==null?void 0:i.message,autoComplete:"off",inputRef:o})})})})};export{M as default};
