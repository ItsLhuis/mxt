import{d as P,e as E,b as D,a as F,j as e,S as n,B as m,f as L,H as N,G as l,I as z,F as r,T as s,L as A,h as I,s as k}from"./index-D-gKbxy2.js";import{u as B,C as b,t as G}from"./index-DampQ2Jc.js";import{i as H}from"./company-XDa8V1o6.js";import{u as M}from"./useCompany-P2rEXP8G.js";import{C as V}from"./mui-tel-input.es-BQ0Mi011.js";import"./isPossiblePhoneNumber-DES16dOz.js";const O=()=>{var h,x,p,f,j,g,C;const y=P(),{role:w,reloadAuthStatus:v}=E(),T=D(),d=F(T.breakpoints.down("sm")),{control:u,register:t,handleSubmit:S,formState:{errors:a}}=B({resolver:G(H)}),{updateCompany:c}=M(),W=async o=>{await c.mutateAsync(o).then(()=>{v(),y("/dashboard")}).catch(()=>k("Erro ao atualizar empresa!"))};return e.jsx(n,{component:"main",sx:{height:"100vh",width:"100vw",overflow:"hidden",overflowY:"auto"},children:e.jsx(m,{sx:{margin:"auto"},children:w==="Chefe"?e.jsxs(L,{sx:{maxWidth:900,margin:3},elevation:1,children:[e.jsx(N,{title:"Para continuar, precisa de atualizar os dados sobre a empresa",description:"Posteriormente, poderá alterar estes dados"}),e.jsx("form",{onSubmit:S(W),children:e.jsxs(n,{children:[e.jsxs(l,{container:!0,spacing:2,sx:{paddingInline:3},children:[e.jsx(l,{item:!0,xs:12,children:e.jsxs(n,{sx:{alignItems:"center",flexDirection:d?"column":"row",gap:2},children:[e.jsx(m,{sx:{width:d?"100%":"35%"},children:e.jsx(b,{name:"logo",control:u,defaultValue:"",render:({field:o})=>{var i;return e.jsx(z,{withLoadingEffect:!1,circular:!1,size:100,image:o.value,onChange:o.onChange,error:!!a.logo,helperText:(i=a.logo)==null?void 0:i.message,sx:{"& img":{objectFit:"contain !important"}}})}})}),e.jsxs(n,{sx:{flexDirection:"column",gap:2,width:"100%"},children:[e.jsx(r,{fullWidth:!0,children:e.jsx(s,{...t("name"),label:"Nome",error:!!a.name,helperText:(h=a.name)==null?void 0:h.message,autoComplete:"off"})}),e.jsx(r,{fullWidth:!0,children:e.jsx(s,{...t("email"),label:"E-mail",error:!!a.email,helperText:(x=a.email)==null?void 0:x.message,autoComplete:"off"})}),e.jsx(r,{fullWidth:!0,children:e.jsx(b,{name:"phoneNumber",control:u,defaultValue:"+351",render:({field:o})=>{var i;return e.jsx(V,{...o,value:o.value||"+351",defaultCountry:"pt",label:"Contacto",variant:"outlined",fullWidth:!0,error:!!a.phoneNumber,helperText:(i=a.phoneNumber)==null?void 0:i.message,autoComplete:"off",disableDropdown:!0})}})})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,children:e.jsx(s,{...t("website"),label:"Site",autoComplete:"off"})})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,children:e.jsx(s,{...t("country"),label:"País",error:!!a.country,helperText:(p=a.country)==null?void 0:p.message,autoComplete:"off"})})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,children:e.jsx(s,{...t("city"),label:"Cidade",error:!!a.city,helperText:(f=a.city)==null?void 0:f.message,autoComplete:"off"})})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,children:e.jsx(s,{...t("locality"),label:"Localidade",error:!!a.locality,helperText:(j=a.locality)==null?void 0:j.message,autoComplete:"off"})})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(n,{sx:{flexDirection:d?"column":"row",gap:2},children:[e.jsx(r,{fullWidth:!0,children:e.jsx(s,{...t("address"),label:"Morada",error:!!a.address,helperText:(g=a.address)==null?void 0:g.message,autoComplete:"off"})}),e.jsx(r,{sx:{width:d?"100%":"60%"},children:e.jsx(s,{...t("postalCode"),label:"Código Postal",error:!!a.postalCode,helperText:(C=a.postalCode)==null?void 0:C.message,autoComplete:"off"})})]})})]}),e.jsx(m,{sx:{marginLeft:"auto",padding:3},children:e.jsx(A,{loading:c.isPending,type:"submit",variant:"contained",children:"Atualizar Empresa"})})]})})]}):e.jsx(I,{variant:"h3",component:"h3",children:"Dados da empresa em falta!"})})})};export{O as default};
