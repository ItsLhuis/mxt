import{a6 as g,u as S,X as v,r as P,j as s,B as l,Y as r,Z as a,m as y,$ as m,a0 as h,a1 as C,a2 as E,a3 as R,a9 as b,a4 as B}from"./index-DjYwzy8o.js";import{d as T}from"./user-B-uUes6W.js";import{u as A}from"./useAuth-CoEWSEqt.js";import{A as k}from"./Alert-SruG8s_r.js";const W=()=>{var i,c;const{token:u}=g(),p=S(),{register:o,handleSubmit:x,formState:{errors:e},setError:z}=v({resolver:R(T)}),[t,f]=P.useState(""),{confirmResetPassword:n}=A(),w=async j=>{await n.mutateAsync({token:u,...j}).then(()=>{b("Senha alterada com sucesso!"),p("/auth/login")}).catch(d=>{if(d.error.code==="USR-013"||d.error.code==="USR-014"){f("O código foi usado ou expirado!");return}B("Erro ao alterar senha!")})};return s.jsxs(l,{children:[s.jsx(r,{variant:"h3",component:"h3",sx:{marginBottom:4,fontSize:"2.5rem !important"},children:"Mixtech"}),s.jsx(a,{sx:{gap:2,marginBottom:4},children:s.jsxs(a,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[s.jsx(r,{variant:"h4",component:"h4",children:"Esqueceu a sua senha?"}),s.jsx(r,{variant:"p",component:"p",children:"Crie uma nova senha de sua preferência!"})]})}),t&&s.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:s.jsx(l,{sx:{marginBottom:6},children:s.jsx(k,{severity:"error",elevation:1,children:t})})}),s.jsx("form",{onSubmit:x(w),children:s.jsxs(a,{sx:{gap:2},children:[s.jsx(m,{fullWidth:!0,children:s.jsx(h,{...o("newPassword"),type:"password",label:"Senha",error:!!e.newPassword,helperText:(i=e.newPassword)==null?void 0:i.message,autoComplete:"new-password"})}),s.jsx(m,{fullWidth:!0,children:s.jsx(h,{...o("confirmPassword"),type:"password",label:"Confirmar senha",error:!!e.confirmPassword,helperText:(c=e.confirmPassword)==null?void 0:c.message,autoComplete:"confirm-new-password"})}),s.jsx(C,{to:"/auth/login",style:{alignSelf:"flex-end",fontSize:"13px"},children:"Iniciar sessão"}),s.jsx(E,{loading:n.isPending,type:"submit",variant:"contained",children:"Atualizar Senha"})]})})]})};export{W as default};
