import{r as u,X as j,a4 as A,av as r,b as z,j as a,aA as S,B as o,a8 as b,bm as C,a3 as E,aa as U,a5 as $}from"./index-BzXGUPkY.js";import{h as w}from"./user-BY9cR1Va.js";const F=({user:e,isLoading:g,isError:f})=>{const t=!g&&!f,[n,i]=u.useState(!1),{control:h,handleSubmit:v,formState:{errors:d},reset:x}=j({resolver:A(w),defaultValues:{avatar:t?`${r}/users/${e.id}/avatar?size=200`:""}});u.useEffect(()=>{t&&e&&x({avatar:`${r}/users/${e.id}/avatar?size=200`})},[t]);const{updateUserProfileAvatar:l}=z(),p=async s=>{!t||!n||l.mutateAsync(s).then(()=>{i(!1),U("Avatar atualizado com sucesso!")}).catch(()=>$("Erro ao atualizar avatar!"))};return a.jsxs(a.Fragment,{children:[a.jsx(S,{title:"Avatar",description:"Atualizar avatar do utilizador"}),a.jsx(o,{sx:{padding:3,paddingLeft:0},children:a.jsx("form",{onSubmit:v(p),children:a.jsxs(o,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:2},children:[a.jsx(b,{name:"avatar",control:h,defaultValue:"",render:({field:s})=>{var c;return a.jsx(C,{size:100,image:s.value,onChange:m=>{s.onChange(m),m!==`${r}/users/${e==null?void 0:e.id}/avatar?size=200`&&i(!0)},alt:t?e.username:"",name:t?e.username:"",loading:!t,error:!!d.logo,errorMessage:(c=d.logo)==null?void 0:c.message})}}),a.jsx(o,{sx:{marginLeft:"auto"},children:a.jsx(E,{loading:l.isPending,type:"submit",variant:"contained",disabled:!t||!n,children:"Atualizar Avatar"})})]})})})]})};export{F as default};
