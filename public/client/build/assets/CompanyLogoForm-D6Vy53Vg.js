import{r as h,j as o,H as f,B as t,I as j,aW as m,L as y,aj as L,s as C}from"./index-D5KQThVv.js";import{u as S,C as b,t as z}from"./index-DCkCG_3f.js";import{c as w}from"./company-Dw530rAs.js";import{u as E}from"./useCompany-C_ZHSGFP.js";import"./isPossiblePhoneNumber-DES16dOz.js";const H=({company:F,isLoading:g,isError:p})=>{const e=!g&&!p,[s,n]=h.useState(!1),{control:d,handleSubmit:u,formState:{errors:r}}=S({resolver:z(w),defaultValues:{logo:`${m}/company/logo?size=180`}}),{updateCompanyLogo:i}=E(),x=async a=>{!e||!s||i.mutateAsync(a).then(()=>{n(!1),L("Logotipo atualizado com sucesso!")}).catch(()=>C("Erro ao atualizar logotipo!"))};return o.jsxs(o.Fragment,{children:[o.jsx(f,{title:"Logotipo",description:"Atualizar logotipo da empresa"}),o.jsx(t,{sx:{padding:3,paddingLeft:0},children:o.jsx("form",{onSubmit:u(x),children:o.jsxs(t,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:2},children:[o.jsx(b,{name:"logo",control:d,defaultValue:"",render:({field:a})=>{var l;return o.jsx(j,{circular:!1,size:100,image:a.value,onChange:c=>{a.onChange(c),c!==`${m}/company/logo?size=180`&&n(!0)},loading:!e,error:!!r.logo,helperText:(l=r.logo)==null?void 0:l.message,sx:{"& img":{objectFit:"contain !important"}}})}}),o.jsx(t,{sx:{marginLeft:"auto"},children:o.jsx(y,{loading:i.isPending,type:"submit",variant:"contained",disabled:!e||!s,children:"Atualizar Logotipo"})})]})})})]})};export{H as default};
