import{O as k,as as A,X as B,r as P,aN as I,j as e,az as M,Z as x,ac as h,aw as d,ao as o,$ as n,a0 as u,a7 as _,bi as G,B as g,a2 as H,a3 as O,bl as Q,a9 as R,a4 as U}from"./index-DjYwzy8o.js";const Z=({company:t,isLoading:S,isError:W})=>{var C,b,L,w,f,p,v;const r=!S&&!W,N=k(),j=A(N.breakpoints.down("sm")),{control:E,register:l,handleSubmit:F,formState:{errors:s},reset:D,watch:z}=B({resolver:O(Q),defaultValues:{name:"",email:"",phoneNumber:"+351",website:"",city:"",country:"",locality:"",address:"",postalCode:""}}),a={name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",phoneNumber:(t==null?void 0:t.phone_number)||"+351",website:(t==null?void 0:t.website)||"",city:(t==null?void 0:t.city)||"",country:(t==null?void 0:t.country)||"",locality:(t==null?void 0:t.locality)||"",address:(t==null?void 0:t.address)||"",postalCode:(t==null?void 0:t.postal_code)||""},m=()=>{const i=z();return i.name===a.name&&i.email===a.email&&i.phoneNumber===a.phoneNumber&&i.website===a.website&&i.city===a.city&&i.country===a.country&&i.locality===a.locality&&i.address===a.address&&i.postalCode===a.postalCode};P.useEffect(()=>{r&&t&&D(a)},[r,t]);const{updateCompany:c}=I(),V=async i=>{!r||m()||await c.mutateAsync(i).then(()=>R("Empresa atualizada com sucesso!")).catch(()=>U("Erro ao atualizar empresa!"))};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Dados",description:"Atualizar dados da empresa"}),e.jsx("form",{onSubmit:F(V),children:e.jsxs(x,{sx:{paddingTop:1},children:[e.jsxs(h,{container:!0,spacing:2,sx:{paddingInline:3},children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(x,{sx:{alignItems:"center",flexDirection:j?"column":"row",gap:2},children:e.jsxs(x,{sx:{flexDirection:"column",gap:2,width:"100%"},children:[e.jsx(d,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(n,{fullWidth:!0,children:e.jsx(u,{...l("name"),label:"Nome",error:!!s.name,helperText:(C=s.name)==null?void 0:C.message})})}),e.jsx(d,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(n,{fullWidth:!0,children:e.jsx(u,{...l("email"),label:"E-mail",error:!!s.email,helperText:(b=s.email)==null?void 0:b.message})})}),e.jsx(d,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(n,{fullWidth:!0,children:e.jsx(_,{name:"phoneNumber",control:E,defaultValue:"+351",render:({field:i})=>{var T;return e.jsx(G,{...i,value:i.value||"+351",defaultCountry:"pt",label:"Contacto",variant:"outlined",fullWidth:!0,error:!!s.phoneNumber,helperText:(T=s.phoneNumber)==null?void 0:T.message,disableDropdown:!0})}})})})]})})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(d,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(n,{fullWidth:!0,children:e.jsx(u,{...l("website"),label:"Site"})})})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(d,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(n,{fullWidth:!0,children:e.jsx(u,{...l("country"),label:"País",error:!!s.country,helperText:(L=s.country)==null?void 0:L.message})})})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(d,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(n,{fullWidth:!0,children:e.jsx(u,{...l("city"),label:"Cidade",error:!!s.city,helperText:(w=s.city)==null?void 0:w.message})})})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(d,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(n,{fullWidth:!0,children:e.jsx(u,{...l("locality"),label:"Localidade",error:!!s.locality,helperText:(f=s.locality)==null?void 0:f.message})})})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(x,{sx:{flexDirection:j?"column":"row",gap:2},children:[e.jsx(g,{sx:{width:"100%"},children:e.jsx(d,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(n,{fullWidth:!0,children:e.jsx(u,{...l("address"),label:"Morada",error:!!s.address,helperText:(p=s.address)==null?void 0:p.message})})})}),e.jsx(g,{sx:{width:j?"100%":"60%"},children:e.jsx(d,{isLoading:!r,LoadingComponent:e.jsx(o,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(n,{fullWidth:!0,children:e.jsx(u,{...l("postalCode"),label:"Código Postal",error:!!s.postalCode,helperText:(v=s.postalCode)==null?void 0:v.message})})})})]})})]}),e.jsx(g,{sx:{marginLeft:"auto",padding:3},children:e.jsx(H,{loading:c.isPending,type:"submit",variant:"contained",sx:{marginLeft:"auto"},disabled:!r||m(),children:"Atualizar Empresa"})})]})})]})};export{Z as default};
