import{r as u,j as r,b2 as E,B as b,F as T,T as j,ab as S,s as B}from"./index-C9HasOiM.js";import{u as M,t as g}from"./index-BTi6rd4V.js";import{b as w}from"./equipment-D4V42Xnu.js";import{u as A}from"./useEquipment-ClzBGdbo.js";import"./equipment-DQ8Bx2dX.js";const v=({open:e,onClose:t})=>{var m;const{register:c,handleSubmit:d,formState:{errors:n},setError:f,reset:a}=M({resolver:g(w)}),s=u.useRef(null);u.useEffect(()=>{if(!e){a();return}const o=setTimeout(()=>{e&&s.current&&s.current.focus()},100);return()=>clearTimeout(o)},[e]);const{createNewEquipmentBrand:l}=A(),p=async o=>new Promise((x,i)=>{l.mutateAsync(o).then(()=>{t(),S("Marca adicionada com sucesso!"),a(),x()}).catch(h=>{if(h.error.code==="EQU-007"){f("name",{type:"manual",message:"Nome jรก existente"}),i();return}t(),B("Erro ao adicionar marca!"),a(),i()})});return r.jsx(E,{mode:"form",title:"Adicionar Marca",open:e,onClose:t,submitButtonText:"Adicionar Marca",onSubmit:d(p),children:r.jsx(b,{sx:{padding:3},children:r.jsx(T,{fullWidth:!0,children:r.jsx(j,{...c("name"),label:"Nome",error:!!n.name,helperText:(m=n.name)==null?void 0:m.message,autoComplete:"off",inputRef:s})})})})};export{v as default};
