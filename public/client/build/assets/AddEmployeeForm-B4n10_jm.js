import{u as T,S as b,X as C,b as y,j as e,Z as l,a as E,aA as F,aB as P,a0 as t,a1 as u,aC as B,ah as I,ai as N,aD as R,a8 as U,aE as W,Y as w,B as k,a3 as z,a4 as D,aa as L,a5 as V}from"./index-BCLPk4lW.js";import{e as G}from"./user-Bho16HCH.js";import{S as M}from"./Switch-Bdik7-NQ.js";const H=(d=16)=>{const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+~";let i="";for(let s=0,c=n.length;s<d;++s)i+=n.charAt(Math.floor(Math.random()*c));return i},q=()=>{var p,j,g,f;const d=T(),{role:n}=b(),{control:i,register:s,handleSubmit:c,setValue:v,formState:{errors:a},setError:m,watch:h}=C({resolver:D(G),defaultValues:{isActive:!0}}),S=()=>{const r=H();v("password",r)},{createNewUser:x}=y(),A=async r=>{await x.mutateAsync(r).then(()=>{d("/employee/list"),L("Funcionário adicionado com sucesso!")}).catch(o=>{o.error.code==="USR-001"?m("username",{type:"manual",message:"Nome de utilizador já existente"}):o.error.code==="USR-002"?m("email",{type:"manual",message:"E-mail já existente"}):V("Erro ao adicionar funcionário!")})};return e.jsx("form",{onSubmit:c(A),children:e.jsx(l,{sx:{marginTop:3,gap:3},children:e.jsxs(E,{elevation:1,children:[e.jsx(F,{title:"Detalhes",description:"Nome de utilizador, email, senha,... do funcionário",icon:e.jsx(P,{})}),e.jsxs(l,{sx:{padding:3,gap:2},children:[e.jsx(t,{fullWidth:!0,children:e.jsx(u,{...s("username"),label:"Nome de utilizador",error:!!a.username,helperText:(p=a.username)==null?void 0:p.message})}),e.jsx(t,{fullWidth:!0,children:e.jsx(u,{...s("email"),label:"E-mail",error:!!a.email,helperText:(j=a.email)==null?void 0:j.message})}),e.jsx(t,{fullWidth:!0,children:e.jsx(u,{...s("password"),label:"Senha",error:!!a.password,helperText:(g=a.password)==null?void 0:g.message,InputLabelProps:{shrink:((f=h("password"))==null?void 0:f.length)>0},InputProps:{endAdornment:e.jsx(B,{position:"end",children:e.jsx(I,{title:"Gerar senha",children:e.jsx(N,{edge:"end",onClick:S,children:e.jsx(R,{})})})})}})}),e.jsx(t,{fullWidth:!0,children:e.jsx(U,{name:"role",control:i,defaultValue:"",render:({field:r})=>{var o;return e.jsx(W,{ref:r.ref,label:"Cargo",data:["",...n!=="Administrador"?["Administrador"]:[],"Funcionário"],value:r.value,onChange:r.onChange,error:!!a.role,helperText:(o=a.role)==null?void 0:o.message})}})}),e.jsx(t,{fullWidth:!0,children:e.jsxs(l,{sx:{flexDirection:"row",alignItems:"center"},children:[e.jsx(M,{...s("isActive"),defaultChecked:!0}),e.jsxs(l,{children:[e.jsx(w,{variant:"p",component:"p",children:"Estado da conta"}),e.jsx(w,{variant:"p",component:"p",sx:{color:"var(--outline)"},children:h("isActive")?"Conta ativa":"Conta inativa"})]})]})}),e.jsx(k,{sx:{marginLeft:"auto",marginTop:1},children:e.jsx(z,{loading:x.isPending,type:"submit",variant:"contained",children:"Adicionar Funcionário"})})]})]})})})};export{q as default};
