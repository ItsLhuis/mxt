import{r as m,j as e,a$ as P,B as R,F as w,T as B,aj as z,s as M}from"./index-QasZhORg.js";import{u as N,b as V,t as k}from"./index-CO9l3Whn.js";import{o as v}from"./repair-zwE_KJbM.js";import{u as A}from"./useRepair-CKNzoFdU.js";import"./repair-wd4kSyCe.js";const q=({entryReportedIssue:r,open:t,onClose:a})=>{var l,c;const o=m.useRef(null);m.useEffect(()=>{if(!t)return;const i=setTimeout(()=>{t&&o.current&&o.current.focus()},100);return()=>clearTimeout(i)},[t]);const{control:f,register:p,handleSubmit:h,getValues:x,formState:{errors:n},setError:E,reset:s}=N({resolver:k(v)}),b={name:(r==null?void 0:r.name)||""},{isDirty:T}=V({control:f}),u=()=>!T;m.useEffect(()=>{r&&s(b)},[r]);const{updateEntryReportedIssue:g}=A(),j=async i=>{if(!u())return new Promise((S,d)=>{g.mutateAsync({entryReportedIssueId:r.id,...i}).then(()=>{a(),z("Problema reportado atualizado com sucesso!"),s(),S()}).catch(F=>{if(F.error.code==="REP-013"){E("name",{type:"manual",message:"Nome jÃ¡ existente"}),d();return}a(),M("Erro ao atualizar problema reportado!"),s(),d()})})};return e.jsx(P,{mode:"form",title:"Editar Problema Reportado",open:t,onClose:a,submitButtonText:"Editar Problema Reportado",onSubmit:h(j),disabled:u(),children:e.jsx(R,{sx:{padding:3},children:e.jsx(w,{fullWidth:!0,children:e.jsx(B,{...p("name"),label:"Nome",error:!!n.name,helperText:(l=n.name)==null?void 0:l.message,autoComplete:"off",inputRef:o,InputLabelProps:{shrink:((c=x("name"))==null?void 0:c.length)>0}})})})})};export{q as default};
