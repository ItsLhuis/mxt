import{r as m,j as e,aU as P,B as R,F as w,T as B,ak as k,s as z}from"./index-_NktdslD.js";import{u as M,b as N,t as U}from"./index-8QsUXVhp.js";import{o as V}from"./repair-j_MUsWAD.js";import{u as v}from"./useRepair-MRRzMLfz.js";const q=({entryReportedIssue:r,open:t,onClose:a})=>{var l,c;const o=m.useRef(null);m.useEffect(()=>{if(!t)return;const i=setTimeout(()=>{t&&o.current&&o.current.focus()},100);return()=>clearTimeout(i)},[t]);const{control:f,register:p,handleSubmit:h,getValues:x,formState:{errors:n},setError:E,reset:s}=M({resolver:U(V)}),b={name:(r==null?void 0:r.name)||""},{isDirty:T}=N({control:f}),u=()=>!T;m.useEffect(()=>{r&&s(b)},[r]);const{updateEntryReportedIssue:g}=v(),S=async i=>{if(!u())return new Promise((j,d)=>{g.mutateAsync({entryReportedIssueId:r.id,...i}).then(()=>{a(),k("Problema reportado atualizado com sucesso!"),s(),j()}).catch(F=>{if(F.error.code==="REP-013"){E("name",{type:"manual",message:"Nome jÃ¡ existente"}),d();return}a(),z("Erro ao atualizar problema reportado!"),s(),d()})})};return e.jsx(P,{mode:"form",title:"Editar Problema Reportado",open:t,onClose:a,submitButtonText:"Editar Problema Reportado",onSubmit:h(S),disabled:u(),children:e.jsx(R,{sx:{padding:3},children:e.jsx(w,{fullWidth:!0,children:e.jsx(B,{...p("name"),label:"Nome",error:!!n.name,helperText:(l=n.name)==null?void 0:l.message,autoComplete:"off",inputRef:o,InputLabelProps:{shrink:((c=x("name"))==null?void 0:c.length)>0}})})})})};export{q as default};
