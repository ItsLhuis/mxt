import{b as r,r as O,j as e,B as D,G as b,aK as W,f as A,g as L,i as H,e as $,S as i,k as z,l as s,n as m,a as U,y as k,T as X,I as J,p as K,aj as Q,ak as q,al as _}from"./index-CeqpX1Nb.js";import{D as E,a as N}from"./DatePicker-DLZX15Xt.js";import{f as C,a as F}from"./date-Cygk3yQx.js";import{f as B}from"./currency-DMbMY7YD.js";import{f as Y}from"./phone-CUaemfYv.js";import{T as Z,a as ee}from"./Tabs-BIqsdxAy.js";import{M as ae}from"./MoreVert-2tfujLn5.js";const j=(t,d,n)=>!d||Array.isArray(d)&&d.length===0?null:e.jsxs(D,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1,border:"1px solid var(--elevation-level5)",borderRadius:2,padding:1},children:[e.jsxs(s,{variant:"p",component:"p",fontWeight:600,children:[t,":"]}),Array.isArray(d)?e.jsx(i,{sx:{display:"flex",flexFlow:"wrap",gap:1},children:d.map((h,x)=>e.jsx(m,{label:h,onDelete:()=>n(t),sx:{"& .MuiChip-label":{whiteSpace:"normal",wordBreak:"break-all",padding:"8px 14px"},height:"auto"}},x))}):e.jsx(m,{label:d,onDelete:()=>n(t),sx:{"& .MuiChip-label":{whiteSpace:"normal",padding:"8px 14px"},height:"auto"}})]}),V=({filters:t,tabsInfo:d,handleResetSelectedTab:n,handleRemoveService:h,handleSelectedServiceItemsChange:x,handleRemoveDate:S,handleStartDateChange:w,handleEndDateChange:R,handleRemoveSearchInpuValue:T,handleSearchInputChange:P,handleClearFilters:y})=>{const[c,g]=O.useState(""),v=u=>{const f=u.target.value;g(f)};O.useEffect(()=>{const u=setTimeout(()=>{P(c)},500);return()=>clearTimeout(u)},[c]);const I=["Reparação","Configuração de Redes","Backup e Recuperação de Dados","Consultoria","Manutenção Preventiva","Venda de Produtos","Formação","Suporte Técnico Remoto","Acessórios e Complementos"],p=()=>{const{selectedTab:u,selectedServiceItems:f,startDate:a,endDate:l}=t;return u!==0||f.length>0||a&&l&&l>=a||c.trim()!==""};return e.jsxs(D,{sx:{padding:3,paddingTop:1},children:[e.jsxs(b,{container:!0,spacing:2,children:[e.jsx(b,{item:!0,xs:12,md:12,lg:2,children:e.jsx(W,{label:"Serviço",data:I,selectedItems:t.selectedServiceItems,onChange:x})}),e.jsx(b,{item:!0,xs:12,md:12,lg:2,children:e.jsx(A,{fullWidth:!0,children:e.jsx(E,{label:"Data inicial",value:t.startDate,onChange:w})})}),e.jsx(b,{item:!0,xs:12,md:12,lg:2,children:e.jsx(A,{fullWidth:!0,children:e.jsx(E,{label:"Data final",value:t.endDate,minDate:t.startDate,onChange:R})})}),e.jsx(b,{item:!0,xs:12,md:12,lg:6,children:e.jsx(A,{fullWidth:!0,children:e.jsx(L,{name:"search",label:"Pesquisar",value:c,onChange:v,autoComplete:"off",placeholder:"Pesquise o nome do cliente ou número da fatura...",InputProps:{startAdornment:e.jsx(H,{position:"start",children:e.jsx($,{})})}})})})]}),p()&&e.jsx(i,{sx:{marginTop:2,display:"flex",flexDirection:"column",gap:2},children:e.jsxs(i,{sx:{display:"flex",flexFlow:"wrap",alignItems:"center",gap:1,overflow:"hidden",overflowX:"auto"},children:[t.selectedTab!==0&&j("Estado",d[t.selectedTab].name,n),j("Serviço",t.selectedServiceItems,h),t.startDate&&t.endDate&&j("Data",C(t.startDate)+" - "+C(t.endDate),S),c.trim()!==""&&j("Pesquisar",c,()=>{g(""),T()}),e.jsx(z,{startIcon:e.jsx(N,{sx:{color:"rgb(211, 47, 47)"}}),color:"error",onClick:()=>{g(""),y()},children:"Limpar"})]})})]})};V.propTypes={filters:r.shape({selectedTab:r.number.isRequired,selectedServiceItems:r.array.isRequired,startDate:r.instanceOf(Date),endDate:r.instanceOf(Date)}),tabsInfo:r.array.isRequired,handleResetSelectedTab:r.func.isRequired,handleRemoveService:r.func.isRequired,handleSelectedServiceItemsChange:r.func.isRequired,handleRemoveDate:r.func.isRequired,handleStartDateChange:r.func.isRequired,handleEndDateChange:r.func.isRequired,handleRemoveSearchInpuValue:r.func.isRequired,handleSearchInputChange:r.func.isRequired,handleClearFilters:r.func.isRequired};const de=()=>{const[t,d]=O.useState({selectedTab:0,selectedServiceItems:[],startDate:null,endDate:null,searchValue:""}),n=a=>{d(K(t,l=>{Object.assign(l,a)}))},h=()=>{n({selectedTab:0})},x=(a,l)=>{n({selectedTab:l})},S=a=>{const l=[...t.selectedServiceItems];l.splice(a,1),n({selectedServiceItems:l})},w=a=>{n({selectedServiceItems:a})},R=()=>{n({startDate:null,endDate:null})},T=a=>{n({startDate:a})},P=a=>{n({endDate:a})},y=()=>{n({searchValue:""})},c=a=>{n({searchValue:a})},g=()=>{n({selectedTab:0,selectedServiceItems:[],startDate:null,endDate:null,searchValue:""})},v=[{id:0,name:"Total",total:100,color:"primary"},{id:1,name:"Pago",total:65,color:"success"},{id:2,name:"Pendente",total:20,color:"warning"},{id:3,name:"Atrasado",total:10,color:"error"},{id:4,name:"Rascunho",total:5,color:"default"}],I=a=>({id:`invoice-list-tab-${a}`,"aria-controls":`invoice-list-tabpanel-${a}`}),p=(a,l)=>{let M=[];a==="Despesa"?M=[{id:"action",label:"Ação",align:"left",sortable:!0,renderComponent:({data:o})=>e.jsx(m,{label:o})}]:a==="Rendimento"&&(M=[{id:"customer",label:"Cliente",align:"left",sortable:!1,renderComponent:({data:o})=>e.jsx(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:e.jsxs(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(s,{variant:"p",component:"p",fontWeight:500,children:o.customerName}),e.jsx(s,{variant:"p",component:"p",color:"var(--outline)",children:Y(o.customerPhoneNumber)})]})})},{id:"type",label:"Tipo",align:"left",sortable:!0,renderComponent:({data:o})=>e.jsx(m,{label:o})},{id:"status",label:"Estado",align:"left",sortable:!0,renderComponent:({data:o})=>e.jsx(m,{label:o,color:o==="Pago"?"success":o==="Por pagar"?"error":"warning"})}]);const G=[{id:"user",label:"Utilizador",align:"left",sortable:!1,renderComponent:({data:o})=>e.jsxs(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:[e.jsx(Q,{alt:o.name,src:o.profilePic,sx:{backgroundColor:`${q(o.name)} !important`,color:_(q(o.name))},children:o.name.charAt(0)}),e.jsxs(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(s,{variant:"p",component:"p",fontWeight:500,children:o.name}),e.jsx(s,{variant:"p",component:"p",color:"var(--outline)",children:o.role})]})]})},{id:"date",label:"Data",align:"left",sortable:!0,renderComponent:({data:o})=>e.jsxs(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(s,{variant:"p",component:"p",fontWeight:500,children:C(o)}),e.jsx(s,{variant:"p",component:"p",color:"var(--outline)",children:F(o)})]})},...M];return e.jsxs(i,{sx:{color:"var(--onSurface)",margin:3},children:[e.jsx(s,{variant:"h6",component:"h6",marginBottom:3,children:"Histórico"}),e.jsx(D,{sx:{border:"1px solid var(--elevation-level5)",borderRadius:2,overflow:"hidden"},children:e.jsx(k,{columns:G,data:l})})]})},u=[{id:"description",label:"Descrição",align:"left",sortable:!0},{id:"date",label:"Data",align:"left",sortable:!0,renderComponent:({data:a})=>e.jsxs(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(s,{variant:"p",component:"p",fontWeight:500,children:C(a)}),e.jsx(s,{variant:"p",component:"p",color:"var(--outline)",children:F(a)})]})},{id:"amount",label:"Quantidade",align:"left",sortable:!0},{id:"value",label:"Valor",align:"left",sortable:!0,formatter:B},{id:"total",label:"Total",align:"left",sortable:!0,formatter:B},{id:"type",label:"Tipo",align:"left",sortable:!0,renderComponent:({data:a})=>e.jsx(m,{label:a,color:a==="Rendimento"?"success":a==="Despesa"?"error":"warning"})},{id:"moreOptions",align:"right",sortable:!1,renderComponent:({data:a})=>e.jsx(X,{title:"Mais Opções",placement:"bottom",sx:{margin:-1},children:e.jsx(J,{onClick:()=>console.log(a),children:e.jsx(ae,{})})})}],f=[{id:1,description:"Smartphone Samsung Galaxy S22 Ultra",date:new Date("Tue Mar 05 2024 09:24:24 GMT+0000 (Hora padrão da Europa Ocidental)"),amount:1,value:1199,total:1199,type:"Rendimento (Pendente)",moreOptions:"ola",expandableContent:()=>p("Rendimento",[{id:2,user:{name:"Luis Rodrigues",role:"Chefe",profilePic:null},date:new Date,customer:{customerName:"João Silva",customerPhoneNumber:"912832943"},type:"Reparação",status:"Por pagar"}])},{id:2,description:"Laptop Apple MacBook Pro 14 M1 Pro",date:new Date,amount:1,value:1999,total:1999,type:"Despesa",moreOptions:"ola",expandableContent:()=>p("Despesa",[{id:2,user:{name:"Gonçalo Pinto",role:"Funcionário",profilePic:null},date:new Date("Tue Mar 05 2024 9:24:24 GMT+0000 (Hora padrão da Europa Ocidental)"),action:"Atualização"},{id:1,user:{name:"Luis Rodrigues",role:"Administrador",profilePic:null},date:new Date("Tue Mar 03 2024 10:10:24 GMT+0000 (Hora padrão da Europa Ocidental)"),action:"Criação"}])},{id:3,description:"Smartwatch Apple Watch Series 7",date:new Date,amount:1,value:399,total:399,type:"Despesa",moreOptions:"ola",expandableContent:()=>p("Despesa",[{id:4,user:{name:"Luis Rodrigues",role:"Administrador",profilePic:null},date:new Date,action:"Criação"}])},{id:4,description:"Formatação Apple MacBook Pro 14 M1 Pro",date:new Date,amount:1,value:49,total:49,type:"Rendimento",moreOptions:"ola",expandableContent:()=>p("Rendimento",[{id:3,user:{name:"Luis Rodrigues",role:"Administrador",profilePic:null},date:new Date,customer:{customerName:"Maria Santos",customerPhoneNumber:"912832943"},type:"Reparação",status:"Pago"},{id:4,user:{name:"Ana Silva",role:"Funcionário",profilePic:null},date:new Date("Tue Mar 03 2024 10:10:24 GMT+0000 (Hora padrão da Europa Ocidental)"),customer:{customerName:"Maria Santos",customerPhoneNumber:"912832943"},type:"Reparação",status:"Por pagar"}])},{id:5,description:"Câmera digital Sony Alpha 7 IV",date:new Date,amount:1,value:2499,total:2499,type:"Rendimento",moreOptions:"ola",expandableContent:()=>p("Rendimento",[{id:3,user:{name:"Luis Rodrigues",role:"Administrador",profilePic:null},date:new Date,customer:{customerName:"Maria Santos",customerPhoneNumber:"912832943"},type:"Reparação",status:"Pago"},{id:4,user:{name:"Xavier Silva",role:"Funcionário",profilePic:null},date:new Date("Tue Mar 03 2024 10:10:24 GMT+0000 (Hora padrão da Europa Ocidental)"),customer:{customerName:"Maria Santos",customerPhoneNumber:"912832943"},type:"Reparação",status:"Por pagar"}])}];return e.jsx(U,{elevation:1,children:e.jsxs(D,{sx:{marginTop:3,paddingBottom:2},children:[e.jsx(Z,{value:t.selectedTab,onChange:x,"aria-label":"settings-tabs",variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,sx:{borderBottom:"1px solid var(--elevation-level5)",padding:"0 24px"},children:v.map(a=>e.jsx(ee,{label:e.jsxs(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:[e.jsx(s,{variant:"p",children:a.name}),e.jsx(m,{label:a.total,color:a.color})]}),...I(a.name),disableRipple:!0},a.id))}),e.jsx(V,{filters:t,tabsInfo:v,handleResetSelectedTab:h,handleRemoveService:S,handleSelectedServiceItemsChange:w,handleRemoveDate:R,handleStartDateChange:T,handleEndDateChange:P,handleRemoveSearchInpuValue:y,handleSearchInputChange:c,handleClearFilters:g}),e.jsx(k,{columns:u,data:f,mode:"datatable",actions:[{icon:e.jsx(N,{}),title:"Eliminar",onClick:()=>console.log()}]})]})})};export{de as default};
