import{r as u,a_ as r,q as j,j as a,H as A,B as o,I as z,L as S,ab as b,s as C}from"./index-C9HasOiM.js";import{u as E,t as U,C as $}from"./index-BTi6rd4V.js";import{h as w}from"./user-C-rtefft.js";import"./isPossiblePhoneNumber-C2Df4Gz7.js";const I=({user:e,isLoading:f,isError:h})=>{const t=!f&&!h,[i,n]=u.useState(!1),{control:x,handleSubmit:g,formState:{errors:d},reset:v}=E({resolver:U(w),defaultValues:{avatar:t?`${r}/users/${e.id}/avatar?size=200`:""}});u.useEffect(()=>{t&&e&&v({avatar:`${r}/users/${e.id}/avatar?size=200`})},[t]);const{updateUserProfileAvatar:l}=j(),p=async s=>{!t||!i||l.mutateAsync(s).then(()=>{n(!1),b("Avatar atualizado com sucesso!")}).catch(()=>C("Erro ao atualizar avatar!"))};return a.jsxs(a.Fragment,{children:[a.jsx(A,{title:"Avatar",description:"Atualizar avatar do utilizador"}),a.jsx(o,{sx:{padding:3,paddingLeft:0},children:a.jsx("form",{onSubmit:g(p),children:a.jsxs(o,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:2},children:[a.jsx($,{name:"avatar",control:x,defaultValue:"",render:({field:s})=>{var c;return a.jsx(z,{size:100,image:s.value,onChange:m=>{s.onChange(m),m!==`${r}/users/${e==null?void 0:e.id}/avatar?size=200`&&n(!0)},alt:t?e.username:"",name:t?e.username:"",loading:!t,error:!!d.logo,helperText:(c=d.logo)==null?void 0:c.message})}}),a.jsx(o,{sx:{marginLeft:"auto"},children:a.jsx(S,{loading:l.isPending,type:"submit",variant:"contained",disabled:!t||!i,children:"Atualizar Avatar"})})]})})})]})};export{I as default};
