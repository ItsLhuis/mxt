import{r as i,j as r,a$ as S,B as F,F as w,T as B,aj as P,s as z}from"./index-QasZhORg.js";import{u as M,b as N,t as V}from"./index-CO9l3Whn.js";import{o as k}from"./repair-zwE_KJbM.js";import{u as v}from"./useRepair-CKNzoFdU.js";import"./repair-wd4kSyCe.js";const y=({interventionAccessoryUsed:e,open:t,onClose:a})=>{var l,c;const s=i.useRef(null);i.useEffect(()=>{if(!t)return;const n=setTimeout(()=>{t&&s.current&&s.current.focus()},100);return()=>clearTimeout(n)},[t]);const{control:f,register:p,handleSubmit:h,getValues:x,formState:{errors:m},setError:E,reset:o}=M({resolver:V(k)}),b={name:(e==null?void 0:e.name)||""},{isDirty:T}=N({control:f}),u=()=>!T;i.useEffect(()=>{e&&o(b)},[e]);const{updateInterventionAccessoryUsed:g}=v(),j=async n=>{if(!u())return new Promise((I,d)=>{g.mutateAsync({interventionAccessoryUsedId:e.id,...n}).then(()=>{a(),P("Acessório da intervenção atualizado com sucesso!"),o(),I()}).catch(R=>{if(R.error.code==="REP-019"){E("name",{type:"manual",message:"Nome já existente"}),d();return}a(),z("Erro ao atualizar acessório da intervenção!"),o(),d()})})};return r.jsx(S,{mode:"form",title:"Editar Acessório da Intervenção",open:t,onClose:a,submitButtonText:"Editar Acessório da Intervenção",onSubmit:h(j),disabled:u(),children:r.jsx(F,{sx:{padding:3},children:r.jsx(w,{fullWidth:!0,children:r.jsx(B,{...p("name"),label:"Nome",error:!!m.name,helperText:(l=m.name)==null?void 0:l.message,autoComplete:"off",inputRef:s,InputLabelProps:{shrink:((c=x("name"))==null?void 0:c.length)>0}})})})})};export{y as default};
