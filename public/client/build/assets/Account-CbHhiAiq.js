import{a as L,ae as P,r as v,j as e,o as b,S as w,ba as k,af as z,i as d,L as S,B as T,F as a,e as i,bb as B,bc as C}from"./index-EhwUJips.js";import{u as E}from"./useMutation-DNl7S0Hi.js";import{z as n,u as G,t as M}from"./index-CSb2kK5a.js";import{s as N}from"./toast-DW8d8zFw.js";import{G as r}from"./Grid-CfkyFqJg.js";import"./utils-km2FGkQ4.js";const U=n.object({username:n.string().trim().min(1,{message:"O nome de utilizador é obrigatório"}),name:n.string().trim().min(1,{message:"O nome é obrigatório"}),email:n.string().trim().min(1,{message:"O e-mail é obrigatório"}).email({message:"O e-mail é inválido"}),phone:n.string().trim().min(1,{message:"O telefone é obrigatório"}),country:n.string().trim().min(1,{message:"O país é obrigatório"}),address:n.string().trim().min(1,{message:"A morada é obrigatória"})}),Q=()=>{var u,h,g,p,j,f;const{register:t,handleSubmit:y,formState:{errors:s},setValue:D}=G({resolver:M(U)}),O=L(),{user:o,deleteUser:A}=P(),{mutateAsync:W,isPending:c}=E({mutationFn:async()=>(await new Promise(l=>setTimeout(l,500)),B().then(()=>A()))}),[F,x]=v.useState(null);v.useEffect(()=>{(async()=>{C(o.id,{size:120}).then(m=>x(m))})()},[o.id]);const I=l=>{const m={...l,image};setLoad(!0),setTimeout(()=>{console.log(m),Object.keys(s).length===0&&N("Salvo com sucesso!"),setLoad(!1)},1e3)};return e.jsxs(r,{container:!0,columnSpacing:3,children:[e.jsx(r,{item:!0,xs:12,md:12,lg:4,children:e.jsx(b,{elevation:1,children:e.jsxs(w,{sx:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",gap:2,padding:6},children:[e.jsx(k,{image:F,setImage:x,alt:o.username}),e.jsxs(z,{sx:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(d,{variant:"h4",component:"h4",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o.username}),e.jsx(d,{variant:"p",component:"p",sx:{color:"var(--outline)",fontWeight:600,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:.5},children:o.role})]}),e.jsx(S,{loading:c,variant:"contained",color:"error",onClick:async()=>{await W().then(()=>O("/auth/login"))},children:"Terminar Sessão"})]})})}),e.jsx(r,{item:!0,xs:12,md:12,lg:8,children:e.jsx(b,{elevation:1,sx:{marginTop:{xs:3,md:3,lg:0}},children:e.jsxs(T,{sx:{padding:3},children:[e.jsx(d,{variant:"h5",component:"h5",sx:{marginBottom:1},children:"Conta"}),e.jsx(T,{sx:{flexGrow:1},children:e.jsx("form",{onSubmit:y(I),children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(a,{fullWidth:!0,children:e.jsx(i,{...t("username"),label:"Nome de utilizador",error:!!s.username,helperText:(u=s.username)==null?void 0:u.message})})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(a,{fullWidth:!0,children:e.jsx(i,{...t("name"),label:"Nome",error:!!s.name,helperText:(h=s.name)==null?void 0:h.message})})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(a,{fullWidth:!0,children:e.jsx(i,{...t("email"),label:"E-mail",error:!!s.email,helperText:(g=s.email)==null?void 0:g.message})})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(a,{fullWidth:!0,children:e.jsx(i,{...t("phone"),label:"Telemóvel",error:!!s.phone,helperText:(p=s.phone)==null?void 0:p.message})})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(a,{fullWidth:!0,children:e.jsx(i,{...t("country"),label:"País",error:!!s.country,helperText:(j=s.country)==null?void 0:j.message})})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(a,{fullWidth:!0,children:e.jsx(i,{...t("address"),label:"Morada",error:!!s.address,helperText:(f=s.address)==null?void 0:f.message})})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(w,{spacing:3,sx:{alignItems:"flex-end"},children:[e.jsx(a,{fullWidth:!0,children:e.jsx(i,{...t("about"),label:"Sobre",multiline:!0,rows:5})}),e.jsx(S,{loading:c,type:"submit",variant:"contained",children:"Salvar Alterações"})]})})]})})})]})})})]})};export{Q as default};
