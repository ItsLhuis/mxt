import{a as I,ae as k,a$ as z,j as e,o as p,S as j,b0 as B,af as C,i as l,L as f,B as b,F as i,e as a}from"./index-B8VqKcfT.js";import{a as F}from"./useAuth-BjfgREbV.js";import{z as n,u as P,t as G}from"./index-DjkE-vAG.js";import{s as N}from"./toast-nIkMEXbO.js";import{G as r}from"./Grid-DIdDvuUh.js";import"./useMutation-BcC63Jxc.js";const U=n.object({username:n.string().trim().min(1,{message:"O nome de utilizador é obrigatório"}),name:n.string().trim().min(1,{message:"O nome é obrigatório"}),email:n.string().trim().min(1,{message:"O e-mail é obrigatório"}).email({message:"O e-mail é inválido"}),phone:n.string().trim().min(1,{message:"O telefone é obrigatório"}),country:n.string().trim().min(1,{message:"O país é obrigatório"}),address:n.string().trim().min(1,{message:"A morada é obrigatória"})}),H=()=>{var d,c,x,u,h,g;const{register:t,handleSubmit:v,formState:{errors:s},setValue:E}=P({resolver:G(U)}),w=I(),{user:o,deleteUser:S}=k(),{mutateAsync:T,isPending:m}=F(),y=()=>{T().then(()=>{S(),w("/auth/login")})},{data:O}=z(o.id,{quality:100,size:120,blur:0}),W=A=>{const L={...A,image};setLoad(!0),setTimeout(()=>{console.log(L),Object.keys(s).length===0&&N("Salvo com sucesso!"),setLoad(!1)},1e3)};return e.jsxs(r,{container:!0,columnSpacing:3,children:[e.jsx(r,{item:!0,xs:12,md:12,lg:4,children:e.jsx(p,{elevation:1,children:e.jsxs(j,{sx:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",gap:2,padding:6},children:[e.jsx(B,{image:O,setImage:()=>null,alt:o.username}),e.jsxs(C,{sx:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(l,{variant:"h4",component:"h4",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o.username}),e.jsx(l,{variant:"p",component:"p",sx:{color:"var(--outline)",fontWeight:600,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:.5},children:o.role})]}),e.jsx(f,{loading:m,variant:"contained",color:"error",onClick:y,children:"Terminar Sessão"})]})})}),e.jsx(r,{item:!0,xs:12,md:12,lg:8,children:e.jsx(p,{elevation:1,sx:{marginTop:{xs:3,md:3,lg:0}},children:e.jsxs(b,{sx:{padding:3},children:[e.jsx(l,{variant:"h5",component:"h5",sx:{marginBottom:1},children:"Conta"}),e.jsx(b,{sx:{flexGrow:1},children:e.jsx("form",{onSubmit:v(W),children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(i,{fullWidth:!0,children:e.jsx(a,{...t("username"),label:"Nome de utilizador",error:!!s.username,helperText:(d=s.username)==null?void 0:d.message})})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(i,{fullWidth:!0,children:e.jsx(a,{...t("name"),label:"Nome",error:!!s.name,helperText:(c=s.name)==null?void 0:c.message})})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(i,{fullWidth:!0,children:e.jsx(a,{...t("email"),label:"E-mail",error:!!s.email,helperText:(x=s.email)==null?void 0:x.message})})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(i,{fullWidth:!0,children:e.jsx(a,{...t("phone"),label:"Telemóvel",error:!!s.phone,helperText:(u=s.phone)==null?void 0:u.message})})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(i,{fullWidth:!0,children:e.jsx(a,{...t("country"),label:"País",error:!!s.country,helperText:(h=s.country)==null?void 0:h.message})})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(i,{fullWidth:!0,children:e.jsx(a,{...t("address"),label:"Morada",error:!!s.address,helperText:(g=s.address)==null?void 0:g.message})})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(j,{spacing:3,sx:{alignItems:"flex-end"},children:[e.jsx(i,{fullWidth:!0,children:e.jsx(a,{...t("about"),label:"Sobre",multiline:!0,rows:5})}),e.jsx(f,{loading:m,type:"submit",variant:"contained",children:"Salvar Alterações"})]})})]})})})]})})})]})};export{H as default};
