import{q as T,j as e,r as x,f as F,H as k,S as f,aZ as B,b6 as w,F as A,T as H,af as O,aP as P,ag as z,bg as D,B as U,L as V,a$ as R,aL as W,h as Z,b7 as $}from"./index-QasZhORg.js";import{u as q,b as G,t as J}from"./index-CO9l3Whn.js";import{c as K}from"./equipment-B12D_Uzf.js";import{u as N}from"./useClient-CbwQlijl.js";import{u as Q}from"./useEquipment-WRg0P-gF.js";import"./client-DIiuiTP8.js";const X=T(e.jsx("path",{d:"M3 13c0-2.45 1.76-4.47 4.08-4.91l-1.49 1.5L7 11l4-4.01L7 3 5.59 4.41l1.58 1.58v.06C3.7 6.46 1 9.42 1 13c0 3.87 3.13 7 7 7h3v-2H8c-2.76 0-5-2.24-5-5m10 0v7h9v-7zm7 5h-5v-3h5zM13 4h9v7h-9z"}),"MoveUp"),ie=({equipment:n,isLoading:g,isError:j})=>{var u,m,h;const a=!g&&!j,{control:v,handleSubmit:C,setValue:S,getValues:Y,formState:{errors:s},reset:b}=q({resolver:J(K)}),[i,o]=x.useState({isOpen:!1,client:{id:null,name:""}}),l=()=>{o(t=>({...t,isOpen:!0}))},y=()=>{o(t=>({...t,isOpen:!1}))},L=(t,r)=>{o({client:{id:t,name:r}}),S("clientId",t,{shouldDirty:!0})},I={clientId:((m=(u=n==null?void 0:n[0])==null?void 0:u.client)==null?void 0:m.id)||""},{isDirty:M}=G({control:v}),c=()=>!M;x.useEffect(()=>{a&&n&&n[0]&&(o({client:{id:n[0].client.id,name:n[0].client.name}}),b(I))},[a,n]);const{findAllClients:d}=N(),{transferEquipment:p}=Q(),E=async t=>{!a||c()||await p.mutateAsync({equipmentId:n[0].id,...t})};return e.jsxs(F,{elevation:1,children:[e.jsx(k,{title:"Transferir",description:"Mudar cliente do equipamento",icon:e.jsx(X,{})}),e.jsx("form",{onSubmit:C(E),children:e.jsxs(f,{sx:{padding:3,gap:2},children:[e.jsx(B,{isLoading:!a,LoadingComponent:e.jsx(w,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(A,{fullWidth:!0,children:e.jsx(H,{label:"Cliente",placeholder:"Selecione um cliente",value:i.client.name,onClick:l,InputProps:{readOnly:!0,startAdornment:e.jsx(O,{position:"start",children:e.jsx(P,{children:e.jsx(z,{onClick:l,children:e.jsx(D,{})})})})},error:!!s.clientId,helperText:(h=s.clientId)==null?void 0:h.message})})}),e.jsx(U,{sx:{marginLeft:"auto",marginTop:1},children:e.jsx(V,{loading:p.isPending,type:"submit",variant:"contained",color:"error",disabled:!a||c(),children:"Transferir Equipamento"})})]})}),e.jsx(R,{open:i.isOpen??!1,onClose:y,mode:"data",data:d.data??[],isLoading:d.isLoading,title:"Clientes",placeholder:"Pesquise por um cliente",buttonStructure:(t,r)=>e.jsx(W,{variant:"contained",color:"secondary",sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",padding:"16px !important",width:"100%",minHeight:"unset !important",border:2,borderColor:t.id===i.client.id?"var(--primary)":"var(--elevation-level3)",borderRadius:2,color:"var(--onSurface)",lineHeight:1.5,fontWeight:400,"&:hover":{borderColor:"var(--primary)"}},onClick:()=>{L(t.id,t.name),r()},children:e.jsxs(f,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(Z,{variant:"p",component:"p",sx:{wordBreak:"break-all",textAlign:"start"},children:t.name}),t.description&&e.jsx($,{fontSize:"small",title:t.description})]})})})]})};export{ie as default};
