import{X as g,r as v,j as e,B as c,Y as s,Z as t,m as S,$ as d,a0 as u,a1 as w,a2 as y,a3 as B}from"./index-DjYwzy8o.js";import{a as b}from"./user-B-uUes6W.js";import{u as E}from"./useAuth-CoEWSEqt.js";import{A as z}from"./Alert-SruG8s_r.js";const C=()=>{var l,m;const{register:o,handleSubmit:h,setFocus:p,formState:{errors:r}}=g({resolver:B(b)}),[a,n]=v.useState(""),{login:i}=E(),x=async j=>{await i.mutateAsync(j).catch(f=>{if(f.error.code==="USR-004"){n("Esta conta foi desativada. Por favor, entre em contacto com o suporte!");return}p("username"),n("Nome de utilizador ou senha inválidos!")})};return e.jsxs(c,{children:[e.jsx(s,{variant:"h3",component:"h3",sx:{marginBottom:4,fontSize:"2.5rem !important"},children:"Mixtech"}),e.jsx(t,{sx:{gap:2,marginBottom:4},children:e.jsxs(t,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e.jsx(s,{variant:"h4",component:"h4",children:"Iniciar Sessão"}),e.jsx(s,{variant:"p",component:"p",children:"Bem vindo de volta!"})]})}),a&&e.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:e.jsx(c,{sx:{marginBottom:6},children:e.jsx(z,{severity:"error",elevation:1,children:a})})}),e.jsx("form",{onSubmit:h(x),children:e.jsxs(t,{sx:{gap:2},children:[e.jsx(d,{fullWidth:!0,children:e.jsx(u,{...o("username"),label:"Nome de utilizador",error:!!r.username,helperText:(l=r.username)==null?void 0:l.message,autoComplete:"username"})}),e.jsx(d,{fullWidth:!0,children:e.jsx(u,{...o("password"),type:"password",label:"Senha",error:!!r.password,helperText:(m=r.password)==null?void 0:m.message,autoComplete:"current-password"})}),e.jsx(w,{to:"/auth/resetPassword/request",style:{alignSelf:"flex-end",fontSize:"13px"},children:"Esqueceu a sua senha?"}),e.jsx(y,{loading:i.isPending,type:"submit",variant:"contained",children:"Iniciar Sessão"})]})})]})};export{C as default};
