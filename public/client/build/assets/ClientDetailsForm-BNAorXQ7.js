import{r as S,j as e,f as L,H as F,V as v,S as E,aQ as T,a_ as D,F as w,T as y,b2 as P,B as k,L as z,aj as B,s as V}from"./index-mWc9gLhA.js";import{u as A,b as H,C as I,t as N}from"./index-COzNbWAj.js";import{c as R}from"./client-CXNig9IF.js";import{u as Q}from"./useClient-D52tlv0a.js";import"./isPossiblePhoneNumber-DES16dOz.js";import"./client-BRbWEP8n.js";const K=({client:s,isLoading:c,isError:p})=>{var d,m,l,u;const o=!c&&!p,{control:t,register:h,handleSubmit:x,getValues:g,formState:{errors:r},reset:j}=A({resolver:N(R)}),f={name:((d=s==null?void 0:s[0])==null?void 0:d.name)||"",description:((m=s==null?void 0:s[0])==null?void 0:m.description)||""},{isDirty:C}=H({control:t}),n=()=>!C;S.useEffect(()=>{o&&s&&s[0]&&j(f)},[o,s]);const{updateClient:i}=Q(),b=async a=>{!o||n()||await i.mutateAsync({clientId:s[0].id,...a,description:a.description===""?null:a.description}).then(()=>B("Cliente atualizado com sucesso!")).catch(()=>V("Erro ao atualizar cliente!"))};return e.jsxs(L,{elevation:1,children:[e.jsx(F,{title:"Detalhes",description:"Nome e descrição do cliente",icon:e.jsx(v,{})}),e.jsx("form",{onSubmit:x(b),children:e.jsxs(E,{sx:{padding:3,gap:2},children:[e.jsx(T,{isLoading:!o,LoadingComponent:e.jsx(D,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(w,{fullWidth:!0,children:e.jsx(y,{...h("name"),label:"Nome",error:!!r.name,helperText:(l=r.name)==null?void 0:l.message,autoComplete:"off",InputLabelProps:{shrink:((u=g("name"))==null?void 0:u.length)>0}})})}),e.jsx(I,{name:"description",control:t,render:({field:a})=>e.jsx(P,{label:"Descrição",value:a.value,onChange:a.onChange,isLoading:!o})}),e.jsx(k,{sx:{marginLeft:"auto",marginTop:1},children:e.jsx(z,{loading:i.isPending,type:"submit",variant:"contained",disabled:!o||n(),children:"Atualizar Detalhes"})})]})})]})};export{K as default};
