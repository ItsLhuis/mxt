import{r as S,j as e,f as L,H as F,W as v,S as E,aR as T,a$ as D,F as k,T as w,b3 as y,B as P,L as z,ak as B,s as R}from"./index-_NktdslD.js";import{u as A,b as H,C as I,t as N}from"./index-8QsUXVhp.js";import{c as V}from"./client-BHMlStuD.js";import{u as W}from"./useClient-B8aLe1Fc.js";import"./isPossiblePhoneNumber-DES16dOz.js";const K=({client:s,isLoading:c,isError:p})=>{var d,m,l,u;const a=!c&&!p,{control:t,register:h,handleSubmit:x,getValues:g,formState:{errors:r},reset:f}=A({resolver:N(V)}),j={name:((d=s==null?void 0:s[0])==null?void 0:d.name)||"",description:((m=s==null?void 0:s[0])==null?void 0:m.description)||""},{isDirty:C}=H({control:t}),n=()=>!C;S.useEffect(()=>{a&&s&&s[0]&&f(j)},[a,s]);const{updateClient:i}=W(),b=async o=>{!a||n()||await i.mutateAsync({clientId:s[0].id,...o,description:o.description===""?null:o.description}).then(()=>B("Cliente atualizado com sucesso!")).catch(()=>R("Erro ao atualizar cliente!"))};return e.jsxs(L,{elevation:1,children:[e.jsx(F,{title:"Detalhes",description:"Nome e descrição do cliente",icon:e.jsx(v,{})}),e.jsx("form",{onSubmit:x(b),children:e.jsxs(E,{sx:{padding:3,gap:2},children:[e.jsx(T,{isLoading:!a,LoadingComponent:e.jsx(D,{variant:"rounded",width:"100%",height:52}),LoadedComponent:e.jsx(k,{fullWidth:!0,children:e.jsx(w,{...h("name"),label:"Nome",error:!!r.name,helperText:(l=r.name)==null?void 0:l.message,autoComplete:"off",InputLabelProps:{shrink:((u=g("name"))==null?void 0:u.length)>0}})})}),e.jsx(I,{name:"description",control:t,render:({field:o})=>e.jsx(y,{label:"Descrição",value:o.value,onChange:o.onChange,isLoading:!a})}),e.jsx(P,{sx:{marginLeft:"auto",marginTop:1},children:e.jsx(z,{loading:i.isPending,type:"submit",variant:"contained",disabled:!a||n(),children:"Atualizar Detalhes"})})]})})]})};export{K as default};
